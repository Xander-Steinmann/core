{"version":3,"file":"main.32cf0acd.iframe.bundle.js","mappings":";qSAAA,IAAIA,IAAM,CACT,2DAA4D,6FAI7D,SAASC,eAAeC,KACvB,IAAIC,GAAKC,sBAAsBF,KAC/B,OAAOG,oBAAoBF,GAC5B,CACA,SAASC,sBAAsBF,KAC9B,IAAIG,oBAAoBC,EAAEN,IAAKE,KAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,IAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACA,OAAOP,IAAIE,IACZ,CACAD,eAAeS,KAAO,SAASC,qBAC9B,OAAOC,OAAOF,KAAKV,IACpB,EACAC,eAAeY,QAAUT,sBACzBU,OAAOC,QAAUd,eACjBA,eAAeE,GAAK,gUCtBpB,SAASa,oBAAoBd,KAC5B,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,IAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACAS,oBAAoBN,KAAO,IAAM,GACjCM,oBAAoBH,QAAUG,oBAC9BA,oBAAoBb,GAAK,kJACzBW,OAAOC,QAAUC,yNCRjB,IAAIhB,IAAM,CACT,iCAAkC,CACjC,yEACA,IACA,IACA,IACA,KAED,gCAAiC,CAChC,wEACA,IAED,yBAA0B,CACzB,iEACA,IACA,IACA,KAED,uCAAwC,CACvC,+EACA,KAED,6BAA8B,CAC7B,qEACA,IACA,KAED,2BAA4B,CAC3B,mEACA,KAED,0BAA2B,CAC1B,kEACA,IACA,KAED,kCAAmC,CAClC,0EACA,IAED,4BAA6B,CAC5B,oEACA,IACA,IAED,2BAA4B,CAC3B,mEACA,IACA,KAED,sBAAuB,CACtB,8DACA,IACA,KAED,iCAAkC,CACjC,yEACA,KAED,6BAA8B,CAC7B,qEACA,KAED,sBAAuB,CACtB,8DACA,IACA,KAED,+BAAgC,CAC/B,uEACA,IACA,KAED,gCAAiC,CAChC,wEACA,KAED,2BAA4B,CAC3B,mEACA,IACA,IAED,uBAAwB,CACvB,+DACA,KAED,sCAAuC,CACtC,8EACA,IACA,KAED,8BAA+B,CAC9B,sEACA,IACA,IAED,8BAA+B,CAC9B,sEACA,KAED,uBAAwB,CACvB,+DACA,IACA,IAED,+BAAgC,CAC/B,uEACA,IACA,IACA,KAED,wBAAyB,CACxB,gEACA,IACA,KAED,sBAAuB,CACtB,8DACA,IACA,KAED,0BAA2B,CAC1B,kEACA,IACA,KAED,2BAA4B,CAC3B,mEACA,IACA,KAED,sBAAuB,CACtB,8DACA,IACA,KAED,8BAA+B,CAC9B,sEACA,MAGF,SAASiB,oBAAoBf,KAC5B,IAAIG,oBAAoBC,EAAEN,IAAKE,KAC9B,OAAOgB,QAAQL,UAAUM,MAAK,KAC7B,IAAIZ,EAAI,IAAIC,MAAM,uBAAyBN,IAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CAAC,IAIT,IAAIa,IAAMpB,IAAIE,KAAMC,GAAKiB,IAAI,GAC7B,OAAOF,QAAQG,IAAID,IAAIE,MAAM,GAAGtB,IAAIK,oBAAoBE,IAAIY,MAAK,IACzDd,oBAAoBF,KAE7B,CACAc,oBAAoBP,KAAO,IAAOE,OAAOF,KAAKV,KAC9CiB,oBAAoBd,GAAK,4IACzBW,OAAOC,QAAUE,uoDCrIJM,gBAAe,wBAAfA,gBAITC,YAAoBC,GAAqCC,WAArC,KAAAD,GAAAA,GAAqC,KAAAC,UAAAA,UAFhD,KAAAC,aAAgC,OAIjC,KAAAC,SAAqC,OAGrC,KAAAC,UAAwB,OAkCxB,KAAAC,aAAe,EAAGC,gBACjBA,YAAYC,aAIS,SAAtBC,KAAKN,aAMTM,KAAKL,SAASK,KAAKC,OAAOC,WALtBF,KAAKL,SAASK,KAAKC,OAAOE,WAKqB,CAlDyB,CAWhFC,WAAWC,OACFA,QAIAL,KAAKN,cAAiC,iBAAVW,QAC7BL,KAAKN,aAAe,QAGxBM,KAAKC,OAAOK,QAAQC,WAAWF,OAAO,GAAOG,MACjD,CAGAC,iBAAiBC,IACbV,KAAKL,SAAWe,EACpB,CAGAC,kBAAkBD,IACdV,KAAKJ,UAAYc,EACrB,CAGAE,iBAAiBC,YACbb,KAAKC,OAAOa,aAAaD,YACzBb,KAAKP,UAAUsB,YAAYf,KAAKR,GAAGwB,cAAe,WAAYH,WAClE,CAgBAI,WACI,IAAKjB,KAAKC,OACN,MAAM,IAAI1B,MAAM,4BAIpB,MAAM2C,UAAYlB,KAAKR,GAAGwB,cAAcE,UACxClB,KAAKR,GAAGwB,cAAcE,UAAY,GAGlClB,KAAKR,GAAGwB,cAAcG,YAAYnB,KAAKC,OAAOmB,QAAQC,QAAQC,YAG9DtB,KAAKC,OAAOsB,WAAW,CAAEF,QAASrB,KAAKR,GAAGwB,gBAGtCE,WACAlB,KAAKC,OAAOK,QAAQC,WAAWW,WAAW,GAAOV,MAIrDR,KAAKC,OAAOuB,GAAG,QAAQ,KACnBxB,KAAKJ,WAAW,IAIpBI,KAAKC,OAAOuB,GAAG,cAAexB,KAAKH,aACvC,CAEA4B,cACIzB,KAAKC,OAAOyB,SAChB,6CA9GA,KAAAC,kBAKA,KAAAC,0DAkBC,KAAAC,4BACA,KAAAA,SAFQvC,gBAAe,qCAX3B,OAAAwC,WAAU,CAEPC,SAAU,kFACVC,UAAW,CACP,CACIC,QAAS,eAAAC,kBACTC,aAAa,OAAAC,aAAW,IAAM,oBAC9BC,OAAO,4CAQS,KAAAV,WAA4C,KAAAC,aAJ3DtC,6KChBAgD,sBAAqB,MAArBA,sBAMT/C,YAAoBgD,KAAA,KAAAA,IAAAA,IALX,KAAAC,UAAkD,wBAElD,KAAAC,aAAwD,CAAC,EACzD,KAAAC,WAAoD,IAEV,CAEnDzB,WACI,IAAKjB,KAAKC,OACN,MAAM,IAAI1B,MAAM,4BAGpByB,KAAKC,OAAO0C,gBACR,yCAAmB,CACfH,UAAWxC,KAAKwC,UAChBvC,OAAQD,KAAKC,OACboB,QAASrB,KAAKuC,IAAIvB,cAClByB,aAAczC,KAAKyC,aACnBC,WAAY1C,KAAK0C,aAG7B,CAEAjB,cACIzB,KAAKC,OAAO2C,iBAAiB5C,KAAKwC,UACtC,mDAlCgB,KAAAb,oEASf,KAAAE,sBACA,KAAAA,4BACA,KAAAA,0BACA,KAAAA,SAJQS,uBAAqB,kBAJjC,OAAAR,WAAU,CAEPC,SAAU,qGAQe,KAAAJ,cANhBW,6KCAAO,oBAAmB,MAAnBA,oBAMTtD,YAAoBgD,KAAA,KAAAA,IAAAA,IALX,KAAAC,UAAgD,sBAEhD,KAAAC,aAAsD,CAAC,EACvD,KAAAC,WAAkD,IAER,CAEnDzB,WACI,IAAKjB,KAAKC,OACN,MAAM,IAAI1B,MAAM,4BAGpByB,KAAKC,OAAO0C,gBACR,uCAAiB,CACbH,UAAWxC,KAAKwC,UAChBvC,OAAQD,KAAKC,OACboB,QAASrB,KAAKuC,IAAIvB,cAClByB,aAAczC,KAAKyC,aACnBC,WAAY1C,KAAK0C,aAG7B,CAEAjB,cACIzB,KAAKC,OAAO2C,iBAAiB5C,KAAKwC,UACtC,iDAlCgB,KAAAb,kEASf,KAAAE,sBACA,KAAAA,4BACA,KAAAA,0BACA,KAAAA,SAJQgB,qBAAmB,kBAJ/B,OAAAf,WAAU,CAEPC,SAAU,iGAQe,KAAAJ,cANhBkB,yBCFAC,mBAAkB,MAAlBA,iCACsB,KAAAC,WAAY,EACL,KAAAC,OAAS,EACnD,uDAFK,KAAAC,YAAW,MAAC,kCACZ,KAAAA,YAAW,MAAC,4BAFJH,oBAAkB,kBAJ9B,OAAAhB,WAAU,CAEPC,SAAU,uBAEDe,wBCAAI,yBAAwB,MAAxBA,uCACmC,KAAAF,OAAS,EACzD,0DADK,KAAAC,YAAW,MAAC,kCADJC,0BAAwB,kBAJpC,OAAApB,WAAU,CAEPC,SAAU,6BAEDmB,wYCGN,MAAMC,gBAIT5D,YAAY6D,UAAoBC,SAAoBC,OAChDtD,KAAKuD,eAAiBF,SAASG,IAAI,KAAAC,gBAEnC,MACMC,QAD2BL,SAASG,IAAI,KAAAG,0BACLC,wBAAwBR,WAEjEpD,KAAK6D,aAAeH,QAAQI,OAAOT,SAAU,IAG7CrD,KAAK+D,YAAYT,OAGjBtD,KAAKuD,eAAeS,WAAWhE,KAAK6D,aAAaI,SACrD,CAEIC,eACA,OAAOlE,KAAK6D,aAAaK,QAC7B,CAEIC,iBACA,OAAOnE,KAAK6D,aAAaR,SAASG,IAAI,KAAA7B,WAC1C,CAEIyC,UACA,OAAOpE,KAAKmE,WAAWnD,aAC3B,CAEA+C,YAAyBT,OACrB3E,OAAO0F,QAAQf,OAAOgB,SAAQ,EAAEC,IAAKlE,UACjCL,KAAKkE,SAASK,KAAkBlE,KAAmB,GAE3D,CAEAmE,gBACIxE,KAAK6D,aAAaY,kBAAkBD,eACxC,CAEA9C,UACI1B,KAAK6D,aAAanC,UAClB1B,KAAKuD,eAAemB,WAAW1E,KAAK6D,aAAaI,SACrD,MCtCSU,yBAAwB,MAAxBA,kFACR,KAAA9C,oBACA,KAAAA,2BACA,KAAAA,wBACA,KAAAA,yBACA,KAAAA,sBACA,KAAAA,gCACA,KAAAA,0BACA,KAAAA,SARQ8C,0BAAwB,kBADpC,OAAAC,WAAU,CAAEC,SAAU,MACVF,0BAgBb,MAAMG,wBAAwB,mBAQ1BC,QACI,MAAM1B,SAAWrD,KAAKoB,QAAQiC,SAExBC,MAAuB,CACzBrD,OAAQD,KAAKC,OACb+E,KAAMhF,KAAKgF,KACXC,YAAajF,KAAKiF,YAClBC,UAAU,EACVC,UAAWnF,KAAKmF,UAChBC,OAAQ,IAAMpF,KAAKoF,SACnBC,iBAAkB,CAACC,WAAa,CAAC,IAAMtF,KAAKqF,iBAAiBC,YAC7DC,WAAY,IAAMvF,KAAKuF,cAI3BvF,KAAKwF,SAAW,IAAIrC,gBAAgBnD,KAAKoD,UAAWC,SAAUC,OAG1DtD,KAAKmF,UAAUM,OAAO1C,YACtB/C,KAAKwF,SAASrB,WAAWnD,cAAc0E,YAAepH,IAClD0B,KAAK2F,YAAYrH,EAAE,GAI3B0B,KAAK4F,kBAAoB5F,KAAKgF,KAAKa,OAC7B,KACAC,SAASC,cAAc/F,KAAKgF,KAAKgB,SAAW,OAAS,OAEvDhG,KAAK4F,oBAIL5F,KAAK4F,kBAAkBK,MAAMC,WAAa,UAC1ClG,KAAKwF,SAAShB,gBAEtB,CAEIJ,UACA,OAAOpE,KAAKwF,SAASpB,GACzB,CAEI+B,iBACA,OAAInG,KAAKgF,KAAKa,OACH,MAGX7F,KAAKoG,sBAEEpG,KAAK4F,kBAChB,CAEQQ,sBACJ,MAAMC,eAAiBrG,KAAKoE,IAAIkC,cAAc,4BAG1CtG,KAAK4F,mBACLS,iBACCA,eAAeE,SAASvG,KAAK4F,oBAE9BS,eAAelF,YAAYnB,KAAK4F,kBAExC,CAEAY,OAAOxB,KAAuBC,aAC1B,OAAIjF,KAAKoB,QAAQoF,OACNxG,KAAKoB,QAAQoF,OAAOxB,KAAMC,aAGjCD,KAAKyB,OAASzG,KAAKgF,KAAKyB,OAIxBzB,OAAShF,KAAKgF,MAAQhF,KAAKiF,cAAgBA,cAI/CjF,KAAKgF,KAAOA,KACZhF,KAAKiF,YAAcA,YACnBjF,KAAKwF,SAASzB,YAAY,CAAEiB,KAAMC,cAClCjF,KAAKoG,wBANM,EASf,CAEAM,aACI1G,KAAKwF,SAASzB,YAAY,CAAEmB,UAAU,GAC1C,CAEAyB,eACI3G,KAAKwF,SAASzB,YAAY,CAAEmB,UAAU,GAC1C,CAEAxD,UACI1B,KAAKwF,SAAS9D,SAClB,EAGG,MAAMkF,wBAA0B,CACnCxD,UACAhC,UAEQkC,OACG,IAAIwB,gBAAgB1B,UAAWE,MAAOlC,aCnIxCyF,yBAAwB,MAAxBA,iCAAiClC,yBAG1C1D,WACIjB,KAAK8G,KAAO9G,KAAKgF,KAAK+B,MAAMD,IAChC,GALSD,0BAAwB,kBANpC,OAAAjC,WAAU,CACP7C,SAAU,uBACV8C,8tBAEAmC,cAAe,KAAAC,kBAAA,y9TAENJ,iMCOb,IAAYK,WAAZ,SAAYA,WACR,+BACA,+BACA,mCACA,qCACA,kCACA,iCACA,oBACA,mCACA,gCACA,iCACA,4BACA,2CACA,qBACH,CAdD,CAAYA,YAAAA,UAAS,KAgBd,MAAMC,gBAAoC,CAACD,UAAUE,UAAWF,UAAUG,iBCtBpEC,mBAAkB,MAAlBA,mBACT/H,YAAoBgI,MAAA,KAAAA,KAAAA,IAAmB,CAEnCC,qBACA,MAAMC,QAAU,IAAI,QAGpB,OAFAA,QAAQC,IAAI,SAAU,OAAOA,IAAI,eAAgB,oBAE1CD,OACX,CAEAE,gBAAgBC,OAAS,GAAIC,aAAe,IACxC,OAAO7H,KAAKuH,KACPO,KAAK,8BAA+B,CACjCF,OAAQ,CACJG,MAAOF,aACPG,MAAOJ,QAEXK,QAAS,OACTC,UAAW,MACXC,QAAS,KAEZC,MAAK,EAAAC,MAAA,GAAM,UACpB,CAEAC,gBAAe,YACA,OACL,kBAGN,OAAOtI,KAAKuH,KACPO,KAAK,uBAAwB,CAC1BE,MAAO,gBAAgBO,2BAA2BC,2DAA2DZ,WAC7Ga,KAAM,eACNC,OAAQ,EACRC,MAAO,KAEVP,MAAK,EAAAC,MAAA,GAAM,SAAU,iBAAkB,eAChD,CASAO,sBAAqB,OACX,gBDnDiB,ICsDvB,OAAO5I,KAAKuH,KACPO,KAAK,uBAAwB,CAC1BE,MAAO,eAAeQ,0DAA0DZ,qCAAqCA,YACrHa,KAAM,eACNC,OAAQ,EACRC,MAAO,KAEVP,MAAK,EAAAC,MAAA,GAAM,SAAU,iBAAkB,eAChD,gDA9DK,UAIIf,oBAAkB,kBAD9B,OAAAuB,oDAE6B,WADjBvB,kMCYAwB,mBAAkB,MAAlBA,mBAGTvJ,YAAoBgI,MAAA,KAAAA,KAAAA,IAAmB,CAEnCC,qBACA,MAAMC,QAAU,IAAI,QAGpB,OAFAA,QAAQC,IAAI,SAAU,OAAOA,IAAI,eAAgB,oBAE1CD,OACX,CAQAsB,eACI,OAAI/I,KAAKgJ,WACE,EAAAC,GAAAA,IAAGjJ,KAAKgJ,WAGZhJ,KAAKuH,KACP/D,IAAI,oBAAqB,CACtBiE,QAASzH,KAAKwH,iBAEjBY,MACG,EAAAC,MAAA,GAAM,WACN,EAAAtK,IAAA,IAAKmL,OACD,MAAMC,QAAqBnJ,KAAKoJ,qBAAqBF,MAIrD,OAFAlJ,KAAKgJ,UAAYG,QAEVA,OAAO,IAG9B,CAUQC,qBAAqBF,MACzB,OAAOA,KAAKG,QAAO,CAACC,IAAKJ,OAASvK,OAAO4K,OAAOD,IAAK,CAAE,CAACJ,KAAKhL,IAAKgL,QAAS,CAAC,EAChF,gDAnEK,UAkBIJ,oBAAkB,kBAH9B,OAAAD,YAAW,CACRW,WAAY,+CAKc,WAHjBV,sGCdAW,6BAA4B,MAA5BA,6BAgBTlK,YAAoB8B,SAAA,KAAAA,QAAAA,QAfM,KAAAqI,KAAO,YACH,KAAAC,SAAW,KAOhC,KAAAC,MAAQ,GACR,KAAAC,IAAM,GACN,KAAAC,SAAU,EACV,KAAAhD,KAAO,KAEhB,KAAAiD,MAAO,CAEmC,CAE1C9I,WACIjB,KAAK+J,KAAO/J,KAAK+J,KAA2B,iBAAb/J,KAAK6J,OAAsB7J,KAAK6J,IAAIG,MAAM,KAAKC,OAAS,EAC3F,CAEAC,WACI,OAAOlK,KAAKqB,QAAQL,cAAcmJ,SACtC,CAEAC,QACIpK,KAAKqB,QAAQL,cAAciF,MAAQ,kBACvC,CAEAoE,UACIrK,KAAKqB,QAAQL,cAAciF,MAAQ,EACvC,CAEAqE,iBACI,IAAKtK,KAAKuK,aAAc,CACpB,MAAMC,MAAQxK,KAAKqB,QAAQL,cACrByJ,OAASD,MAAME,eAIjBC,IAAKC,aACLD,IAAKE,aACLC,OAAQC,iBACRN,OAAOO,yBACL,IAAK,QAAaR,MAAMQ,wBAExBC,UAAYN,IAAMC,aAClBM,UAAYC,OAASN,aAI3BJ,OAAOQ,WAAajL,KAAKoL,aAAeH,UAAYC,UAAYH,gBAExE,CAUQR,aACJ,MAAM,OAAQ,KAAUvK,KAAKqB,QAAQL,cAAcgK,wBAC7CK,cAAgBrL,KAAKqB,QAAQL,cAAc0J,cAAcM,wBAE/D,OAAOL,KAAOU,cAAcV,KAAOQ,QAAUE,cAAcF,MAC/D,CAYQC,aACJ,MAAM,KAAUpL,KAAKqB,QAAQL,cAAcgK,yBACnCL,IAAKC,cACT5K,KAAKqB,QAAQL,cAAc0J,cAAcM,wBAE7C,OAAOL,IAAMC,YACjB,0DAhGgB,KAAAjJ,sEAUf,KAAAsB,YAAW,MAAC,+BACZ,KAAAA,YAAW,MAAC,gCAEZ,KAAAA,YAAW,MAAC,oBAAiB,MAC7B,KAAApB,uBAGA,KAAAA,qBACA,KAAAA,mBACA,KAAAA,uBACA,KAAAA,oBACA,KAAAA,SAZQ4H,8BAA4B,kBALxC,OAAA7E,WAAU,CACP7C,SAAU,4BACV8C,w0VAmB6B,KAAAlD,cAhBpB8H,kCCAA6B,wBAAuB,MAAvBA,wBAKTC,qBACIvL,KAAKwL,WAAa,IAAI,QAAgBxL,KAAKyL,OAAOC,UACtD,CAQAC,gBAAgBC,OACR5L,KAAKwL,WAAWK,YAChB7L,KAAKwL,WAAWK,WAAWxB,UAG/BrK,KAAKwL,WAAWM,UAAUF,OAC1B5L,KAAKwL,WAAWK,WAAWvB,gBAC/B,CAOAyB,cACI/L,KAAKwL,WAAWK,WAAWG,SAC/B,CAOAC,qBACIjM,KAAKwL,WAAWK,YAAYxB,UAC5BrK,KAAKwL,WAAWS,qBAChBjM,KAAKwL,WAAWK,YAAYzB,OAChC,CAOA8B,kBACIlM,KAAKwL,WAAa,IAAI,QAAgBxL,KAAKyL,OAAOC,WAGlDS,YAAW,KACPnM,KAAKiM,oBAAoB,GAC1B,EACP,CAQAG,iBAAiBC,OACbrM,KAAKwL,WAAWK,YAAYxB,UAC5BrK,KAAKwL,WAAWc,cAAcD,MAClC,GCzCJ,IAAYE,+DDvBP,KAAAC,gBAAe,MAAC/C,iCAHR6B,yBAAuB,kBALnC,OAAA1G,WAAU,CACP7C,SAAU,sBACV8C,yOAGSyG,yBC0Bb,SAAYiB,WACR,wBACA,oCACA,2BACH,CAJD,CAAYA,YAAAA,UAAS,SAWRE,qBAAoB,MAApBA,qBAgCTlN,YACYmN,mBACAC,mBACAC,IAFA,KAAAF,mBAAAA,mBACA,KAAAC,mBAAAA,mBACA,KAAAC,GAAAA,GA7BH,KAAAnB,MAAuB,GACvB,KAAAoB,MAAQ,iBACR,KAAAC,iBAAmB,aACnB,KAAAC,QAAS,EACT,KAAAvE,gBLjDkB,EKkDlB,KAAAwE,oBAAsB,GAEtB,KAAAC,SAAU,EACV,KAAAnD,SAAU,EAET,KAAAoD,YAAoC,IAAI,KAAAC,aACxC,KAAAC,OAAmC,IAAI,KAAAD,aAIzC,KAAAE,WAAY,EAIpB,KAAAC,gBAAiB,CAWd,CARHC,cACIvN,KAAKqN,WAAY,CACrB,CAQApM,WAC+B,IAAvBjB,KAAKyL,OAAOxB,QAAiBjK,KAAKiN,UAElCjN,KAAKyL,MAAQ+B,kBACbxN,KAAKyL,MAAMnH,SAASmJ,OAChBA,KAAKzB,QAAU,KACXhM,KAAKkN,YAAYQ,KAAKnB,UAAUoB,OAChCF,KAAKvP,GAAG0P,SAAS,WACX5N,KAAK6N,YAAY,CACbpH,KAAM,CAAEqH,KAAM,aAAcL,KAAKnI,cAErCtF,KAAK6N,YAAY,CAAEpH,KAAM,CAAEqH,KAAML,KAAKvP,KAAO,CACtD,KAIT8B,KAAK+N,aAAe/N,KAAKyL,MACzBzL,KAAKgO,YAAczB,UAAUoB,MAC7B3N,KAAK2M,mBACA5D,eACAX,MAAK,EAAA6F,KAAA,GAAK,IACVC,WAAW/E,SAAanJ,KAAKmO,SAAWhF,SACjD,CAEAiF,kBACIpO,KAAKiM,oBACT,CAOAoC,qBACIrO,KAAKyL,MAAQ,CACT,CACI7B,MAAO,cACPG,KAAM,UACNiC,QAAS,KACLhM,KAAKkN,YAAYQ,KAAKnB,UAAU+B,aAChCtO,KAAKuO,kBAAkB,MAG5BvO,KAAKyL,OAEZzL,KAAKiM,oBACT,CAOAF,cACQ/L,KAAKyL,MAAMxB,OACXjK,KAAKwO,KAAKzC,cAEV/L,KAAKyO,iBAAiB,IAAIC,WAAW,SAE7C,CAQA/C,gBAAgBrN,GACZ0B,KAAKwO,KAAK7C,gBAAgBrN,GAC1B0B,KAAKqN,WAAY,CACrB,CAOApB,qBACIjM,KAAKwO,MAAMvC,oBACf,CAOAG,iBAAiBC,OACbrM,KAAKwO,MAAMpC,iBAAiBC,MAChC,CAOAH,kBACIlM,KAAKwO,MAAMtC,iBACf,CAQAyC,mBAAmBrQ,GACfA,EAAEsQ,gBACN,CAQAC,aAAavQ,GAET,IAAK0B,KAAKqN,UACN,OAGJ/O,EAAEsQ,iBACF,MAAMvC,MAAQyC,OAAQxQ,EAAEyQ,OAAuBC,QAAQ3C,OACvDrM,KAAKoM,iBAAiBC,MAC1B,CASA4C,YAAY3Q,EAAemP,MACvBnP,EAAEsQ,iBACFnB,KAAKzB,SACT,CAQAyC,iBAAiB7C,OACbA,MAAMgD,iBACNhD,MAAMsD,kBACNlP,KAAKoN,OAAOM,KAAK9B,OAEjB5L,KAAKgO,YACDhO,KAAKgO,cAAgBzB,UAAU4C,QAAU5C,UAAU+B,YAAc/B,UAAUoB,MAC/E3N,KAAKoP,aACT,CAQAA,YAAYxH,OAAiB,IACzB,OAAQ5H,KAAKgO,aACT,KAAKzB,UAAUoB,MACX3N,KAAKyL,MAAQzL,KAAK+N,aAAanG,QAAQ6F,MACnCA,KAAK7D,MAAMyF,cAAczB,SAAShG,OAAO0H,OAAOD,iBAEpD,MAEJ,KAAK9C,UAAU+B,YACXtO,KAAKuO,iBAAiB3G,QACtB,MAEJ,KAAK2E,UAAU4C,QACXnP,KAAKuP,gBAAgBvP,KAAKwP,oBAAqB5H,QAGvD5H,KAAKsN,iBAAmB1F,OAAOqC,OAC/BjK,KAAKiM,oBACT,CAUAwD,mBAAkB,KAAS,KACvBzP,KAAKiN,SAAU,EACfjN,KAAK0M,mBACA9D,qBAAqB,CAAEhB,OAAQ8H,OAC/BtH,MAAK,EAAA6F,KAAA,GAAK,IACVC,WAAWyB,cACR3P,KAAKyL,MAAQkE,YAAY5R,KAAK6R,aAC1B,MAAM,YAAiBA,WAGvB,OAFAA,WAAWC,SAAW7P,KAAK8P,sBAAsBC,YAE1C,CACHnG,MAAOgG,WAAW/C,MAClB9C,KAAM,mBACNjD,KAAM,CACF8I,YAEJ5D,QAAS,KACLhM,KAAK6N,YAAY,CACbmC,QAASJ,WACTnJ,KAAM,CACFqH,KAAM,eAEZ,EAET,IAEL9N,KAAKiN,SAAU,EAEfgD,uBAAsB,IAAMjQ,KAAKiM,sBAAqB,GAElE,CAEQsC,iBAAiB3G,OAAS,IAC9B5H,KAAK0M,mBACA/E,gBAAgBC,OAAQ5H,KAAKgN,qBAC7B5E,MACG,EAAArK,IAAA,IAAK0N,OACMA,MAAM1N,KAAK0P,OACP,CACH7D,MAAO6D,KAAKK,KACZ/D,KAAM0D,KAAK1D,KACXiC,QAAS,KACLhM,KAAKwP,oBAAsB/B,KAC3BzN,KAAKgO,YAAczB,UAAU4C,QAC7BnP,KAAKuP,gBAAgB9B,MACrBzN,KAAKkN,YAAYQ,KAAKnB,UAAU4C,QAAQ,SAKxD,EAAAlB,KAAA,GAAK,IAERC,WAAWzC,QACRzL,KAAKyL,MAAQA,MACbzL,KAAKgO,YAAczB,UAAU+B,YACzBtO,KAAKyL,MAAMxB,QACXjK,KAAK6M,MAAQ,wBACb7M,KAAK4M,GAAGpI,gBACRxE,KAAKkM,oBAELlM,KAAK6M,MAAQ,aACb7M,KAAK4M,GAAGpI,iBAGZxE,KAAK4M,GAAGpI,gBACRxE,KAAKkM,iBAAiB,GAElC,CAEQqD,gBAAgBhH,YAAgCX,OAAS,IAC7D5H,KAAK0M,mBACApE,eAAe,CACZC,YAAaA,YAAY2H,SACzBtI,OACAY,gBAAiBxI,KAAKwI,kBAEzBJ,MAAK,EAAA6F,KAAA,GAAK,IACVC,WAAWyB,cACR3P,KAAKyL,MAAQkE,YAAY5R,KAAK6R,aAC1B,MAAM,YAAiBA,WAGvB,OAFAA,WAAWC,SAAW7P,KAAK8P,sBAAsBC,YAE1C,CACHnG,MAAOgG,WAAW/C,MAClB9C,KAAM,mBACNjD,KAAM,CACF8I,YAEJ5D,QAAS,KACLhM,KAAK6N,YAAY,CACbmC,QAASJ,WACTnJ,KAAM,CACFqH,KAAM,eAEZ,EAET,IAED9N,KAAKyL,MAAMxB,QACXjK,KAAK6M,MAAQ,sBACb7M,KAAK4M,GAAGpI,gBACRxE,KAAKkM,oBAELlM,KAAK6M,MAAQ,qBAAqBtE,YAAYuF,WAC9C9N,KAAK4M,GAAGpI,mBAGxB,CAEQsL,sBAAsBC,YAC1B,MAAM,aAAc,aAAkB/P,KAAKmO,SAAS4B,YAEpD,OAAKI,cAAiBC,YAIf,GAAGD,gBAAgBC,cAHf,EAIf,kDAjXK9I,0BAFAwB,0BAhBL,KAAAuH,qEA8CC,KAAAC,UAAS,MAAC,OAAQ,CAAEC,QAAQ,yBAG5B,KAAA1O,qBACA,KAAAA,qBACA,KAAAA,gCACA,KAAAA,sBACA,KAAAA,+BACA,KAAAA,mCACA,KAAAA,uBAEA,KAAAA,uBACA,KAAAA,2BAEA,KAAA2O,uBACA,KAAAA,4BAUA,KAAAC,aAAY,MAAC,YAAa,CAAC,cA3BnBhE,sBAAoB,kBALhC,OAAA7H,WAAU,CACP7C,SAAU,kBACV8C,msYAoCgCyC,mBACAwB,mBAChB,KAAAuH,qBAnCP5D,0BCvCAiE,sBAAqB,MAArBA,wBAAAA,uBAAqB,kBALjC,OAAA9L,WAAU,CACP7C,SAAU,oBACV8C,6mNAGS6L,2BCFAC,YAAW,MAAXA,YAOTC,QAAQC,KAAcC,WAClB,IAAIC,KAAe,KAEnB,GAAIF,KAAM,CACN,MAAMG,MAAQH,KAAK7G,MAAM,MACzB+G,KAAOC,OAASA,MAAM/G,OAAS6G,UAAYE,MAAMF,WAAa,KAGlE,OAAOC,IACX,CAOAE,SAASC,KACL,OAAOA,IACFC,QAAQ,uBAAuB,CAACC,OAAQ/E,QACpB,IAAVA,MAAc+E,OAAO/B,cAAgB+B,OAAOC,gBAEtDF,QAAQ,OAAQ,GACzB,CAUAG,UAAUJ,KACN,MAAO,GAAGA,IAAIK,OAAO,GAAGC,sBAAsBN,IAAI7R,MAAM,IAC5D,GAzCSsR,aAAW,kBADvB,OAAA9H,eACY8H,aCAN,MAAMc,wBACG,ECFT,MAAMC,iBAMTC,iBACI,MAAM3H,MAAkB4H,OAAOC,SAASC,OAAOC,UAAU,GAAG/H,MAAM,KAC5DjM,IAA2B,IAAIiU,IAOrC,OALAhI,MAAM1F,SAAS2N,QACX,MAAMC,WAAuBD,MAAMjI,MAAM,KACzCjM,IAAI2J,IAAIwK,WAAW,GAAIA,WAAW,GAAG,IAGlCnU,GACX,CAOAoU,oBAAoBrE,MAChB,IAAIzN,MAAQ,KACZ,MACM+R,QADQ,IAAIC,OAAO,OAASvE,KAAKqD,QAAQ,UAAW,QAAU,qBAC9CmB,KAAKV,OAAOC,SAASU,MAM3C,OAJIH,SAAWA,QAAQ,KACnB/R,MAAQmS,mBAAmBJ,QAAQ,GAAGjB,QAAQ,MAAO,OAGlD9Q,KACX,MC1BSoS,cAAa,MAAbA,cAITlT,YAAoBmT,aAAA,KAAAA,YAAAA,YAHZ,KAAAC,UAAW,EAIf3S,KAAK4S,iBAAmB,IAAIlB,iBAC5B1R,KAAK2S,SAAW3S,KAAK6S,iBAEjB7S,KAAK2S,UACLG,QAAQC,KAAK,qDAErB,CAEAA,KAAKC,WAAkBC,gBACfA,gBAAkBA,eAAehJ,OAAS,EAC1C6I,QAAQC,KAAK/S,KAAKkT,YAAYF,SAAUC,gBAExCH,QAAQC,KAAK/S,KAAKkT,YAAYF,SAEtC,CAEAG,MAAMH,WAAkBC,gBAChBA,gBAAkBA,eAAehJ,OAAS,EAC1C6I,QAAQK,MAAMnT,KAAKkT,YAAYF,SAAUC,gBAEzCH,QAAQK,MAAMnT,KAAKkT,YAAYF,SAEvC,CAEAI,KAAKJ,WAAkBC,gBACfA,gBAAkBA,eAAehJ,OAAS,EAC1C6I,QAAQM,KAAKpT,KAAKkT,YAAYF,SAAUC,gBAExCH,QAAQM,KAAKpT,KAAKkT,YAAYF,SAEtC,CAEAK,MAAML,WAAkBC,gBAChBA,gBAAkBA,eAAehJ,OAAS,EAC1C6I,QAAQO,MAAMrT,KAAKkT,YAAYF,SAAUC,gBAEzCH,QAAQO,MAAMrT,KAAKkT,YAAYF,SAEvC,CAMAH,iBACI,MAAMS,QAAkBtT,KAAK4S,iBAAiBT,oBAzD/B,WA0Df,OAAQV,wBAAsC,OAAZ6B,OACtC,CAEQJ,YAAYF,SAEhB,OAAOhT,KAAK2S,SAAWK,QAAUhT,KAAKuT,YAAc,MAAQP,OAChE,CACQO,YACJ,IAAIC,OAAS,UACb,IACI,MAAM,IAAIjV,MACZ,MAAOD,GACLkV,OAASxT,KAAKyT,YAAYzT,KAAK0S,YAAY9B,QAAQtS,EAAEoV,MAAO,IAEhE,OAAOF,MACX,CAEQC,YAAYD,QAChB,OAAOA,OAASA,OAAOlE,OAAOqE,OAAO,GAAK,SAC9C,2CAhFKhD,cAUI8B,eAAa,kBADzB,OAAA5J,oDAKoC8H,eAJxB8B,mBCPAmB,UAAS,MAATA,UAMTrU,YAAoBsU,cAAiDC,UAAjD,KAAAD,cAAAA,cAFpB,KAAAE,gBAAiB,EAGb/T,KAAKgU,OAASF,SACd,IACI,MAAMjK,IAAM+H,OAAOC,SAASC,OAAOC,UAAU,GAC7C/R,KAAKgU,OAAShU,KAAKiU,iBAAiBpK,KACtC,MAAOvL,GACL0B,KAAK6T,cAAcV,MAAM,kCAEjC,CAEAc,iBAAiBC,eACb,IAAIF,OAAShU,KAAKgU,OAClB,GAAIE,eAAiBA,cAAcjK,OAAQ,CACvC,MAAMkK,EAAID,cACJE,MAAQ,UACRC,IAAMF,EAAEG,QAAQF,OACtB,GAAIC,KAAO,EAAG,CACV,IAAIE,IAAMJ,EAAEG,QAAQ,IAAKD,KACzBE,KAAe,IAATA,IAAaA,IAAMJ,EAAEG,QAAQ,IAAKD,KACxCE,KAAe,IAATA,IAAaA,IAAMJ,EAAElK,OAC3B+J,OAASG,EAAEpC,UAAUsC,IAAMD,MAAMnK,OAAQsK,MAGjD,OAAOP,MACX,qDAjCKvB,8CAS8C,KAAA+B,OAAM,MAAC,KAAAC,eANjDb,WAAS,kBADrB,OAAA/K,oDAOsC4J,cAAe,UANzCmB,eCCAc,QAAO,gBAAPA,QAsBTnV,YAAYoV,SAA6Bd,eAAA,KAAAA,cAAAA,cArBzC,KAAAe,OAAS,uCAET,KAAAC,YAAa,EACb,KAAAC,qBAAsB,EAmBlB9U,KAAK2U,SAAWA,SAEhB,IACI,IAAI3M,MAAQlC,SAAS+L,SAASC,OAAOC,UAAU,GACjC,KAAV/J,OACIlC,SAAS+L,SAASkD,KAAKT,QAAQ,MAAQ,IACvCtM,MAAQlC,SAAS+L,SAASkD,KAAKpB,OAAO7N,SAAS+L,SAASkD,KAAKT,QAAQ,KAAO,IAGpF,MAAMM,OAAS,UAAQI,gBAAgBhN,MAAO,WAC1C4M,SACA5U,KAAK4U,OAASA,OACd5U,KAAK6T,cAAcR,MAAM,kBAAmBrT,KAAK4U,SAErD,MAAMC,WAAa,UAAQG,gBAAgBhN,MAAO,cAC9C6M,aACA7U,KAAK6U,WAA4B,SAAfA,YAAwC,MAAfA,WAC3C7U,KAAK6T,cAAcR,MAAM,qBAAsBrT,KAAK6U,aAGxD,MAAMC,oBAAsB,UAAQE,gBAAgBhN,MAAO,uBACvD8M,sBACA9U,KAAK8U,oBACuB,SAAxBA,qBAA0D,MAAxBA,oBACtC9U,KAAK6T,cAAcR,MAAM,8BAA+BrT,KAAK8U,sBAGjE9U,KAAKiV,cAAcjN,MAAO2M,UAC5B,MAAOrW,GACL0B,KAAK6T,cAAcV,MAAM,uCAAwC7U,GAEzE,CAhDAiS,uBAAuBvI,MAAeoM,OAClC,IAAIC,KAAO,EACPa,OAAS,KAKb,GAJAd,OAAgB,IACZpM,OAASA,MAAMiC,SACfoK,IAAMrM,MAAMsM,QAAQF,QAEpBC,KAAO,EAAG,CACV,IAAIE,IAAMvM,MAAMsM,QAAQ,IAAKD,KAC7BE,KAAe,IAATA,IAAaA,IAAMvM,MAAMiC,OAC/BiL,OAASlN,MAAM+J,UAAUsC,IAAMD,MAAMnK,OAAQsK,KAGjD,OAAOW,MACX,CAoCQD,cAAcjN,MAAemN,MACjCA,KAAKpB,eAAsE,SAArD,UAAQiB,gBAAgBhN,MAAO,iBACzD,qCA9DK4L,iBACAnB,gBAGIiC,QAAO,6BADnB,OAAA7L,oDAuByB+K,UAAkCnB,iBAtB/CiC,aCIAU,YAAW,MAAXA,YACFC,SACH,MAA6B,aAAtBC,UAAUC,UAAuE,IAA7CD,UAAUE,WAAWlB,QAAQ,UAC5E,GAHSc,aAAW,kBADvB,OAAAvM,eACYuM,iBCTD,sYAAZ,SAAYK,UACR,iDACA,6CACA,6CACA,+CACA,mDACA,kDACH,CAPD,CAAY,wCAAQ,KCGb,MAGMC,sBAAwB,CACjC,EAAG,gCAGA,MAAMC,QACTpW,YACWf,KACAwU,QACA4C,QACAC,SACAC,QAJA,KAAAtX,KAAAA,KACA,KAAAwU,QAAAA,QACA,KAAA4C,QAAAA,QACA,KAAAC,SAAAA,SACA,KAAAC,OAAAA,MACR,ECFA,MAAMC,aAIT,YAA2BC,MAAA,KAAAA,KAAAA,KACvB,IACIhW,KAAKiW,eAAiBD,KAAKE,KAC3BlW,KAAKyH,QAAUuO,KAAKvO,QACtB,MAAOnJ,GACL0B,KAAKiW,eAAiB,KAE9B,CAEOE,OAAOC,YACV,OAAOpW,KAAKyH,QAAQjE,IAAI4S,WAC5B,CAEIC,sBACA,OAAOrW,KAAKiW,eAAeI,eAC/B,CAEI1G,kBACA,OAAO3P,KAAKiW,eAAetG,WAC/B,CAEI2G,aACA,OAAOtW,KAAKiW,eAAeK,MAC/B,CAEIC,gBACA,OAAOvW,KAAKiW,eAAeM,SAC/B,CAEIC,qBACA,IAAIC,cAAgB,GAUpB,OARIzW,KAAKiW,eAAeS,OACpB1W,KAAKiW,eAAeS,OAAOpS,SAAShG,IAChCmY,eAAiBnY,EAAE0U,OAAO,IAG9ByD,cAAgBzW,KAAKiW,eAAeU,SAASC,WAG1CH,aACX,CAEII,aACA,OAAO7W,KAAKgW,KAAKa,MACrB,CAEIhB,eACA,OAAO7V,KAAKgW,IAChB,CAEOc,WAAWC,WACd,OACI/W,KAAKiW,eAAeS,QACpB1W,KAAKiW,eAAeS,OAAO9O,QAAQtJ,GAAWA,EAAEyY,YAAcA,YAAW9M,OAAS,CAE1F,2FCtBS+M,eAAc,MAAdA,eAGTzX,YACYsU,cACAoD,OACA1P,MAFA,KAAAsM,cAAAA,cACA,KAAAoD,OAAAA,OACA,KAAA1P,KAAAA,KALJ,KAAA2P,kBAAoC,EAMzC,CAYHtB,QAAWxU,SACFA,QAAQ+V,SACT/V,QAAQ+V,OAAS,OAGrB,MAAMvB,QAAU5V,KAAKoX,eAAehW,SAC9B0U,OAAS1U,QAAQ8U,KAEvB,OAAOlW,KAAKuH,KAAKqO,QAAQA,SAASxN,MAC9B,EAAAR,OAAA,IACKgE,OACGA,MAAMnF,OAAS,oBAEvB,EAAA1I,IAAA,IAAKiY,OAED,IACI,OAAOA,KAAKE,KACd,MAAO/C,OACL,OAAO6C,UAGf,EAAAqB,WAAA,IACI,CAACxB,SAA6ByB,aAC1B,GAAIzB,SAAU,CAGV,GAFA7V,KAAKuX,cAAc1B,SAASgB,QAGxBhB,SAASgB,SAAW,iCACpBhB,SAASgB,SAAW,6BAEpB,MACIhB,SAAS2B,YACT3B,SAAS2B,WAAWlD,QAAQ,iBAAmB,EAEzC,IAAIqB,QFvGF,EEyGJD,sBFzGI,GE0GJE,QACAC,SACAC,QAGE,IAAIH,QF7GL,EE+GDE,SAAS1C,MAAMH,QACf4C,QACAC,SACAC,QAGL,GAAID,SAASgB,SAAW,6BAK3B,MAJA7W,KAAK6T,cAAcV,MACf,iDACA/R,QAAQyI,KAEN,IAAI8L,QF3HA,EE6HNE,SAASpO,QAAQjE,IAAI,iBACrBoS,QACAC,SACAC,QAIZ,OAAO,IAAI,IAI3B,CAiBA2B,YAAqBrW,SAKjB,IAAIwU,QAYJ,OAhBKxU,QAAQ+V,SACT/V,QAAQ+V,OAAS,OAObvB,QAFJxU,QAAQ8U,MACG9U,QAAQ8U,KACLlW,KAAKoX,eAAuBhW,UAKhCpB,KAAKoX,eAAehW,SAG3BpB,KAAKuH,KAAKqO,QAAQA,SAASxN,MAC9B,EAAAR,OAAA,IACKgE,OACGA,MAAMnF,OAAS,oBAEvB,EAAA1I,IAAA,IAAKiY,MACGA,KAAKE,MAAQF,KAAKE,KAAKQ,QAAUV,KAAKE,KAAKQ,OAAOzM,OAAS,EACpDjK,KAAK0X,wBAA2B1B,MAEhC,IAAID,aAAgBC,SAGnC,EAAAqB,WAAA,IAAYM,MACR3X,KAAKuX,cAAcI,IAAId,SAChB,EAAAe,WAAA,GAAW5X,KAAK6X,yBAAyBF,SAG5D,CASAG,qBAAqBC,eAKjB,OAJK/X,KAAKkX,kBAAkBa,iBACxB/X,KAAKkX,kBAAkBa,eAAiB,IAAI,qBAGzC/X,KAAKkX,kBAAkBa,eAAeC,cACjD,CAEQN,wBAA2B1B,MAK/B,OAJoB,MAAhBA,KAAKa,QACL7W,KAAKiX,OAAOgB,SAAS,CAAC,kBAGnB,IAAIlC,aAAgBC,KAC/B,CAEQ6B,yBAAyB7B,MAK7B,OAJoB,MAAhBA,KAAKa,QACL7W,KAAKiX,OAAOgB,SAAS,CAAC,kBAGnBjC,IACX,CAEQuB,cAAcV,QACd7W,KAAKkX,kBAAkBL,SACvB7W,KAAKkX,kBAAkBL,QAAQqB,MAEvC,CAEQd,eAAkBhW,SACtB,MAAMqG,QAAUzH,KAAKmY,eAAe/W,QAAQqG,SACtC2Q,OAASpY,KAAKqY,cAAcjX,QAAQgX,QACpCvO,IAAM7J,KAAKsY,YAAYlX,QAAQyI,KAC/BqM,KAAU9U,QAAQ8U,MAAQ,KAEhC,GACuB,SAAnB9U,QAAQ+V,QACW,QAAnB/V,QAAQ+V,QACW,UAAnB/V,QAAQ+V,QACW,WAAnB/V,QAAQ+V,OAER,OAAO,IAAI,QAAe/V,QAAQ+V,OAAQtN,IAAKqM,KAAM,CACjDzO,QACA2Q,SAIR,MAAMjB,OAA+C/V,QAAQ+V,OAC7D,OAAO,IAAI,QAAeA,OAAQtN,IAAK,CACnCpC,QACA2Q,QAER,CAEQD,eAAe1Q,SACnB,IAAI8Q,YAAcvY,KAAKwY,2BAavB,OAXI/Q,SAAW9I,OAAOF,KAAKgJ,SAASwC,SAChCtL,OAAOF,KAAKgJ,SAASnD,SAASC,MAC1BgU,YAAcA,YAAY7Q,IAAInD,IAAKkD,QAAQlD,KAAK,IAKpB,wBAA5BkD,QAAQ,kBACR8Q,YAAcA,YAAYE,OAAO,kBAGlCF,WACX,CAEQD,YAAYzO,KAChB,GAAIA,KAAK6O,WAAW,OAChB,MAAO,IAAI7O,MAIf,OADgBA,IAAMA,IAAIG,MAAM,KAAK,GAAK,IAC9B2O,MAAM,WACP,QAAQ9O,MAEZA,GACX,CAEQwO,cAAcD,QAClB,GAAIA,QAAUzZ,OAAOF,KAAK2Z,QAAQnO,OAAQ,CACtC,IAAI2O,WAAa,IAAI,QAKrB,OAHAja,OAAOF,KAAK2Z,QAAQ9T,SAASC,MACzBqU,WAAaA,WAAWlR,IAAInD,IAAK6T,OAAO7T,KAAK,IAE1CqU,WAGX,OAAO,IACX,CAEQJ,2BAIJ,OAHgB,IAAI,SACf9Q,IAAI,SAAU,OACdA,IAAI,eAAgB,mBAE7B,4CAlSK+K,qBAEA,iBAEL,UAqCSuE,gBAAc,kBAD1B,OAAAnO,oDAK8B4J,cACP,UACF,WANTuE,oBC9CA6B,4BAA2B,MAA3BA,0CACD,KAAA/R,KAA0C,IAAI,mBAS1D,CAPQgS,kBACA,OAAO9Y,KAAK8G,KAAKkR,cACrB,CAEAe,KAAKjS,MACD9G,KAAK8G,KAAKoR,KAAKpR,KACnB,GATS+R,6BAA2B,kBAHvC,OAAAhQ,YAAW,CACRW,WAAY,UAEHqP,iCCGAG,iBAAgB,MAAhBA,iBACTzZ,YAAoB0X,QAAA,KAAAA,OAAAA,MAAiB,CAE9BgC,WACHjZ,KAAKiX,OAAOgB,SAAS,CAAC,MAC1B,CAEOiB,UAAUC,YACbnZ,KAAKiX,OAAOgB,SAAS,CAAC,iBAAkBkB,WAC5C,CAEOC,QAAQvP,KACX7J,KAAKiX,OAAOgB,SAAS,CAACpO,KAC1B,CAEOwP,YAAYxP,KACf,OAAOA,IAAI6O,WAAW,UAC1B,CAEOY,cAAczP,KACjB,OAAOA,IAAI6O,WAAW,YAC1B,CAEOa,UAAU1P,KACb,MAAe,MAARA,GACX,CAEO2P,YAAYC,WACfzZ,KAAKiX,OAAOgB,SAAS,CAAC,KAAKwB,UAAUtI,QAAQ,IAAK,QACtD,CAEOuI,qBACH1Z,KAAKiX,OAAOgB,SAAS,CAAC,0BAC1B,CAEO0B,kBACH3Z,KAAKiX,OAAOgB,SAAS,CAAC,iBAC1B,8CA9CK,YASIe,kBAAgB,kBAD5B,OAAAnQ,oDAE+B,aADnBmQ,0HCmDAY,oBAAmB,MAAnBA,oBASTra,YAAoBsa,eAAwChG,eAAxC,KAAAgG,eAAAA,eAAwC,KAAAhG,cAAAA,cARpD,KAAAiG,oBAAqD,IAAIC,gBAAA,EAAgB,MAS7E/Z,KAAKga,UAAY,sBACjBha,KAAKia,YACT,CAEAC,YACI,OAAOla,KAAK8Z,oBACP9B,eACA5P,MAAK,EAAAR,OAAA,IAAQnC,UAA2BA,SACjD,CAEAwU,aACIja,KAAK6T,cAAcR,MAAM,6BAA8BrT,KAAKga,WAE5Dha,KAAK6Z,eACApC,YAAY,CACT5N,IAAK7J,KAAKga,YAEb5R,MAAK,EAAAC,MAAA,GAAM,WACX6F,WAAWiM,MACRna,KAAK6T,cAAcR,MAAM,wBAAyB8G,KAElD,MAAMC,aAA6B,CAC/BC,OAAQF,IAAI1U,OAAO4U,OACnBC,WAAYH,IAAI1U,OAAkB,WAClC8U,QAASJ,IAAI1U,OAAO8U,QACpBC,MAAOL,IAAI1U,OAAO+U,MAClBC,KAAMN,IAAIM,KACVC,eAAgBP,IAAI1U,OAjFT,0BAkFXkV,cAAeR,IAAI1U,OAnFT,yBAoFVmV,YAAa,CACTC,UAAWV,IAAI1U,OAAOmV,aAAaC,UACnCC,QAASX,IAAI1U,OAAOmV,aAAaE,SAErCC,UAAW,CACPC,uBACIb,IAAI1U,OAAOsV,UA5FC,mCA6FhBE,mBAAoBd,IAAI1U,OAAOsV,UA5Fb,8BAoG1B,OAJA/a,KAAK8Z,oBAAoB5B,KAAKkC,cAE9Bpa,KAAK6T,cAAcR,MAAM,oBAAqB+G,cAEvCD,GAAG,GAEtB,CAOAe,eACI,OAAOlb,KAAK6Z,eACPpC,YAAY,CACT5N,IAAK7J,KAAKga,YAEb5R,MACG,EAAAC,MAAA,GAAM,SAAU,SAAU,cAC1B,EAAAtK,IAAA,IAAKod,WACMA,UAAU1S,MAAK,CAAC2S,EAAgBC,IAC/BD,EAAExR,MAAQyR,EAAEzR,MACL,EAEPwR,EAAExR,MAAQyR,EAAEzR,OACJ,EAGL,MAI3B,CAOA0R,oBACI,OAAOtb,KAAK6Z,eACPpC,YAAY,CACT5N,IAAK7J,KAAKga,YAEb5R,MAAK,EAAAC,MAAA,GAAM,SAAU,SAAU,mBAAmB,EAAA4F,KAAA,GAAK,GAChE,iDA7JK+I,sBAIAvE,gBAyDImH,qBAAmB,kBAD/B,OAAA/Q,oDAUuCmO,eAAuCvE,iBATlEmH,qBC1DN,MAAe2B,SAMlBhc,YAAsBsU,eAAA,KAAAA,cAAAA,cALZ,KAAA2H,MAAsB,IAAI,oBAC1B,KAAAC,OAAuB,IAAI,oBAC3B,KAAAC,SAAyB,IAAI,oBAC7B,KAAAC,OAAuB,IAAI,mBAEgB,CAKrDC,WACI,OAAO5b,KAAK0b,SAAS1D,cACzB,CAEA6D,QACI,OAAO7b,KAAKwb,MAAMxD,cACtB,CAEA8D,SACI,OAAO9b,KAAKyb,OAAOzD,cACvB,CAEA+D,SACI,OAAO/b,KAAK2b,OAAO3D,cACvB,CAEAgE,YACIhc,KAAKic,QACL9P,YAAW,KACPnM,KAAKkc,SAAS,GACf,EACP,CAEAxa,UACI1B,KAAKwb,MAAMW,WACXnc,KAAKyb,OAAOU,WACZnc,KAAK0b,SAASS,WACdnc,KAAK2b,OAAOQ,UAChB,ECtCJ,IAAKC,0BAAL,SAAKA,0BACD,6FACA,mFACH,CAHD,CAAKA,2BAAAA,yBAAwB,KAItB,MAAMC,0BAA0Bd,SAKnChc,YAAoBsK,IAAagK,eAC7ByI,MAAMzI,eADU,KAAAhK,IAAAA,IAJpB,KAAA0S,WAA0B,IAAI,oBAQ1B,IADc,IAAIlK,OAAO,WAAWmK,KAAK3S,KAErC,MAAM,IAAItL,MAAM,yBAA2BsL,IAAM,IAEzD,CAEAqS,UACIlc,KAAKyc,aAAc,EACnBzc,KAAK6T,cAAcR,MAAM,6BAA8BrT,KAAK6J,KAE5D,IACI7J,KAAK0c,OAAS,IAAIC,UAAU3c,KAAK6J,KAEjC7J,KAAK0c,OAAOE,OAAUC,KAClB7c,KAAK6T,cAAcR,MAAM,uBAAwBrT,KAAK6J,KACtD7J,KAAKwb,MAAMtD,KAAK2E,GAAG,EAGvB7c,KAAK0c,OAAOI,UAAaD,KACrB7c,KAAK0b,SAASxD,KAAK6E,KAAKC,MAAMH,GAAG/V,MAAM,EAG3C9G,KAAK0c,OAAOO,QAAWJ,KACd7c,KAAKyc,cACFI,GAAGre,OAAS4d,yBAAyBc,mBACrCld,KAAKyb,OAAOvD,KAAK2E,IACjB7c,KAAK0b,SAASS,YAEdnc,KAAK2b,OAAOzD,KAAK2E,MAK7B7c,KAAK0c,OAAOS,QAAWN,KACnB7c,KAAKyc,aAAc,EACnBzc,KAAK2b,OAAOzD,KAAK2E,GAAG,EAE1B,MAAO1J,OACLnT,KAAK6T,cAAcR,MAAM,oCAAqCF,OAC9DnT,KAAK2b,OAAOzD,KAAK/E,OAEzB,CAEA8I,QACQjc,KAAK0c,QAAqC,IAA3B1c,KAAK0c,OAAOU,YAC3Bpd,KAAK0c,OAAOT,OAEpB,EC1DG,MAAMoB,4BAA4B9B,SAKrChc,YACYsK,IACRgK,cACQgG,gBAERyC,MAAMzI,eAJE,KAAAhK,IAAAA,IAEA,KAAAgQ,eAAAA,eAPJ,KAAAyD,UAAW,EACX,KAAAC,eAAgB,CASxB,CAKArB,UACIlc,KAAKwd,oBACT,CAKAvB,QACIjc,KAAK6T,cAAcd,KAAK,2BACxB/S,KAAKsd,UAAW,EAChBtd,KAAKud,eAAgB,EACrBvd,KAAKyb,OAAOvD,MAChB,CAEQuF,gBAAgB3W,MAGpB,OAFA9G,KAAK0d,aACD5W,KAAKmD,OAAS,EAAInD,KAAKA,KAAKmD,OAAS,GAAG0T,aAAe,EAAI3d,KAAK0d,aAC7D1d,KAAK0d,YAChB,CAEQF,mBAAmBI,cACvB5d,KAAKsd,UAAW,EAChBtd,KAAK6T,cAAcd,KAAK,oCAExB/S,KAAK6Z,eACApC,YAAY,CACT5N,IAAK7J,KAAK6J,IACVuO,OAAQwF,aAAe,CAAEA,cAA+B,CAAC,IAE5DxV,MAAK,EAAAC,MAAA,GAAM,WAAW,EAAA4F,KAAA,GAAK,IAC3BC,WACIpH,OACG9G,KAAK6T,cAAcR,MAAM,aAAcvM,MACvC9G,KAAK6d,cAED/W,gBAAgBgX,MAChBhX,KAAKxC,SAAS0O,UACVhT,KAAK0b,SAASxD,KAAKlF,QAAQ,IAG/BhT,KAAK0b,SAASxD,KAAKpR,MAGlB9G,KAAKsd,UACNtd,KAAKwd,mBAAmBxd,KAAKyd,gBAAgB3W,UAGpDxI,IACG0B,KAAK6T,cAAcd,KAAK,iDACxB/S,KAAK2b,OAAOzD,KAAK5Z,EAAE,GAGnC,CAEQuf,cACC7d,KAAKud,gBACNvd,KAAKwb,MAAMtD,MAAK,GAChBlY,KAAKud,eAAgB,EAE7B,EC3EG,MAAMQ,mBACTxe,YAAoBsK,IAAqBmU,QAArB,KAAAnU,IAAAA,IAAqB,KAAAmU,OAAAA,MAAkB,CAQpDC,kBACH,MAAO,GAAGje,KAAKke,4BAA4Ble,KAAK6J,KACpD,CAQOsU,oBACH,MAAO,GAAGne,KAAKoe,uBAAuBpe,KAAK6J,KAC/C,CAEQqU,uBACJ,MAAO,IAAGle,KAAKge,OAAS,MAAQ,KACpC,CAEQI,kBACJ,MAAO,IAAGpe,KAAKge,OAAS,QAAU,OACtC,MCtBCK,oGAAL,SAAKA,kBACD,iDACA,6DACA,iEACA,2DACA,oDACH,CAND,CAAKA,mBAAAA,iBAAgB,SAiBRC,gBAAe,MAAfA,gBAeT/e,YACYgf,mBACAC,oBACA3K,cACAgG,gBAHA,KAAA0E,mBAAAA,mBACA,KAAAC,oBAAAA,oBACA,KAAA3K,cAAAA,cACA,KAAAgG,eAAAA,eAhBJ,KAAAhD,OAA2BwH,iBAAiBI,KAC5C,KAAA/C,SAAqC,IAAI,oBACzC,KAAAF,MAA0B,IAAI,mBAenC,CASHU,UACI,OAAOlc,KAAK0e,OAAOtW,MACf,EAAAuW,IAAA,IAAI,KACA3e,KAAK6W,OAASwH,iBAAiBO,WAC/B5e,KAAK6e,iBAAiB,IAGlC,CAOAnd,UAEQ1B,KAAK8e,eACL9e,KAAK6T,cAAcR,MAAM,kBACzBrT,KAAK6W,OAASwH,iBAAiBU,OAC/B/e,KAAK8e,aAAa7C,QAE1B,CAQAtF,WACI,OAAO3W,KAAK0b,SAAS1D,cACzB,CAQAe,OACI,OAAO/Y,KAAKwb,MAAMxD,cACtB,CAQAgH,cACI,OAAOhf,KAAK6W,SAAWwH,iBAAiBY,SAC5C,CAEQP,OACJ,OAAO1e,KAAKwe,oBAAoBtE,YAAY9R,MACxC,EAAAC,MAAA,GAAM,cACN,EAAAsW,IAAA,IAAKO,wBACDlf,KAAKkf,sBAAwBA,sBAC7Blf,KAAK8e,aACD9e,KAAKmf,+BAAiCD,sBAAsBjE,mBACtDjb,KAAKke,uBACLle,KAAKof,wBAAwB,IAGnD,CAEQP,kBACJ7e,KAAK8e,aAAajD,QAAQ3N,WAAU,KAChClO,KAAK6W,OAASwH,iBAAiBY,UAC/Bjf,KAAKwb,MAAMtD,MAAK,EAAK,IAGzBlY,KAAK8e,aAAa/C,SAAS7N,WAAU,KAC7BlO,KAAKqf,4BACLrf,KAAK6T,cAAcd,KACf,oEAGJ/S,KAAK8e,aAAapd,UAClB1B,KAAK8e,aAAe9e,KAAKof,yBACzBpf,KAAK6e,mBAEL1S,YAAW,KACPnM,KAAK6W,OAAS7W,KAAKsf,sBACnBtf,KAAK8e,aAAa5C,SAAS,GAC5Blc,KAAKkf,sBAAsBlE,2BAItChb,KAAK8e,aAAahD,SAAS5N,WAAWqR,SAClCvf,KAAK6W,OAASwH,iBAAiBU,MAAM,IAGzC/e,KAAK8e,aAAalD,WAAW1N,WACxBiM,KAAQna,KAAK0b,SAASxD,KAAKiC,OAC3B7b,GAAM0B,KAAK6T,cAAcR,MAAM,uCAAyC/U,EAAE0U,WAC3E,IAAMhT,KAAK6T,cAAcR,MAAM,eAGnCrT,KAAK8e,aAAa5C,SACtB,CAEQoD,sBACJ,OAAOtf,KAAK6W,SAAWwH,iBAAiBO,WAClCP,iBAAiBO,WACjBP,iBAAiBmB,YAC3B,CAEQH,2BACJ,OACIrf,KAAKyf,uBACLzf,KAAK6W,SAAWwH,iBAAiBY,WACjCjf,KAAK6W,SAAWwH,iBAAiBmB,YAEzC,CAEQtB,uBACJ,OAAO,IAAI7B,kBAAkBrc,KAAKue,mBAAmBN,kBAAmBje,KAAK6T,cACjF,CAEQuL,yBACJ,OAAO,IAAI/B,oBACPrd,KAAKue,mBAAmBJ,oBACxBne,KAAK6T,cACL7T,KAAK6Z,eAEb,CAEQsF,6BACJ,MAAO,cAAevN,QAAU,iBAAkBA,MACtD,CAEQ6N,sBACJ,OAAOzf,KAAK8e,wBAAwBzC,iBACxC,6CAzLK0B,0BAFcnE,2BAHdnH,qBAEAuE,iBAyBIsH,iBAAe,kBAD3B,OAAAzV,oDAiBmCkV,mBACCnE,oBACNnH,cACCuE,kBAnBnBsH,uHCnBAoB,oBAAmB,MAAnBA,oBAITngB,YAAoBogB,gBAA0C9L,eAA1C,KAAA8L,gBAAAA,gBAA0C,KAAA9L,cAAAA,cAHtD,KAAA+L,SAAW,EAG0E,CAO7Fle,UACI1B,KAAK2f,gBAAgBje,UACrB1B,KAAK6f,YAAYC,aACrB,CAOAC,QACI/f,KAAK6T,cAAcR,MAAM,4BAA6BrT,KAAK2f,gBAAgBX,eACtEhf,KAAK2f,gBAAgBX,gBACtBhf,KAAK6T,cAAcR,MAAM,0BAEzBrT,KAAK6f,YAAc7f,KAAK2f,gBACnBzD,UACA9T,MAAK,EAAA4X,UAAA,IAAU,IAAMhgB,KAAK2f,gBAAgBhJ,cAC1CzI,WACG,EAAGtC,MAAOoE,YACDhQ,KAAK4f,SAAShU,SACf5L,KAAK4f,SAAShU,OAAS,IAAI,qBAE/B5L,KAAK4f,SAAShU,OAAOsM,KAAKlI,QAAQlJ,KAAK,IAE1CxI,IACG0B,KAAK6T,cAAcR,MACf,uCAAyC/U,EAAE0U,QAC9C,IAEL,KACIhT,KAAK6T,cAAcR,MAAM,YAAY,IAIzD,CASA4M,YAAeC,iBAKX,OAJKlgB,KAAK4f,SAASM,mBACflgB,KAAK4f,SAASM,iBAAmB,IAAI,qBAGlClgB,KAAK4f,SAASM,iBAAiBlI,cAC1C,CAOAmI,kBAAqBC,kBACjB,MAAMC,QAA2C,IAAI,oBAWrD,OATAD,iBAAiB9b,SAASgc,YACtBtgB,KAAKigB,YAAYK,WAAWpS,WAAWpH,OACnCuZ,QAAQnI,KAAK,CACTpR,KACAgH,KAAMwS,WACR,GACJ,IAGCD,QAAQrI,cACnB,CAQAe,OACI,OAAO/Y,KAAK2f,gBAAgB5G,MAChC,iDAhGKuF,uBAHA7L,gBAQIiN,qBAAmB,kBAD/B,OAAA7W,oDAKwCyV,gBAAwC7L,iBAJpEiN,yBCkBAa,aAAY,MAAZA,aASThhB,YACYsa,eACA2G,qBADA,KAAA3G,eAAAA,eACA,KAAA2G,oBAAAA,oBAVJ,KAAAC,OAAwB,IAAI,oBAC5B,KAAAC,SAAyB,IAAI,oBAG7B,KAAAC,QAAU,GACV,KAAAzX,KAAO,GAOXlJ,KAAK4gB,mBAAsC,IAAI,oBAC/C5gB,KAAK6gB,KAAO,CACRC,eAAgB,oBAChBC,QAAS,8BACTC,QAAS,mBACTC,OAAQ,YACRC,SAAU,oBACVC,gBAAiB,oBACjBC,WAAY,eACZC,SAAU,oBACVC,QAAS,0BAIbd,oBAAoBP,YAAY,qBAAqB/R,WAAU,IAAMlO,KAAKuhB,cAC9E,CAQAC,iBACI,OAAOxhB,KAAK6Z,eACPjE,QAAqB,CAClB/L,IAAK7J,KAAK6gB,KAAKS,UAElBlZ,MACG,EAAArK,IAAA,IAAKoc,KAAmCA,MAEpD,CAEIsH,wBACA,OAAOzhB,KAAK4gB,mBAAmB5I,cACnC,CAEI0J,YACA,OAAO1hB,KAAKygB,OAAOzI,cACvB,CAEI2J,cACA,OAAO3hB,KAAK0gB,SAAS1I,cACzB,CAEI4J,WACA,OAAO5hB,KAAK6hB,KAChB,CAEIC,eACA,OAAM9hB,KAAK4hB,MAAU5hB,KAAK4hB,KAAKzM,MACpB,EAAAlM,GAAAA,KAAG,GAGPjJ,KAAK+hB,WAAW3Z,MAAK,EAAArK,IAAA,IAAK6jB,QAAWA,QAAUA,KAAKzM,OAC/D,CAQA4M,WACI,OAAO/hB,KAAK6Z,eACPpC,YAAY,CACT5N,IAAK7J,KAAK6gB,KAAKE,UAElB3Y,MACG,EAAAC,MAAA,GAAM,WACN,EAAAsW,IAAA,IAAKiD,OACGA,KAAKzM,MACLnV,KAAKgiB,QAAQJ,UAGrB,EAAA7jB,IAAA,IAAK6jB,MAAeA,OAEhC,CAUAd,eAAemB,SAAkB7N,OAC7B,MAAM8B,KAAO6G,KAAKmF,UAAU,CAAED,SAAoB7N,QAElD,OAAOpU,KAAK6Z,eACPpC,YAAY,CACTvB,KACAiB,OAAQ,OACRtN,IAAK7J,KAAK6gB,KAAKC,iBAElB1Y,MAAK,EAAAC,MAAA,GAAM,UACpB,CAUA8Z,iBAAiBtS,SAAkBuS,UAG/B,OAFApiB,KAAKqiB,YAAYxS,UAEV7P,KAAK6Z,eACPpC,YAAiC,CAC9BvB,KAAM,CAAEoM,YAAaF,SAAUvS,SAAU7P,KAAKkJ,KAAMyX,QAAS3gB,KAAK2gB,SAClExJ,OAAQ,OACRtN,IAAK7J,KAAK6gB,KAAKO,aAElBhZ,MAAK,EAAAC,MAAA,GAAM,kBACpB,CASA2Y,QAAQuB,UACJ,OAAOviB,KAAK6Z,eACPpC,YAAkC,CAC/BvB,KAAM,CACF+L,SAAUM,SAASN,SACnBO,OAAQD,SAASpN,KAAKqN,QAE1BrL,OAAQ,OACRtN,IAAK7J,KAAK6gB,KAAKG,UAElB5Y,MACG,EAAArK,IAAA,IAAKoc,MACD,IAAKA,IAAI7D,OAAO0K,QACZ,MAAM7G,IAAI3D,eAQd,OALAxW,KAAKgiB,QAAQ,CACTS,YAAaF,SAASpN,KACtBA,KAAMnV,KAAK6hB,MAAM1M,KACjBuN,WAAW,IAERvI,GAAG,KAEd,EAAA9R,MAAA,GAAM,SAAU,WAE5B,CAeAsa,WAAU,MACD,SACG,WACE,SACF,eAKR,OAFA3iB,KAAKqiB,YAAYxS,UAEV7P,KAAK6Z,eACPpC,YAAkB,CACfvB,KAAM,CACFsM,OAAQI,MACRX,SACAY,WACAhT,SAAU7P,KAAKkJ,KACfyX,QAAS3gB,KAAK2gB,QACdmC,cAEJ3L,OAAQ,OACRtN,IAAK7J,KAAK6gB,KAAKQ,WAElBjZ,MACG,EAAArK,IAAA,IAAK8X,WACD,MAAM+L,KAAO,CACTa,YAAa,KACbtN,KAAMU,SAASS,OACfoM,WAAW,GASf,OANA1iB,KAAKgiB,QAAQJ,MACb5hB,KAAK6Z,eACA/B,qBAAqB,iCACrB5J,WAAU,KACPlO,KAAKuhB,YAAY,IAElB1L,SAASS,MAAM,IAGtC,CAQA4K,WACI,OAAOlhB,KAAK6Z,eACPpC,YAAmC,CAChCN,OAAQ,MACRtN,IAAK,GAAG7J,KAAK6gB,KAAKK,aAErB9Y,MACG,EAAArK,IAAA,IAAKoc,MACDna,KAAKgiB,QAAQ,CACTS,YAAa,KACbtN,KAAMnV,KAAK6hB,MAAM1M,KACjBuN,WAAW,IAERvI,IAAI7D,OAAO4K,YAGlC,CASAC,gBAAgByB,OACZ,OAAO5iB,KAAK6Z,eACPpC,YAAoB,CACjBvB,KAAM,CAAEsM,OAAQI,OAChBzL,OAAQ,OACRtN,IAAK7J,KAAK6gB,KAAKM,kBAElB/Y,MAAK,EAAAC,MAAA,GAAM,UACpB,CAQA0a,UAAUC,MACFhjB,KAAK4hB,MACLoB,KAAKhjB,KAAK4hB,MAGd5hB,KAAK0hB,MAAMxT,WAAW0T,OACdA,KAAKzM,MACL6N,KAAKpB,QAGjB,CAQAI,QAAQJ,MACJ5hB,KAAK6hB,MAAQD,KACb5hB,KAAKygB,OAAOvI,KAAK0J,MAGZA,KAAKzM,KAGNnV,KAAKwgB,oBAAoBT,QAFzB/f,KAAK0gB,SAASxI,MAItB,CAEQmK,YAAYxS,UAChB,QAAiBoT,IAAbpT,UAAuC,KAAbA,SAAiB,CAC3C,MAAMqT,aAAerT,SAAS7F,MAAM,KACpChK,KAAKkJ,KAAOga,aAAa,GACzBljB,KAAK2gB,QAAUuC,aAAa,QAE5BljB,KAAKkJ,KAAO,GACZlJ,KAAK2gB,QAAU,EAEvB,CAEQY,aACJ3P,OAAOC,SAASU,KAAO,uBAAmB,IAAI4Q,MAAOC,WACzD,0CA/UKpM,sBAKA0I,sBAoBIa,cAAY,kBADxB,OAAA1X,oDAW+BmO,eACK0I,uBAXxBa,kBCnBA8C,eAAc,MAAdA,eAWT9jB,YACI+jB,aACQrM,OACA4C,eACR2G,qBAFQ,KAAAvJ,OAAAA,OACA,KAAA4C,eAAAA,eAbJ,KAAA0J,cAAiC,IAAI,oBAMrC,KAAAC,mBAAqB,IAAI,oBACzB,KAAAC,iBAAmB,IAAI,oBAS3BzjB,KAAK0jB,SAAW,mBAChB1jB,KAAK2jB,SAAW,IAAI3R,IAEpBsR,aAAaP,UAAU/iB,KAAK4jB,UAAUC,KAAK7jB,OAC3CwgB,oBACKP,YAAY,0BACZ/R,UAAUlO,KAAK4jB,UAAUC,KAAK7jB,MACvC,CAEI8jB,uBACA,OAAO9jB,KAAK+jB,iBAChB,CAEIC,kBACA,OAAOhkB,KAAKikB,KAChB,CAEIC,mBACA,OAAOlkB,KAAKujB,cAAcvL,cAC9B,CAEImM,kBACA,OAAOnkB,KAAKwjB,mBAAmBxL,cACnC,CAEIoM,mBACA,MAAMC,QAAUrkB,KAAK2jB,SAAStf,UAAU6T,OAAO7X,MAC/C,OAAOgkB,QAAUA,QAAQ,GAAK,IAClC,CAEOC,cAAc7K,UAAmB5P,KACpC7J,KAAK2jB,SAASjc,IAAI+R,UAAUtI,QAAQ,IAAK,KAAMtH,IACnD,CAEO0a,cAAc9K,WACjB,OAAOzZ,KAAK2jB,SAASngB,IAAIiW,UAC7B,CAEO+K,YAAY/K,WACfzZ,KAAKiX,OAAOuC,YAAYC,WACxBzZ,KAAK+jB,kBAAoBtK,SAC7B,CAEOgL,UAAU5a,KACb,IAAI3L,GAAK8B,KAAK0kB,aAAa7a,KAK3B,OAJI3L,GAAGoW,QAAQ,MAAQ,IACnBpW,GAAKA,GAAGyV,OAAO,EAAGzV,GAAGoW,QAAQ,OAG1BtU,KAAK2jB,SAASgB,IAAIzmB,GAC7B,CAEO0mB,kBAAkB/a,KACrB,IAAI3L,GAAK8B,KAAK0kB,aAAa7a,KACvB3L,GAAGoW,QAAQ,MAAQ,IACnBpW,GAAKA,GAAGyV,OAAO,EAAGzV,GAAGoW,QAAQ,OAEjCtU,KAAK+jB,kBAAoB7lB,GACzB8B,KAAKyjB,iBAAiBvL,KAAKha,GAC/B,CAEI2mB,sBACA,OAAO7kB,KAAKyjB,gBAChB,CAEOqB,SAASb,OAGZ,GAFAjkB,KAAKikB,MAAQA,MAETjkB,KAAKikB,MAAMha,OAAQ,CACnBjK,KAAK2jB,SAAW,IAAI3R,IAEpB,IAAK,IAAI+S,EAAI,EAAGA,EAAI/kB,KAAKikB,MAAMha,OAAQ8a,IAAK,CACxC,MAAMtK,KAAOza,KAAKikB,MAAMc,GAExB,IAAK,IAAIC,EAAI,EAAGA,EAAIvK,KAAKwK,UAAUhb,OAAQ+a,IAAK,CAC5C,MAAME,YAAczK,KAAKwK,UAAUD,GAC/BE,YAAYC,UAGZD,YAAYE,SAAW,MAAQF,YAAYhnB,IAF3C8B,KAAK2jB,SAASjc,IAAIwd,YAAYhnB,GAAIgnB,YAAYrb,MAO1D7J,KAAKujB,cAAcrL,KAAKlY,KAAKikB,OAErC,CAMOoB,qBAAqBxb,KACN7J,KAAK0kB,aAAa7a,OAClB7J,KAAK8jB,kBACnB9jB,KAAKwjB,mBAAmBtL,KAAKrO,IAErC,CAEQ+Z,YACJ5jB,KAAK6Z,eACApC,YAAY,CACT5N,IAAK7J,KAAK0jB,WAEbxV,WACI2H,WACG7V,KAAK8kB,SAASjP,SAASS,OAAO,IAEjCnD,OAAUnT,KAAKujB,cAAcpQ,MAAMA,QAEhD,CAEQuR,aAAa7a,KACjB,MAAMyb,SAAWzb,IAAIG,MAAM,KAC3B,OAAOsb,SAASA,SAASrb,OAAS,EACtC,4CA3IKsW,oBAEAvH,wBAJAhC,sBAMA0I,sBAGI2D,gBAAc,kBAD1B,OAAAxa,oDAaqB0X,aACEvH,iBACQhC,eACH0I,uBAfhB2D,0HCOAkC,YAAW,MAAXA,YAcThmB,YACI+jB,aACA9C,oBACQ3G,eACAhG,eADA,KAAAgG,eAAAA,eACA,KAAAhG,cAAAA,cAfJ,KAAA2R,OAAmB,CACvB,YACA,eACA,0BACA,kBACA,cACA,gBAEI,KAAAC,aAA8B,IAAI,oBAClC,KAAAC,eAAgC,IAAI,oBAQxC1lB,KAAK6gB,KAAO,CACR8E,eAAgB,sBAChBC,SAAU,UACVC,cAAe,kBAGnBrF,oBACKL,kBAAwB,CAAC,eAAgB,gBACzCjS,WAAWtC,OAAqC5L,KAAK8lB,cAAcla,SAExE4U,oBACKL,kBAAwBngB,KAAKwlB,QAC7BtX,WAAU,EAAGpH,QAAsC9G,KAAK+lB,kBAAkBjf,QAE/E0Z,oBACKL,kBAAwB,CAAC,gBACzBjS,WAAU,EAAGpH,QAAsC9G,KAAKgmB,eAAelf,QAE5Ewc,aAAaP,WAAWnB,OACfA,KAAKc,WACN1iB,KAAKimB,oBAGjB,CAOAH,eAAc,KAAM,OAChB9lB,KAAK6T,cAAcR,MAAM,uBAAwBvF,KAAMhH,MAEhCA,KAAKof,aACLlmB,KAAKmmB,aAAaD,aAE5B,iBAATpY,KACM9N,KAAKomB,sBACAhe,MAAK,EAAA6F,KAAA,GAAK,IACVC,WAAWmY,cACRrmB,KAAKsmB,WAAWD,YAAY,IAEpCrmB,KAAKimB,kBAGnB,CAOAF,kBAAkBQ,MACdvmB,KAAK0lB,eAAexN,KAAKqO,KAC7B,CAOIC,oBACA,OAAOxmB,KAAK0lB,eAAe1N,cAC/B,CAOIyO,kBACA,OAAOzmB,KAAKylB,aAAazN,cAC7B,CAOIqO,kBACA,OAAOrmB,KAAKmmB,YAChB,CAQAC,sBACI,OAAOpmB,KAAK6Z,eACPpC,YAAY,CACTN,OAAQ,MACRtN,IAAK,mBAERzB,MAAK,EAAAC,MAAA,GAAM,UACpB,CASAqe,YAAYxoB,IACR,OAAO8B,KAAK6Z,eACPpC,YAAY,CACT5N,IAAK,mEAAmE3L,OAE3EkK,MACG,EAAAC,MAAA,GAAM,gBACN,EAAAtK,IAAA,IAAK4oB,OAAkBA,MAAM,KAEzC,CAOAL,WAAWC,MACPvmB,KAAK6T,cAAcR,MAAM,yBAA0BkT,KAAKL,YACxDlmB,KAAK6Z,eACApC,YAAY,CACTN,OAAQ,MACRtN,IAAK,GAAG7J,KAAK6gB,KAAKgF,iBAAiBU,KAAKL,eAE3C9d,MAAK,EAAA6F,KAAA,GAAK,IACVC,WAAU,KACPlO,KAAKgmB,eAAeO,KAAK,GAErC,CAOAK,iBACI,OAAO,sBACH5mB,KAAKmmB,cAAe,EAAAld,GAAAA,IAAGjJ,KAAKmmB,cAAgBnmB,KAAK6mB,qBACjD7mB,KAAKymB,YAEb,CAEQI,qBACJ,OAAO7mB,KAAK6Z,eACPpC,YAAY,CACT5N,IAAK7J,KAAK6gB,KAAK8E,iBAElBvd,MAAK,EAAAC,MAAA,GAAM,UACpB,CAEQ2d,eAAeO,MACfvmB,KAAKmmB,cAAcD,aAAeK,KAAKL,aACvClmB,KAAKmmB,aAAeI,KACpBvmB,KAAKylB,aAAavN,KAAK,IAAKqO,OAEpC,CAEQN,kBACJjmB,KAAK4mB,iBACAxe,MAAK,EAAA6F,KAAA,GAAK,IACVC,WAAWmY,cACRrmB,KAAKgmB,eAAeK,YAAY,GAE5C,yCAvMK9F,oBAEAb,2BALA1I,sBAIAvE,gBAWI8S,aAAW,kBAHvB,OAAA1c,YAAW,CACRW,WAAY,+CAiBM+W,aACOb,oBACG1I,eACDvE,iBAlBlB8S,iBCVAuB,UAAS,MAATA,wBACF,KAAAC,SAAW,4BACX,KAAAC,aAAe,YAC1B,GAHaF,WAAS,kBADrB,OAAAje,eACYie,eCAAG,kBAAiB,MAAjBA,kBAMTC,WAAW3iB,IAAalE,OACpB8mB,aAAaC,QAAQ7iB,IAAKlE,MAE9B,CAOAgnB,SAAS9iB,KACL,OAAO4iB,aAAaG,QAAQ/iB,IAEhC,CAMAgjB,WAAWhjB,KACP4iB,aAAaK,WAAWjjB,IAC5B,CAKAkjB,QACIN,aAAaM,OACjB,GAlCSR,mBAAiB,kBAD7B,OAAApe,eACYoe,uBAwCAS,oBAAmB,MAAnBA,sBAAAA,qBAAmB,kBAH/B,OAAAC,UAAS,CACN3lB,UAAW,CAACilB,sBAEHS,yBC7BAE,oBAAmB,MAAnBA,oBAGTroB,YAAYkG,QACRzF,KAAK+mB,SAAWthB,OAAOshB,QAC3B,CAMAc,oBAAoB3R,MAChBlW,KAAK8nB,eAAe,QAAS5R,KAAM,QACvC,CAMA6R,sBAAsB7R,MAClBlW,KAAK8nB,eAAe,UAAW5R,KAAM,UACzC,CAMA8R,mBAAmB9R,MACflW,KAAK8nB,eAAe,OAAQ5R,KAAM,OACtC,CAQA4R,eAAeG,OAAgB/R,KAAczP,MACzC,IAAIyhB,eAMJ,OALAA,eAAiB,IAAIC,aAAa1hB,KAAM,CACpCyP,KACAnM,KAAM/J,KAAK+mB,SAAW,IAAMtgB,KAAO,SAGhCyhB,cACX,iDA9DKpB,YAiBIc,qBAAmB,kBAF/B,OAAA/e,eACA,OAAA2L,QAAO,gDAIgBsS,aAHXc,yBAmDAQ,sBAAqB,MAArBA,wBAAAA,uBAAqB,kBAHjC,OAAAT,UAAS,CACN3lB,UAAW,CAAC8kB,UAAWc,wBAEdQ,2BCpDAC,mBAAkB,MAAlBA,mBACT9oB,YAAoB+oB,OAAA,KAAAA,MAAAA,KAAoB,CAExC1S,QAAiBxU,SACRA,QAAQ+V,SACT/V,QAAQ+V,OAAS,OAGrB,MAAMoR,YAAc,CAChBnQ,OAAQ,IAAI,SAShB,OANIhX,QAAQgX,QACRzZ,OAAOF,KAAK2C,QAAQgX,QAAQ9T,SAASC,MACjCgkB,YAAYnQ,OAASmQ,YAAYnQ,OAAO1Q,IAAInD,IAAKnD,QAAQgX,OAAO7T,KAAK,IAItEvE,KAAKsoB,MACP1S,QACG,IAAI,QAAYxU,QAAQ+V,OAAQ/V,QAAQyI,IAAKzI,QAAQ8U,KAAM,CACvDkC,OAAQmQ,YAAYnQ,UAG3BhQ,MACG,EAAAR,OAAA,IACKgE,OACGA,MAAMnF,OAAS,oBAEvB,EAAA1I,IAAA,IAAKiY,OACD,IACI,OAAOA,KAAKE,KACd,MAAO/C,OACL,OAAO6C,SAI3B,CAEAyB,YAAqBrW,SACZA,QAAQ+V,SACT/V,QAAQ+V,OAAS,OAGrB,MAAMoR,YAAc,CAChB9gB,QAAS,IAAI,QACb2Q,OAAQ,IAAI,SAShB,OANIhX,QAAQgX,QACRzZ,OAAOF,KAAK2C,QAAQgX,QAAQ9T,SAASC,MACjCgkB,YAAYnQ,OAASmQ,YAAYnQ,OAAO1Q,IAAInD,IAAKnD,QAAQgX,OAAO7T,KAAK,IAItEvE,KAAKsoB,MACP1S,QACG,IAAI,QAAYxU,QAAQ+V,OAAQ/V,QAAQyI,IAAKzI,QAAQ8U,KAAM,CACvDkC,OAAQmQ,YAAYnQ,UAG3BhQ,MACG,EAAAR,OAAA,IACKgE,OACGA,MAAMnF,OAAS,oBAEvB,EAAA1I,IAAA,IAAKiY,MACM,IAAID,aAAgBC,QAG3C,CAEAiK,YAAYlI,eACR,OAAO,EAAA9O,GAAAA,IAAG,CACNkK,MAAO4E,eAEf,gDAxFA,UAYSsQ,oBAAkB,kBAD9B,OAAAxf,oDAE8B,WADlBwf,wBCTAG,qBAAoB,MAApBA,uBAAAA,sBAAoB,kBALhC,OAAA5jB,WAAU,CACP7C,SAAU,mBACV8C,u5BAGS2jB,0BCMAC,oBAAmB,MAAnBA,4BAA4B9jB,yBAIrCpF,YAAoBmpB,aAChBpM,QADgB,KAAAoM,YAAAA,WAEpB,CAEAznB,WACIjB,KAAK8G,KAAO9G,KAAKgF,KAAK+B,MAAMD,KAC5B9G,KAAKC,OAAOuB,GAAG,SAAUxB,KAAK2oB,sBAAsB9E,KAAK7jB,OACzDA,KAAK2oB,uBACT,CAEAlnB,cACIzB,KAAKC,OAAO2oB,IAAI,SAAU5oB,KAAK2oB,sBAAsB9E,KAAK7jB,MAC9D,CAEQ2oB,wBACJ3oB,KAAK0oB,YAAY1nB,cAAciF,MAAM4iB,UAAY7oB,KAAKgF,KAAK+B,MAAM8hB,UACjE7oB,KAAKuS,KAAOvS,KAAKgF,KAAK+B,MAAMwL,IAChC,iDAlCwB,KAAA5Q,aAaf8mB,qBAAmB,kBAL/B,OAAA7jB,WAAU,CACP7C,SAAU,kBACV8C,s+MAOiC,KAAAlD,cAJxB8mB,yBCCAK,gBAAe,MAAfA,wBAAwBnkB,2BAAxBmkB,iBAAe,kBAN3B,OAAAlkB,WAAU,CACP7C,SAAU,cACV8C,kEAEAmC,cAAe,KAAAC,kBAAA,qqMAEN6hB,2HCZN,MAAMC,4CAAwB,CACjC,IAAK,4BACL,IAAK,kBACL,IAAK,0BAkBH,SAAUC,YAAW,gCAKvB,MAAoB,iBAATC,KAOf,SAASC,gBAAgBrf,KAGrB,OAAOsf,MAFsB,qBAEM,CAC/BhS,OAAQ,OACR1P,QAAS,CACL,eAAgB,mBAChB2hB,OAAQxX,OAAOC,SAASwX,UAE5BnT,KAAM6G,KAAKmF,UAAU,CACjBoH,UAAWzf,QAEhB3K,KATI,4CASC,UAAO2W,UACX,GAAwB,MAApBA,SAASgB,OACT,aAAchB,SAAS0T,QAAQhT,UAAU,GAEzC,MAAMiT,mBAAmB3T,SAAS0T,OAAQ1T,SAASgB,OAE1D,IAfM,0DAgBV,CAzBcqS,CAAgBD,MAoCzB,SAAUQ,kBACZR,KAAMniB,KADuB,2BAK7B,IAAI4iB,KAxDa,eAyDjBA,MAAQC,QAAU,kBAAkBA,UAAY,GAChD,MAAMC,SAAW,IAAIC,SAMrB,OAJc/L,MAAMgM,QAAQhjB,MAAQA,KAAO,CAACA,OAEtCxC,SAAS2kB,MAAeW,SAASG,OAAO,QAASd,QAyB3D,SAASe,WACLngB,IACAogB,KACAC,kBAIA,OAAO,IAAIjrB,SAAQ,CAACkb,IAAKgQ,OACrB,MAAMC,IAAM,IAAIC,eAChBD,IAAIrR,KAAKkR,KAAK9S,QAAU,MAAOtN,KAC/B,IAAK,MAAMiE,QAAQmc,KAAKxiB,SAAW,CAAC,EAChC2iB,IAAIE,iBAAiBxc,KAAMmc,KAAKxiB,QAAQqG,OAG5Csc,IAAIG,OAAS,IAAMpQ,IAAIiQ,KACvBA,IAAIjN,QAAUgN,IACVC,IAAII,QAAUN,mBACdE,IAAII,OAAOC,WAAcnsB,IACrB,MAAMosB,gBAAmBpsB,EAAEqsB,OAASrsB,EAAEssB,MAAS,IAC/CV,iBAAiBQ,gBAAjB,GAIRN,IAAIS,KAAKZ,KAAK/T,KAAd,GAEP,CAhDU8T,CACHN,KACA,CACIvS,OAAQ,OACR1P,QAAS,CAAC,EACVyO,KAAM0T,UAEVM,kBAEChrB,MAAM0W,UACH,GAAuB,MAAnBA,QAAQiB,OAAgB,CACxB,MAAM/P,KAAOiW,KAAKC,MAAMpH,QAAQC,UAAUU,UAE1C,OAAOzP,KAAKmD,OAAS,EAAInD,KAAOA,KAAK,EACxC,CACG,MAAM8O,OACT,IAEJkV,OAAOlV,UACJ,MAAM4T,aAAazM,KAAKC,MAAMpH,QAAQC,UAAWD,QAAQiB,OAAzD,GAEX,CApEc4S,CAAiB,CAAER,KAAMiB,iBAAkBP,SAEzD,CA+FD,SAASH,aAAa3T,SAAkCgB,QACpD,IAAI7D,QAAU,GACd,IACIA,QAAU6C,SAAS7C,SAAW+V,4CAAsBlS,OAGvD,CAFC,MAAOvY,GACL0U,QAAU+V,4CAAsBlS,QAAU,IAC7C,CAED,MAAO,CACH7D,QACA6D,OAAiB,IAATA,OAEf,8FCpIYkU,gBAAe,MAAfA,gBACTxrB,YAAoBgI,MAAA,KAAAA,KAAAA,IAAmB,CAEvCyjB,eAAelkB,KAA8B6iB,SACzC,OAAO3pB,KAAKirB,gBAAgBnkB,KAAM6iB,SAASvhB,MACvC,EAAA4X,UAAA,IAAWnK,WACP,MAAMqV,MAAQpN,MAAMgM,QAAQjU,UAAYA,SAAW,CAACA,UAC9ClG,YAAc,GAUpB,OATAub,MAAM5mB,SAAS2kB,OACXtZ,YAAYwb,KAAK,CACbC,SAAU,WACVC,MAAOpC,KAAK/qB,GACZotB,WAAY,GACZC,YAAa,YACf,IAGCvrB,KAAKuH,KACPO,KACG,gDACAiV,KAAKmF,UAAU,CAAEvS,cACjB,CACIlI,QAAS,CACL2hB,OAAQxX,OAAOC,SAASwX,SACxB,eAAgB,oCAI3BjhB,MAAK,EAAAC,MAAA,GAAM,SAAU,WAA6C,KAE3E,EAAAgP,WAAA,IAAYlE,QAAU,EAAAyE,WAAA,GAAWzE,SAEzC,CAEQ8X,gBACJhC,KACAU,SAEA,OAAO,EAAA6B,KAAA,GACHxC,WAAW,CACPC,KACAiB,iBAAkB,OAGlBP,UAGZ,6CAlDK,UAGIoB,iBAAe,kBAD3B,OAAAliB,oDAE6B,WADjBkiB,qBCAAU,oBAAmB,MAAnBA,kCACA,KAAAhgB,MAA0B,GAEzB,KAAAO,QAAwC,IAAI,KAAAmB,aAC5C,KAAAue,eAAqC,IAAI,KAAAve,YAKvD,CAHIwe,mBAAmB/f,OACfA,MAAMgD,gBACV,oDAPC,KAAA/M,wBACA,KAAAA,uBACA,KAAA2O,+BACA,KAAAA,UAJQib,qBAAmB,kBAL/B,OAAA7mB,WAAU,CACP7C,SAAU,kBACV8C,s5RAGS4mB,yBCEAG,0BAAyB,MAAzBA,wCAEA,KAAAC,QAAS,CACtB,yDAFK,KAAAhqB,sBACA,KAAAA,SAFQ+pB,2BAAyB,kBALrC,OAAAhnB,WAAU,CACP7C,SAAU,yBACV8C,23OAGS+mB,qLCDN,MAAME,eAAiB,CAC1BC,eACAC,oBAEA,IACIvhB,OADAwhB,MAAQF,eAAeE,MAE3B,GAEI,GADAxhB,OAASshB,eAAe/mB,KAAKinB,OACzBxhB,OAAQ,CACR,GAAIqT,MAAMgM,QAAQkC,mBAAqBA,iBAAiBpe,SAASnD,OAAOhE,KAAKqH,MACzE,MAGJme,eAECA,MAAQ,GAAKxhB,QAEtB,OAAOA,MAAM,ECxBJyhB,mBAAqB,EAAGjsB,OAAQksB,KAAMC,QAC/C,MAAML,eAAiBI,KAAKE,MAAMC,KAAK1tB,QAAQwtB,KACzCG,MDiCmB,EAACR,eAA6BK,OACvD,MAAMI,GAAKJ,IAAML,gBAAgBU,WAMjC,MAAO,CAAED,GAAIhB,KAJTO,eAAe1f,QAAU0f,gBAAgBthB,OAAOiiB,WAC1CF,GAAKT,gBAAgBthB,OAAOD,MAAMuhB,eAAe1f,SAASsgB,SAC1DH,GAES,ECxCLI,CAAcb,eAAgBK,MACtC,KAAM,IAASG,MAEjBf,OAASgB,IAIbvsB,OAAOK,QAAQusB,iBAAiBN,OAAOO,aAAa,CAAEC,aAAa,IAAQvsB,KAAK,8OC6B7E,MAAMwsB,mBAuBTztB,aAAY,OACF,QACC,KACH,aACW,CAAC,EAAC,UACR,YAbL,KAAA0tB,iBAAmB,CACvB,0BAA0B,EAC1B,qBAAqB,EACrB,yBAAyB,GAGrB,KAAAC,SAAW,IAAI,oBA6CvB,KAAAC,aAAe,KACX,MAAM,OAAYntB,KAAKC,QACjB,IAASosB,MAAMe,WACf,aAAkBC,qBAAqBC,SAASjB,OAElDU,aACA/sB,KAAKC,OAAOstB,SAASC,gBACrBvd,uBAAsB,IAAMjQ,KAAKC,OAAOstB,SAASV,iBAAiBL,OAElExsB,KAAKC,OAAOstB,SAASC,iBA5CzBxtB,KAAKC,OAASA,OACdD,KAAKqB,QAAUA,QACfrB,KAAKmsB,KAAOA,KAEZnsB,KAAKyC,aAAeA,aAGpBzC,KAAKqB,QAAQosB,SACbztB,KAAKqB,QAAQ4E,MAAMynB,WAAa,UAChC1tB,KAAKwC,UAAYA,UACjBxC,KAAKoD,UAAYA,UAEjBpD,KAAKC,OAAOuB,GAAG,QAASxB,KAAKmtB,cAC7BntB,KAAK2tB,qBAGL7nB,SAASoQ,KAAK0X,iBAAiB,SAAU5tB,KAAK6tB,cAAchK,KAAK7jB,OAAO,EAC5E,CAEAwG,OAAO2lB,KAAkB2B,WACrB,MAAM5V,KAAOlY,KAAKwC,UAAU8qB,SAASnB,KAAKE,OACpC0B,KAAO/tB,KAAKwC,UAAU8qB,SAASQ,WAGjC5V,KAAKnL,SAAWghB,KAAKhhB,QAMzB/M,KAAKguB,gBACL9V,KAAKnL,OAAS/M,KAAKiuB,OAASjuB,KAAKkuB,OACjCluB,KAAKmuB,yBAPDnuB,KAAKmuB,uBAQb,CAeAH,gBACI,MAAQ3sB,QAAS+sB,eAAkBpuB,KAAKC,OAAOmB,QACzCitB,mBAAqBD,cAAc1jB,eAErC1K,KAAKsuB,OAAUD,mBAInBruB,KAAKsuB,OAAQ,gBAAMF,cAAc1jB,cAAe,IACzC1K,KAAKyC,aACR8rB,SAAU,IACVC,uBAAwB,IAAMxuB,KAAKyuB,mBACnCC,QAAS1uB,KAAKqB,QACdstB,aAAa,EACbC,SAAU,OACVC,QAAS,SACTC,UAAW,eACXC,YAAa,SACbC,cAAe,CACXC,UAAW,CACP,CACInhB,KAAM,OACN1M,QAAS,CAAE8tB,mBAAoB,CAAC,mBAKpD,CAEAjB,OACIjuB,KAAKsuB,OAAOL,OACZjuB,KAAKoD,UAAUc,SAASirB,iBAAkB,EAE1CnvB,KAAKovB,iBACLpvB,KAAKoD,UAAUc,SAASmrB,YAC5B,CAEAnB,OACIluB,KAAKsuB,OAAOJ,OAEZluB,KAAKC,OAAOksB,KAAK/hB,OACrB,CAEAqkB,mBAEI,MAAM,MAAWzuB,KAAKC,QAChB,OAAYksB,MACZ,IAAK,WAAgBE,OACrB,QAAae,UACb5B,KAAO8D,KAAKC,OAAOC,OAAOzxB,KAAKwuB,OAAUA,MAAMkD,MAAMrD,OACrDI,GAAK8C,KAAKI,OAAOF,OAAOzxB,KAAKwuB,OAAUA,MAAMoD,IAAIvD,OACjDwD,gBAAiB,sBAAazD,KAAMX,KAAMgB,KAGxCnrB,QAAS+sB,eAAkBpuB,KAAKC,OAAOmB,QACzCyuB,iBAAmBzB,cAAc1jB,cAAcM,wBAC/C8kB,QACFhqB,SAASQ,cAAc,iBAAiB0E,yBAA2B4kB,eAGjEG,WAAaF,iBAAiB1kB,OAASykB,eAAezkB,OAGtDnG,KAAOsnB,KAAK0D,OAAOxE,MACnByE,YAAkC,aAApBjrB,MAAMyB,KAAKqH,KAG/B,OAAOiiB,YAAcE,YAAcH,QAAUF,cACjD,CAEAM,eAAc,KAAM,OAAU,IACtBxgB,KAAKzF,OAAS,IACdjK,KAAKmwB,iBACCnwB,KAAKC,OAAOstB,SAAS6C,aAAa,CAAE7d,KAAM7C,OAC1C1P,KAAKC,OAAOstB,SAAS8C,QAAQ,CAAE9d,KAAM7C,KAAMX,OAAQuhB,MAAQ,SAAW,SAEpF,CAEAC,aACIvwB,KAAKmwB,iBACCnwB,KAAKC,OAAOstB,SAASiD,iBACrBxwB,KAAKC,OAAOstB,SAASkD,YAC3BzwB,KAAKkuB,MACT,CAEAkB,iBACI,MAAMsB,OAAS1wB,KAAK2wB,eACpB3wB,KAAKoD,UAAUc,SAAS0sB,cAAgBF,OACxC1wB,KAAKoD,UAAUc,SAAS2sB,aAAaH,OACzC,CAEA/C,qBACI3tB,KAAKoD,UAAUc,SAASgqB,KAAK9lB,MAAK,EAAA0oB,UAAA,GAAU9wB,KAAKktB,WAAWhf,WAAU,IAAMlO,KAAKkuB,SACjFluB,KAAKoD,UAAUc,SAASqsB,WACnBnoB,MAAK,EAAA0oB,UAAA,GAAU9wB,KAAKktB,WACpBhf,WAAU,IAAMlO,KAAKuwB,eAG1BvwB,KAAKoD,UAAUc,SAAS6sB,iBACnB3oB,MAAK,EAAA0oB,UAAA,GAAU9wB,KAAKktB,WACpBhf,WAAU,IAAMlO,KAAKsuB,MAAM0C,eAAexqB,WAC/CxG,KAAKoD,UAAUc,SAAS+sB,aACnB7oB,MAAK,EAAA0oB,UAAA,GAAU9wB,KAAKktB,WACpBhf,WAAWtC,OAAU5L,KAAKkwB,cAActkB,QACjD,CAEAuiB,wBACInuB,KAAKoD,UAAUqB,kBAAkBD,eACrC,CAEAmsB,eACI,MAAM,KAAS,GAAE,QAAa3wB,KAAKC,OAAOixB,SAAS,QAC7ClxB,KAAKC,OAAOkxB,cAAc,QAC1BnxB,KAAKC,OAAOkxB,cAAc,YAIhC,MAAO,CAAEzhB,KAHI6C,MAAQvS,KAAKoxB,gBAGXd,OAFDvhB,QAAoB,WAAXA,OAG3B,CAEAqiB,gBACI,MAAM,OAAYpxB,KAAKC,QACjB,KAAM,IAASosB,MAAMe,UACrBvc,KAAOwb,MAAMC,IAAI+E,YAAY7F,KAAMgB,GAAI,KAE7C,OAAO8E,WAAWzgB,MAAQA,KAAO,EACrC,CAEAsf,iBACI,MAAM,MAAWnwB,KAAKC,OAAOosB,MAAMC,IAAI0D,OAAOhwB,KAAKC,OAAOosB,MAAMe,UAAU5B,OAAS,CAAC,EAEpF,MAAsB,aAAf/kB,MAAMqH,IACjB,CAEApM,UACI1B,KAAKsuB,OAAO5sB,UACZ1B,KAAKC,OAAO2oB,IAAI,QAAS5oB,KAAKmtB,cAC9BntB,KAAKktB,SAAShV,MAAK,GACnBlY,KAAKoD,UAAU1B,SACnB,CAEQmsB,cAAcvvB,GAClB,MAAM+C,QAAU/C,EAAEyQ,OACZrE,cAAgBrJ,SAASqJ,eAAeA,cAG1C1K,KAAKitB,iBAAiB5rB,QAAQnD,KAAO8B,KAAKitB,iBAAiBviB,cAAcxM,KAI7E8B,KAAKkuB,MACT,EAGG,MAAMqD,qBAAwBnwB,UACjC,IAAIowB,SAEJ,OAAO,IAAI,QAAO,CACdjtB,IAAKnD,QAAQoB,UACb2pB,KAAOA,MAAS,IAAIa,mBAAmB,CAAEb,QAAS/qB,UAClDirB,MAAO,CACH3N,KAAI,KACO,CACH3R,QAAQ,EACRggB,aAAa,IAIrB0E,MACI3xB,YACAO,MACAqxB,UAEA,MAAM,OAAQ,aAAkB5xB,YAAY6xB,QAAQtE,uBAAyB,CAAC,EACxEhB,MAAQgB,qBAAqBC,SAASoE,UAE5C,MAAsB,kBAAX3kB,OACA,CACHA,OACAggB,aAKDV,OAAShsB,KACpB,GAEJiD,MAAO,CACHsuB,gBAAiB,CACbC,UAAU1F,KAAMvgB,OACZ,MAAM3L,OAASmB,QAAQnB,OACjBmsB,IFhQO,EAACD,KAAkBvgB,SAChD,MAAQkmB,QAASC,KAAMC,QAASrnB,KAAQiB,OAClC,KAAUugB,KAAK8F,YAAY,CAAEF,KAAMpnB,MAEzC,OAAOyhB,GAAG,EE4PkB8F,CAAkB/F,KAAMvgB,QAC9B,OAAQ,aAAkByhB,qBAAqBC,SAASrtB,OAAOosB,OAIjEtf,QAAUggB,aACV9sB,OAAOK,QAAQ6xB,iBAAiBtF,iBAAiBT,KAAK5rB,KAE9D,GAEJ4xB,cAAcjG,KAAkBC,IAAapnB,MACzC,MAAM/E,OAASmB,QAAQnB,OAEvB,GAAKA,OAAOixB,SAAS,SAAY9E,IAAjC,CAQA,IAAI,yBAAQoF,SAAUxsB,MAStB,OAHAknB,mBAAmB,CAAEjsB,OAAQksB,KAAMC,MACnCoF,SAAWxsB,MAEJ,EARH/E,OAAOK,QAAQusB,iBAAiBT,KAAKoB,gBAAgBhtB,WARrDgxB,SAAWxsB,IAiBnB,EAEAqtB,oBAAoBlG,KAAkBC,KAClC,MAAMnsB,OAASmB,QAAQnB,OAGvB,GAAKA,OAAOixB,SAAS,QAMrB,OAFAhF,mBAAmB,CAAEjsB,OAAQksB,KAAMC,OAE5B,CACX,IAEN,EC9UOiB,qBAAuB,IAAI,QAAU,WAErCiF,wBAA2BC,kBAC7B,0BAAwC,CAC3CzkB,KAAM,iBAEN0kB,WAAU,KACC,CACHnxB,QAAS,KACToB,aAAc,CAAC,EACfD,UAAW6qB,uBAInBoF,YAAW,KACA,CACH3F,aACI,EAAGC,eACH,EAAGzsB,SACQA,QACFoyB,eACA1mB,SAAQ,EAAG2mB,OACRA,GAAGC,QAAQvF,qBAAsB,CAAEtgB,QAAQ,EAAMggB,eAE1C,KAEVvsB,MAEbgtB,cACI,IACA,EAAGltB,SACQA,QACF6xB,iBACAnmB,SAAQ,EAAG2mB,OACRA,GAAGC,QAAQvF,qBAAsB,CAC7BtgB,QAAQ,EACRggB,aAAa,KAGV,KAEVvsB,QAKrBqyB,wBACI,MAAMzvB,UAAYmvB,iBAAiBO,gBAAgBC,6BAGnD,OAFA3vB,UAAUqB,kBAAkBD,gBAErB,CACH+sB,qBAAqB,CACjB/uB,UAAWxC,KAAKoB,QAAQoB,UACxBvC,OAAQD,KAAKC,OACboB,QAAS+B,UAAUyO,SAAS7Q,cAC5ByB,aAAczC,KAAKoB,QAAQqB,aAC3BW,YAGZ,IC7EF4vB,iBAAmB,CACrBC,YAAY,GASHC,qBAAuB,EAAGjzB,OAAQosB,MAAOb,KAAMgB,OACxD,MAAM,IAAK,WAAgBH,OACrB,MAAWpsB,QACX,OAAYmtB,WAEZ,OAAQ,aAAkBC,qBAAqBC,SAASjB,OAGxDrnB,KAAO/E,OAAOosB,MAAMC,IAAI0D,OAAO/vB,OAAOosB,MAAMe,UAAU5B,MAKtD2H,kBAAoB7G,IAAI+E,YAAY7F,KAAMgB,IAAIviB,SAAU,sBAAgBoiB,MAAMe,WAGpF,SACKrgB,UACCof,KAAKiH,YAAcC,OAASF,kBAAoBH,iBAAiBhuB,MAAMyB,KAAKqH,WAK9Ef,SAAUggB,YAIH,EASFuE,WAAcgC,YACP,IAAIjhB,OAChB,wKAMA,KAGamK,KAAK8W,UAabC,WAActzB,QAChBA,OAAOixB,SAAS,eAAiBjxB,OAAOixB,SAAS,eAI/CsC,gBAAyC,CAClD,CACIzpB,KAAM,cACN0pB,WAAY,OACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,oBACN0pB,WAAY,YACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,gBACN0pB,WAAY,SACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,kBACN0pB,WAAY,SACZ5H,QAAQ,EACR6H,SAAS,GAEb,CACI3pB,KAAM,oBACN0pB,WAAY,OACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,sBACN0pB,WAAY,SACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,qBACN0pB,WAAY,QACZ5H,QAAQ,EACR6H,SAAS,GAEb,CACI3pB,KAAM,uBACN0pB,WAAY,aACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,uBACN0pB,WAAY,cACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,yBACN0pB,WAAY,UACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,yBACN0pB,WAAY,SACZ5H,QAAQ,EACR6H,SAAS,GAEb,CACI3pB,KAAM,OACN0pB,WAAY,OACZ5H,QAAQ,EACR6H,SAAS,GAEb,CACI3pB,KAAM,eACN0pB,WAAY,WACZ5H,QAAQ,EACR6H,SAAS,GAEb,CACI3pB,KAAM,SACN0pB,WAAY,aACZ5H,QAAQ,IAIH8H,qBAA8C,CACvD,CACI5pB,KAAM,oBACN0pB,WAAY,OACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,sBACN0pB,WAAY,SACZ5H,QAAQ,GAEZ,CACI9hB,KAAM,qBACN0pB,WAAY,QACZ5H,QAAQ,EACR6H,SAAS,GAEb,CACI3pB,KAAM,OACN0pB,WAAY,OACZ5H,QAAQ,EACR6H,SAAS,GAGb,CACI3pB,KAAM,SACN0pB,WAAY,aACZ5H,QAAQ,EACR6H,SAAS,IAKJE,gBAAkB,CAC3B,CACI9lB,KAAM,SACN1M,QAAS,CACLsH,OAAQ,CAAC,EAAG,KAGpB,CACIoF,KAAM,OACN1M,QAAS,CACL8tB,mBAAoB,CAAC,eAAgB,eAG7C,CACIphB,KAAM,kBACN1M,QAAS,CACLyyB,SAAS,EACTC,QAAQ,SChLPf,4BAA2B,MAA3BA,4BAgCTxzB,YAAoBw0B,IAAA,KAAAA,GAAAA,GA5BV,KAAA7F,KAA8B,IAAI,KAAA/gB,cAAa,GAC/C,KAAAojB,WAAoC,IAAI,KAAApjB,cAAa,GACrD,KAAA4jB,iBAA0C,IAAI,KAAA5jB,cAAa,GAC3D,KAAA8jB,aAAwC,IAAI,KAAA9jB,aAE7C,KAAAgiB,iBAAkB,EAClB,KAAAyB,cAA2B,CAChClhB,KAAM,GACN4gB,OAAO,GAGH,KAAA0D,SAAW,EACnB,KAAA/mB,SAAU,CAkBV,CAdIgnB,qBACA,MAAO,0BAA0Bj0B,KAAKk0B,kBAC1C,CAEIC,kBACA,OAAOn0B,KAAK4wB,cAAclhB,IAC9B,CAEIwkB,cACA,OAAOl0B,KAAKo0B,KAAK5wB,IAAI,QAAQnD,KACjC,CAMAY,WACIjB,KAAKo0B,KAAOp0B,KAAK+zB,GAAGM,MAAM,IAAKr0B,KAAK4wB,gBAEpC5wB,KAAKo0B,KACA5wB,IAAI,QACJ8wB,aAAalsB,MAAK,EAAAmsB,aAAA,GAAa,MAC/BrmB,WAAWwB,OAEJA,KAAKzF,OAASjK,KAAKg0B,UAAY1C,WAAW5hB,OAI9C1P,KAAKw0B,sBAAsB/kB,kBAAkB,CAAEC,MAAO,IAE9D1P,KAAKo0B,KACA5wB,IAAI,SACJ8wB,aAAapmB,WAAWoiB,OACrBtwB,KAAKixB,aAAavjB,KAAK,CAAEgC,KAAM1P,KAAKm0B,YAAa7D,SAE7D,CAOAmE,aACIz0B,KAAKixB,aAAavjB,KAAK1N,KAAKo0B,KAAK/zB,OACjCL,KAAKkuB,KAAKxgB,MAAK,EACnB,CAOAgnB,aACI,MAAMhyB,WAAa1C,KAAKk0B,QAAQjqB,QAAUjK,KAAKg0B,WAAa1C,WAAWtxB,KAAKk0B,SAC5El0B,KAAKmvB,gBAAkBzsB,WACvB1C,KAAKiN,QAAUvK,WACXA,YAEAuN,uBAAsB,IAAMjQ,KAAK+wB,iBAAiBrjB,MAAK,IAE/D,CAQAmjB,cAAa,KAAM,QACf7wB,KAAKo0B,KAAKO,SAAS,CAAEjlB,KAAM4gB,OAAS,CAAEsE,WAAW,GACrD,CAOAvF,aACIrvB,KAAK60B,MAAM7zB,cAAcoJ,OAC7B,CASA0qB,eAAex2B,GACX,MAAMmN,MAAQzL,KAAKw0B,sBAAsB/oB,MAEzC,GAAc,WAAVnN,EAAEiG,IAGF,OAFAvE,KAAKkuB,KAAKxgB,MAAK,IAER,EAGX,IAAK1N,KAAKmvB,kBAAoB1jB,OAAOxB,OACjC,OAAO,EAGX,OAAQ3L,EAAEiG,KACN,IAAK,QAID,OAHAvE,KAAKw0B,sBAAsBzoB,eAGpB,EAEX,IAAK,UAIL,IAAK,YACD/L,KAAKw0B,sBAAsB7oB,gBAAgBrN,GAGvD,CAOAy2B,YACI/0B,KAAKmvB,iBAAkB,EACvBnvB,KAAK6wB,aAAa,IAAK7wB,KAAK4wB,eAChC,CAQA/iB,aAAcmC,SAAS,OACnBhQ,KAAK6wB,aAAa,IAAK7wB,KAAKo0B,KAAK/zB,MAAOqP,KAAM7F,MAC9C7J,KAAKy0B,YACT,yDAnLK,eAAAO,uEAuBJ,KAAA1kB,UAAS,MAAC,uCACV,KAAAA,UAAS,MAAC,cAAe,CAAEC,QAAQ,kBAEnC,KAAAC,2BACA,KAAAA,iCACA,KAAAA,6BACA,KAAAA,gCAEA,KAAA3O,6BACA,KAAAA,SAVQkxB,6BAA2B,kBALvC,OAAAnuB,WAAU,CACP7C,SAAU,4BACV8C,k0ZAmCwB,eAAAmwB,eAhCfjC,iCClBAkC,oBAAmB,MAAnBA,oBACTC,WAAU,KAAM,QAAS,QAAS,iBAC9B,MAAO,CAAEC,KAAMC,QAASC,QAASC,eACrC,GAHSL,qBAAmB,kBAH/B,OAAAM,MAAK,CACFznB,KAAM,qBAEGmnB,yBCNAO,+BAA8B,MAA9BA,6CACT,KAAA/pB,MAAQqS,MAAM,GAAG2X,KAAK,EAC1B,GAFaD,gCAA8B,kBAL1C,OAAA5wB,WAAU,CACP7C,SAAU,8BACV8C,qoWAGS2wB,oCCAAE,qBAAoB,MAApBA,mCACC,KAAAjI,OAAgC,IAAI,KAAAtgB,cAAa,GACjD,KAAA+gB,KAA8B,IAAI,KAAA/gB,cAAa,GAEhD,KAAAuC,KAAO,EAQpB,CANIimB,OACIrgB,UAAUsgB,UACLC,UAAU71B,KAAK0P,MACfxQ,MAAK,IAAMc,KAAKkuB,KAAKxgB,MAAK,KAC1Bod,OAAM,IAAMgL,MAAM,wBAC3B,sDAVC,KAAAtlB,qBACA,KAAAA,qBAEA,KAAA3O,SAJQ6zB,sBAAoB,kBALhC,OAAA9wB,WAAU,CACP7C,SAAU,mBACV8C,6sNAGS6wB,0BC0EAK,gBAAe,MAAfA,kBAAAA,iBAAe,kBA/C3B,OAAApO,UAAS,CACNqO,QAAS,CACL,UACA,eAAAC,YACA,eAAAC,oBACA,eACA,gBACA,oBACA,kBACA,qBAEJC,aAAc,CACV72B,gBACAuD,oBACAC,mBACAI,yBACAuJ,qBACAnB,wBACA7B,6BACA5C,yBACA6J,sBACA8X,qBACAC,oBACAK,gBACA2C,oBACAG,0BACAmH,4BACAkC,oBACAO,+BACAE,sBAEJ1zB,UAAW,CAACsF,mBAAoByjB,gBAAiBtY,cAAe9B,aAChE7R,QAAS,CACL2N,qBACAnN,gBACAuD,oBACAC,mBACAI,yBACAwN,sBACA+a,oBACAsH,4BACA,eAAAmD,oBACA,oBACA,kBACA,wBAGKH,kIC7BN,MAAMK,oBAUT72B,aAAY,OACF,QACC,KACH,aACQ,OACN,QACC,MARX,KAAA82B,aAAe,CAAC,YAAa,cAgC7B,KAAAC,iBAAoBh4B,IAChBA,EAAEsQ,iBACF5O,KAAKC,OAAOK,QAAQi2B,cAAc,KAAK/1B,KAAK,EAvB5CR,KAAKC,OAASA,OACdD,KAAKqB,QAAUA,QACfrB,KAAKmsB,KAAOA,KACZnsB,KAAKqB,QAAQusB,iBAAiB,YAAa5tB,KAAKs2B,iBAAkB,CAAEE,SAAS,IAC7Ex2B,KAAKC,OAAOuB,GAAG,SAAS,KACpBxB,KAAKsuB,MAAMmI,UACXz2B,KAAKwG,OAAOxG,KAAKC,OAAOksB,KAAK,IAEjCnsB,KAAKqB,QAAQ4E,MAAMynB,WAAa,UAChC1tB,KAAK02B,OAASA,OACd12B,KAAKgM,QAAUA,QACfhM,KAAKuE,IAAMA,IACXvE,KAAKguB,cAAcvrB,aACvB,CAmBAurB,cAAc5sB,QAA0B,CAAC,GACrCpB,KAAKsuB,OAAQ,gBAAMtuB,KAAKmsB,KAAK/nB,IAAK,CAC9BmqB,SAAU,EACVC,uBAAwB,KACxBE,QAAS1uB,KAAKqB,QACdstB,aAAa,EACbE,QAAS,SACTC,UAAW,OACXC,YAAa,YACV3tB,SAEX,CAUAoF,OAAO2lB,KAAkB2B,WACrB,MAAM,WAAgB3B,KAAKE,OACrB,QAAS,MAAO,KAAM,IAASe,UAC/BuJ,YAAgC,IAAlBC,QAAQ3K,MACtB4K,aACDzJ,UAAUwJ,QAAQnsB,OAAO5E,SAAWunB,UAAUwJ,QAAQnsB,OAAOqsB,YAC5D5F,SAAWyF,aAAeE,YAC1BE,SAAWH,QAAQnsB,OAAOhE,KAAKqH,KAE/BoK,KAAOlY,KAAKuE,KAAK+oB,SAASnB,KAAKE,OAC/B0B,KAAOD,UAAY9tB,KAAKuE,KAAK+oB,SAASQ,WAAa,KAEzD,GAAKC,MAAMhV,MAAUsa,OAAUnC,SAO/B,GAAKnD,MAAMhV,OAAQ/Y,KAAKq2B,aAAazoB,SAASmpB,UAW9C,GALA/2B,KAAKsuB,MAAM0I,SAAS,CAChBxI,uBAAwB,KAAM,sBAAarC,KAAMX,KAAMgB,MAE3DxsB,KAAKiuB,OAED/V,KAAKa,KAAM,CACX,MAAM,KAAM,IAAS/Y,KAAKC,OAAOosB,MAAMe,UACjC6J,MAAO,sBAAaj3B,KAAKmsB,KAAMX,KAAMgB,IAE3CxsB,KAAK02B,SAASQ,QAAQ,CAClBC,WAAY,IAAMF,KAClB1K,MAAO,CAAEf,KAAMgB,IACfvsB,OAAQD,KAAKC,OACb+L,QAAShM,KAAKgM,eAEX+hB,MAAQA,KAAKhV,MACpB/Y,KAAK02B,SAASU,OAAO,WArBrBp3B,KAAKkuB,YAPLluB,KAAKkuB,MA8Bb,CAEAD,OACIjuB,KAAKsuB,MAAML,MACf,CAEAC,OACIluB,KAAKsuB,MAAMJ,MACf,CAEAxsB,UACI1B,KAAKsuB,MAAM5sB,UACX1B,KAAKqB,QAAQg2B,oBAAoB,YAAar3B,KAAKs2B,iBACvD,EAGG,MAAMgB,yBAA2B,IAAI,QArIE,gBAuIjCC,sBAAyBn2B,SAC3B,IAAI,QAAO,CACdmD,IAAK+yB,yBACLnL,KAAOA,MACH,IAAIiK,oBAAoB,CAAE7xB,IAAK+yB,yBAA0BnL,QAAS/qB,UACtEirB,MAAO,CAMH3N,KAAI,KACO,CACH3F,MAAM,IASd0Y,MAAM3xB,aACF,MAAM03B,gBAAkB13B,YAAY6xB,QA9JN,gBAgK9B,OAAI6F,iBAAiBze,KACV,CACHA,KAAMye,iBAAiBze,MAIxB,CACHA,MAAM,EAEd,GAEJzV,MAAO,CAQHm0B,cAActL,KAAkBvgB,OAC5B,MAAM,KAAM,OAAY5L,KAAKstB,SAASnB,KAAKE,OAC3C,QAAKtT,MAIE3X,QAAQs1B,SAASgB,UAAU,CAAE9rB,MAAO2gB,MAAOJ,MACtD,KC1OCwL,YAAc,CACvB,yuBACA,6qDACA,8xECOJ,MAAMC,aAAe,kGAAI,sBAAkB9xB,UAoD3C,SAAS+xB,YAAYhuB,KACjB,OAAO+tB,aAAaE,uBAAuBjuB,IAC/C,CAEO,MAAM2D,kBAAmC,IAtD/B,IAAIsQ,MAAM,GAAGrf,QAAQV,KAAKg6B,QACvC,MAAMC,KAAOD,MAAQ,EAErB,MAAO,CACHnuB,MAAO,WAAWouB,OAClBjuB,KAAM8tB,YAAYF,YAAYI,QAC9B75B,GAAI,UAAU85B,OACd1yB,WAAY,CAAEyyB,MAAOC,MACxB,OAGa,CACd,CACIpuB,MAAO,YACPG,KAAM8tB,YDbV,soCCcI35B,GAAI,iBAIC,CACT,CACI0L,MAAO,eACPG,KAAM8tB,YD3BV,ksBC4BI35B,GAAI,eAER,CACI0L,MAAO,iBACPG,KAAM8tB,YD7BV,0dC8BI35B,GAAI,kBAIE,CACV,CACI0L,MAAO,aACPG,KAAM8tB,YD/BV,07CCgCI35B,GAAI,cAER,CACI0L,MAAO,aACPG,KAAM8tB,YDjCV,kWCkCI35B,GAAI,aAER,CACI0L,MAAO,kBACPG,KAAM8tB,YDnCV,kPCoCI35B,GAAI,oBAUC+5B,0BAA4B,CACrC,CACInqB,KAAM,OACN1M,QAAS,CACL8tB,mBAAoB,CAAC,SAG7B,CACIphB,KAAM,kBACN1M,QAAS,CACLyyB,SAAS,EACTC,QAAQ,KCIpB,SAAS/nB,aAAY,OACX,MACD,QAOL,MAAMmsB,SAAW,CACbjF,WAAY,KACRhzB,OAAOK,QAAQ63B,mBAAmB,CAAE5L,MAAOvc,QAAS1M,MAAM0M,UAAWxP,KAAK,EAE9E43B,QAAS,KACLn4B,OAAOK,QAAQ+3B,WAAW,CAAE9L,MAAO9lB,KAAMnD,MAAMmD,OAAQjG,KAAK,EAEhE83B,YAAa,KACTr4B,OAAOK,QAAQi4B,YAAYhM,OAAOiM,oBAAoBpuB,QAAQ5J,KAAK,EAEvEi4B,WAAY,KACRx4B,OAAOK,QAAQi4B,YAAYhM,OAAOmM,mBAAmBtuB,QAAQ5J,KAAK,EAEtEm4B,WAAY,KACR14B,OAAOK,QAAQi4B,YAAYhM,OAAOqM,gBAAgBxuB,QAAQ5J,KAAK,EAEnEq4B,UAAW,KACP54B,OAAOK,QAAQi4B,YAAYhM,OAAOuM,eAAe1uB,QAAQ5J,KAAK,EAElEu4B,eAAgB,KACZ94B,OAAOK,QAAQi4B,YAAYhM,OAAOyM,oBAAoB5uB,QAAQ5J,KAAK,GAI3E03B,SAAS50B,MAAMmD,KAAKqH,MACdoqB,SAAS50B,MAAMmD,KAAKqH,QACpB7N,OAAOK,QAAQusB,iBAAiBN,OAAOniB,QAAQ5J,KACzD,CAEO,MAAMy4B,YAAe1G,mBACxB,IAAI2G,QACA1E,qBACJ,MAAM2E,cAAgB,IAAI,QAAU,oBAC9BC,SAA6B,IAAI,oBAOvC,SAASlC,SAAQ,OAAQ,MAAO,cAehC,SAASmC,yBAAyBp5B,OAAgBssB,OAC9C,MAAM+M,cAA0Br5B,OAAOs5B,QAAQC,UAAUF,cACzD9E,qBArGR,SAASiF,uBAAuBlH,kBAC5B,MAAMnvB,UAAYmvB,iBAAiBO,gBAAgBrmB,sBAGnD,OAFArJ,UAAUqB,kBAAkBD,gBAErBpB,SACX,CAgG+Bq2B,CAAuBlH,kBAC9CiC,qBAAqBtwB,SAASsE,gBAAkBvI,OAAOs5B,QAAQC,UAAUtwB,KACzEsrB,qBAAqBtwB,SAAS8I,oBAC1B/M,OAAOs5B,QAAQC,UAAUxsB,oBACzBssB,cAAcrvB,OAAS,GACvBuqB,qBAAqBtwB,SAASuH,MAAQ+B,kBAAkB5F,QAAQ6F,MAC5D6rB,cAAc1rB,SAASH,KAAKvP,MAE5Bo7B,cAAc1rB,SDzEO,gBC0ErB4mB,qBAAqBtwB,SAASmK,sBAGlCmmB,qBAAqBtwB,SAASmK,qBAGlCmmB,qBAAqBtwB,SAAS2J,YAAeJ,OACzC,MAAMisB,gBAAkBP,cAAc7L,SAASrtB,OAAOksB,KAAKE,OAAOrkB,OAAOiC,QAAU,EACnFsiB,MAAMC,GAAKD,MAAMC,GAAKkN,gBACtB3tB,YAAY,CAAE9L,OAAgBssB,MAAcjpB,MAAOmK,MAAO,EAG9D+mB,qBAAqBtwB,SAASgJ,YAAY9E,MAAK,EAAA0oB,UAAA,GAAUsI,WAAWlrB,WAAWzH,OAC3E,MAAMkzB,WAAa,CACfnN,GAAID,MAAMC,GAAK2M,cAAc7L,SAASrtB,OAAOksB,KAAKE,OAAOrkB,MAAMiC,OAC/DuhB,KAAM/kB,OAAS8F,UAAUoB,MAAQ4e,MAAMf,KAAOe,MAAMf,KAAO,GAE/DvrB,OAAOK,QAAQi4B,YAAYoB,YAAYn5B,KAAK,GAEpD,CA5CI64B,CAAyBp5B,OAAQssB,OACjC2M,QA/ER,SAASU,kBAAiB,QACf,QACA,KACH,SAQJ,OAAO,gBAAMv4B,QAAS,CAClBw4B,SAAU/zB,SAASoQ,KACnBwY,QACAI,UAAW,SACXE,cAAe,CACXC,UAAWgJ,2BAEfzJ,uBAAwByI,KACxB6C,cAAc,EACdnL,aAAa,EACbjmB,OAAQ,CAAC,IAAK,IACdmmB,QAAS,SACTD,SAAU,OACVmL,QAER,CAqDkBH,CAAiB,CACvBv4B,QAASpB,OAAOksB,KAAK/nB,IACrBsqB,QAAS8F,qBAAqB3iB,SAAS7Q,cACvCi2B,KAAME,WACN4C,OAAQ,KACJ,MAAMj6B,YAAcG,OAAOosB,MAAMsG,GAAGC,QH3FN,eG2F8C,CACxE7Z,MAAM,IAEV9Y,OAAOksB,KAAK6N,SAASl6B,YAAY,GAG7C,CAwCA,SAAS43B,WAAU,QACf,MAAM,KAAU9rB,MAEhB,MAAY,WAARrH,KACA20B,QAAQhL,QAED,GAGC,UAAR3pB,KACAiwB,qBAAqBtwB,SAAS6H,eAEvB,IAGC,cAARxH,KAA+B,YAARA,OACvBiwB,qBAAqBtwB,SAASyH,gBAAgBC,QAEvC,EAIf,CAEA,SAASwrB,SACL8B,SAASx3B,UACT8yB,qBAAuB,KACvB4E,SAASlhB,MAAK,GACdkhB,SAASjd,UACb,CAEA,OAAO,0BAAsC,CACzCrO,KAAM,cAEN0kB,WAAU,KACC,CACHhwB,UAAW,cACXnB,QAAS,KACT44B,WAAY,CACRC,KAAM,IACN13B,UAAW22B,cACXgB,aAAa,EACbC,aAAa,EACb1D,OAAQ,KACG,CACHQ,QACAQ,UACAN,SAGR3rB,MAAO,EAAGzD,UACFwsB,sBACAA,qBAAqBtwB,SAASkL,YAAYpH,OAMvC,OAMvByqB,YAAW,KACA,CACH4F,WACI,EAAG9L,MAAO9lB,QACV,EAAGnG,SACQA,QACF8J,QACAmuB,YAAYhM,OACZ8N,cAAc,CAAEtC,MAAOtxB,KAAKsxB,QAC5B3tB,QACA5J,MAEb23B,mBACI,EAAG5L,MAAOvc,WACV,EAAG1P,SACQA,QACFi4B,YAAYhM,OACZvgB,SAASlF,OACN,MAAM9B,KAAO8B,KAAK7G,OAAOq6B,OAAOC,MAAMtH,WAAWnvB,OAAO,CACpDgD,KAAMkJ,UAIV,OAFAlJ,KAAK6rB,GAAG6H,qBAAqBx1B,OAEtB,CAAI,IAEdoF,QACA5J,QAKrBqyB,wBACI,MAAM4H,OAASlI,iBAAiBO,gBAAgBpiB,uBAEhD,MAAO,CACH6mB,sBAAsB,CAClBvrB,QAASD,YACT9L,OAAQD,KAAKC,OACboB,QAASo5B,OAAO5oB,SAAS7Q,cACzB01B,OAAQ,KACG,CACHQ,QACAQ,UACAN,YAIZ,4BAAW,CACPn3B,OAAQD,KAAKC,UACVD,KAAKoB,QAAQ64B,aAG5B,GACF,ECzROS,WAAcr3B,UAChB,0BAAY,CACfyK,KAnBwB,WAoBxBumB,MAAO,QACPsG,QAAQ,EACR53B,WAAW,EAEX63B,cAAa,KACF,CACH9zB,KAAM,CACF+zB,QAAS,KACTC,UAAYz5B,SAAYA,QAAQ05B,aAAa,QAC7CC,WAAa11B,aACF,CAAEwB,KAAMxB,WAAWwB,QAGlCyL,KAAM,CACFsoB,QAAS,KACTC,UAAYz5B,SAAYA,QAAQ05B,aAAa,QAC7CC,WAAa11B,aACF,CAAEiN,KAAMjN,WAAWiN,UAM1CkgB,YAAW,KACA,CACHrC,aACK9qB,YACD,EAAGioB,YACQA,SAASloB,iBAAiB,WAAYC,YAErDkrB,eACI,IACA,EAAGjD,YACQA,SAASloB,iBAAiB,WAAY,CAAEkN,KAAM,OAKrEuoB,UAAS,IACE,CAAC,CAAEG,IAAK,uBAGnBD,WAAU,EAAC,kBACA,CAAC,sBAAsB,sBAAgBE,iBAGlDC,YAAW,IACAv0B,wBAAwB6hB,oBAAqB,CAAEplB,4GCtE3D,MAAM+3B,kBAAoB,IAAI,QAAO,CACxC/O,MAAO,CACH3N,KAAI,IACO,+BAEX+S,MAAMkB,GAAIjrB,KAENA,IAAMA,IAAI3J,IAAI40B,GAAG0I,QAAS1I,GAAGrG,KAE7B,MAAMgP,OAAS3I,GAAGhB,QAAQ3xB,MAC1B,GAAIs7B,QAAUA,OAAOC,IAAK,CACtB,MAAMr9B,GAAKo9B,OAAOC,IAAIr9B,GAChBs9B,KAAO,+BAAkBF,OAAOC,IAAInP,IAAKkP,OAAOC,IAAIl6B,QAAS,CAC/DkD,IAAKrG,KAETwJ,IAAMA,IAAI6zB,IAAI5I,GAAGrG,IAAK,CAACkP,YAChBF,QAAUA,OAAO7N,SACxB/lB,IAAMA,IAAI+lB,OAAO/lB,IAAI+zB,KAAK,KAAM,MAAOC,MAASA,KAAKx9B,IAAMo9B,OAAO7N,OAAOvvB,OAG7E,OAAOwJ,GACX,GAEJpE,MAAO,CACH2B,YAAYonB,OACR,OAAOrsB,KAAKstB,SAASjB,MACzB,KClBKsP,YAAc,CAACt4B,SAAoBkvB,mBACrC,0BAAiB,CACpBzkB,KAAM,cAEN+kB,wBACI,MAAM+I,gBAAkBv4B,SAASG,IAAIunB,iBAC/B9qB,OAASD,KAAKC,OACpB,SAAS47B,cAAcjwB,OACnB,IAAIsf,MAQJ,GANIA,MADe,SAAftf,MAAMnF,KACGmF,MAAoBkwB,aAAa5Q,MAGjCtf,MAAyBmwB,cAAc7Q,MAGhDA,MAAMjhB,OAAS,EACf,IAAK,IAAI8a,EAAI,EAAGA,EAAImG,MAAMjhB,OAAQ8a,IAC9B,IAAKmG,MAAMnG,GAAGte,KAAKiS,WAAW,UAC1B,OAAO,EAKnB,QAASwS,MAAMjhB,MACnB,CAEA,SAAS+xB,sBACL,MAAM1C,cAA0Br5B,OAAOs5B,QAAQC,UAAUF,cAEzD,QAAOA,cAAcrvB,OAAS,IAAIqvB,cAAc1rB,SFnChC,WEoCpB,CAuBA,SAASquB,aAAa9P,KAAkBjB,MAAegR,UACnD,MAAMC,gBAAkBjR,MAAM,GAAGpd,MAtBrC,SAASsuB,eAAejQ,KAAkB+P,SAAkBh+B,IACxD,MAAMm+B,aACF9J,iBAAiBO,gBAAgBhK,iBAC/B6J,GAAKxG,KAAKE,MAAMsG,GACtB0J,aAAan4B,SAAS4C,KAAO,CACzBkM,QAAS,eACTvM,KAAM,QAEV41B,aAAa53B,kBAAkBD,gBAE/BmuB,GAAGC,QAAQwI,kBAAmB,CAC1BG,IAAK,CACDr9B,GACAkuB,IAAK8P,SACL76B,QAASg7B,aAAaxqB,SAAS7Q,iBAIvCmrB,KAAK6N,SAASrH,GAClB,CAIIyJ,CAAejQ,KAAM+P,SAAUC,iBAC/BP,gBACK5Q,eAAeE,OACf9iB,MAAK,EAAA6F,KAAA,GAAK,IACVC,WACIouB,YACG,MACMt3B,KAAO,CACT+B,MAAO,CACHD,KAHKw1B,UAAU,GAAG39B,OAAOF,KAAK69B,UAAU,IAAI,KAKhD71B,KAAM,YAEVxG,OAAOstB,SAASgP,gBAAgBL,SAAUl3B,KAAK,IAElDmO,OAAU2iB,MAAM3iB,MAAMH,WACvB,IAIZ,SAASwpB,kBAAkBt+B,IACvB,MAAM,MAAW+B,QACX,OAAYksB,KAClBA,KAAK6N,SACD3N,MAAMsG,GAAGC,QAAQwI,kBAAmB,CAChC3N,OAAQ,CAAEvvB,MAGtB,CAZkBs+B,CAAkBL,kBAEpC,CA4BA,MAAO,CACHf,kBACA,IAAI,QAAO,CACP72B,IAAK,IAAI,QAAU,eACnBjB,MAAO,CACHsuB,gBAAiB,CACb6K,MAAMtQ,KAAMvgB,OACR,GAAIowB,uBAAyBH,cAAcjwB,OAAQ,CAC/C,GAAyC,IAArCA,MAAMmwB,cAAc7Q,MAAMjhB,OAG1B,OAFA6rB,MAAM,uCAEC,EAGX,MAAM,MAxB9B,SAAS4G,sBAAsBvQ,MAC3B,MAAM,OAAYA,MACZ,WAAgBE,OAChB,QAAae,UAInB,MAAO,CAAE5B,KAHI8D,KAAKC,OAAOC,OAAOzxB,KAAKwuB,OAAUA,MAAMkD,MAAMrD,OAG5CI,GAFJ8C,KAAKI,OAAOF,OAAOzxB,KAAKwuB,OAAUA,MAAMoD,IAAIvD,OAG3D,CAgByCsQ,CAAsBvQ,MAEvC8P,aAAa9P,KADCrO,MAAM0N,KAAK5f,MAAMmwB,cAAc7Q,OACnBM,MAG9B,OAAO,CACX,EAEAmR,KAAKxQ,KAAMvgB,OACP,GAAIowB,uBAAyBH,cAAcjwB,OAAQ,CAE/C,GADAA,MAAMgD,iBACkC,IAApChD,MAAMkwB,aAAa5Q,MAAMjhB,OAGzB,OAFA6rB,MAAM,sCAEC,EAGX,MAAQ1J,IAAK8P,UAAa/P,KAAK8F,YAAY,CACvCF,KAAMnmB,MAAMkmB,QACZnnB,IAAKiB,MAAMomB,UAIfiK,aAAa9P,KADCrO,MAAM0N,KAAK5f,MAAMkwB,aAAa5Q,OAClBgR,UAG9B,OAAO,CACX,MAKpB,IC1JKU,YAAerK,kBACjB,0BAAiB,CACpBzkB,KAAM,cAEN+kB,wBACI,IAAIgK,gBAAkB,KACtB,MAEMC,YACFvK,iBAAiBO,gBAAgBtK,sBAAsB3W,SAAS7Q,cAgCpE,SAAS+7B,UAAUz+B,EAAG6tB,MAClB,IAAK7tB,EAAEw9B,aAAc,OACrB,MACM1P,IAlBV,SAAS4Q,iBAAiBC,OAAQ9Q,MAC9B,MAAMC,IAAMD,KAAK8F,YAAYgL,QAC7B,GAAI7Q,IAAK,CACL,MAAMpnB,KAAOk4B,eAAe/Q,KAAKgR,QAAQ/Q,IAAIgR,SAC7C,GAAIp4B,MAA0B,IAAlBA,KAAK+xB,SAAgB,CAC7B,MAAMsG,KAAOlR,KAAKmR,QAAQC,YAAYv4B,MAAM,GAC5C,GAAOq4B,MAAQA,OAASlR,KAAKmR,QACzB,OAAOD,KAAKG,WAKxB,OAAO,IACX,CAKgBR,CADG,CAAEjL,KAAMzzB,EAAEwzB,QApCT,GAoCgCnnB,IAAKrM,EAAE0zB,SAClB7F,MACrC,GAAW,MAAPC,IAAa,CACbD,KAAK6N,SACD7N,KAAKE,MAAMsG,GAAG8K,aAAa,eAAqBtR,KAAKE,MAAMC,IAAKF,OAEpE,MAAM/sB,MAAQ8sB,KAAKE,MAAMe,UAAUsB,UACnCpwB,EAAEw9B,aAAa4B,YACfp/B,EAAEw9B,aAAa6B,aAAad,gBAAiB,GAAI,IACjD1Q,KAAKyR,SAAW,CAAEv+B,MAAOw+B,MAAM,GAEvC,CAGA,SAASX,eAAel4B,MACpB,KAAOA,MAAQA,KAAK84B,aAEZ94B,KAAK+4B,WAAWx3B,SAAS,iBACzBvB,KAAK84B,WAAWC,WAAWx3B,SAAS,gBAKxCvB,KAAOA,KAAK84B,WAGhB,OAAO94B,IACX,CAmBA,SAAS6oB,gBACLiP,YAAYiB,UAAUtQ,OAAO,UACjC,CAUA,MAAO,CACH,IAAI,QAAO,CACPlpB,IAAK,IAAI,QAAU,eACnB4nB,KAAO6R,aAEH/tB,uBAAsB,IAxBlC,SAASguB,wBAAwBD,YAC7BlB,YAAYoB,aAAa,YAAa,QACtCpB,YAAYlP,iBAAiB,aAActvB,GAAMy+B,UAAUz+B,EAAG0/B,cAC9DlB,YAAYiB,UAAUtQ,OAAO,WAC7BuQ,WAAW55B,IAAIsG,cAAcvJ,YAAY27B,YAC7C,CAmBwCmB,CAAwBD,cAEpDl4B,SAASoQ,KAAK0X,iBAAiB,SAAUC,eAAe,GAEjD,CACHnsB,WA3FhB,SAASy8B,WAAWn5B,MACZA,MAAQA,KAAK84B,YACb94B,KAAK84B,WAAWM,YAAYp5B,KAEpC,CAwFoBm5B,CAAWrB,aACXh3B,SAASoQ,KAAKmhB,oBAAoB,SAAUxJ,eAAe,EAC/D,IAGRvqB,MAAO,CACHsuB,gBAAiB,CACb+K,KAAI,KACAxwB,YAAW,KACP,MAAMnH,KAAOc,SAASQ,cAClB,8BAEAtB,MACAA,KAAK+4B,UAAUtQ,OAAO,6BAG1BqP,YAAYiB,UAAUtQ,OAAO,UAAU,KAGpC,GAEX4Q,UAAUlS,KAAMvgB,OACZ,MAAMqxB,OAAS,CACXlL,KAAMnmB,MAAMkmB,QAhIhB,GAiIInnB,IAAKiB,MAAMomB,SAETkK,SAAW/P,KAAK8F,YAAYgL,QAClC,GAAIf,UAlExB,SAASoC,eAAenS,KAAkBoS,SACtC,MAAMv5B,KAAOmnB,KAAKgR,QAAQoB,SAE1B,SACMv5B,MAAMw5B,iBACqB,IAA3Bx5B,KAAKy5B,WAAWx0B,QAA+C,MAA/BjF,KAAKy5B,WAAW,GAAGC,SAE7D,CA2DoCJ,CAAenS,KAAM+P,SAASkB,QAE1C,GADAP,gBAAkBK,eAAe/Q,KAAKgR,QAAQjB,SAASkB,SA/C/E,SAASuB,YAAY35B,MACjB,OACIA,OACCA,KAAK+4B,WAAWx3B,SAAS,iBACzBvB,KAAKmF,UAAUuO,WAAW,IAEnC,CA0C4BimB,CAAY9B,iBAAkB,CAC9B,MAAM,IAAK,MAnIvC,SAAS+B,WAAWC,UAAW75B,MAM3B,MAAO,CAAE2F,IAJL3F,KAAKgG,wBAAwBL,IAAMk0B,UAAU7zB,wBAAwBL,IAI3DonB,KAFV/sB,KAAKgG,wBAAwB+mB,KAAO8M,UAAU7zB,wBAAwB+mB,KAG9E,CA4HkD6M,CAClBzS,KAAK/nB,IAAIsG,cACTmyB,iBAGJC,YAAY72B,MAAM8rB,KAAOA,KA7IzB,GA6IsD,KACtD+K,YAAY72B,MAAM0E,IAAMA,IAAM,EAAI,EAAIA,IAAM,KAC5CmyB,YAAYiB,UAAUxC,IAAI,gBAE1BuB,YAAYiB,UAAUtQ,OAAO,gBAGjCoP,gBAAkB,KAClBC,YAAYiB,UAAUtQ,OAAO,WAGjC,OAAO,CACX,MAKpB,IC5IKqR,oBAAuB19B,UAChC,MAAMgC,UAAYhC,QAAQgC,UAAUc,SAC9B66B,SAAW39B,QAAQ49B,kBAAkB96B,SAE3C,OAAO,IAAI,QAAiC,CACxCK,IACiC,iBAAtBnD,QAAQoB,UACT,IAAI,QAAUpB,QAAQoB,WACtBpB,QAAQoB,UAClB2pB,KAAOA,MAAS,IAAI8S,wBAAwB,CAAE9S,QAAS/qB,UACvDkC,MAAO,CAQHm0B,cAActL,KAAkBvgB,OAC5B,MAAM,KAAUA,MAChB,GAAImzB,SAAShyB,OAAQ,CACjB,GAAY,WAARxI,IAGA,OAFAnB,UAAUsoB,eAAehe,QAElB,EAGX,GAAY,UAARnJ,IAGA,OAFAw6B,SAAShzB,eAEF,EAGX,GAAY,cAARxH,KAA+B,YAARA,IAGvB,OAFAw6B,SAASpzB,gBAAgBC,QAElB,EAIf,OAAO,CACX,IAEN,EAGC,MAAMqzB,gCAAgC,oCAazC1/B,YAAY+D,OAERgZ,MAAMhZ,OATF,KAAA47B,gBAAiB,EA2IzB,KAAAC,kBAAoB,CAAC1zB,MAA0B,GAAI2zB,cACxC3zB,MAAM1N,KAAK0P,OACdA,KAAKoe,OAASuT,YAAYxxB,SAASH,KAAKgmB,YAEjChmB,QAIf,KAAA4xB,aAAe,IACJ,IAAI1gC,OAAOF,KAAKuB,KAAKC,OAAOq6B,OAAOgF,UAAW3gC,OAAOF,KAAKuB,KAAKC,OAAOq6B,OAAOC,QAGxF,KAAAgF,eAAiB,CAACC,SAAW,KAClB,IACAx/B,KAAKq/B,eAAez3B,QAAQ63B,MAASz/B,KAAKC,OAAOixB,SAASuO,WAC1DD,SAAS53B,QAAQ83B,WAAc1/B,KAAKC,OAAOixB,SAAS,CAAErI,UAAW6W,eA/IxE,MAAM,UAAW,mBAAwBp8B,MAGzCtD,KAAKoD,UAAYA,UACjBpD,KAAK++B,SAAWC,kBAChBh/B,KAAK2/B,gBAAkB3/B,KAAK++B,SAASltB,SAAS7Q,cAG9ChB,KAAKoD,UAAUc,SAAS8H,QAAQkC,UAAUlO,KAAK4/B,WAAW/b,KAAK7jB,OAC/DA,KAAKoD,UAAUc,SAASwnB,eAAexd,UAAUlO,KAAK0rB,eAAe7H,KAAK7jB,OAG1EA,KAAK++B,SAAS76B,SAASuH,MAAQzL,KAAK6/B,qBACpC7/B,KAAK++B,SAAS76B,SAAS2I,MAAQ,YAC/B7M,KAAK2/B,gBAAgBlS,SACrBztB,KAAK++B,SAASt6B,kBAAkBD,gBAGhCsB,SAASoQ,KAAK0X,iBAAiB,SAAU5tB,KAAK6tB,cAAchK,KAAK7jB,OAAO,GACxE8F,SAASoQ,KAAK0X,iBAAiB,UAAW5tB,KAAK8/B,SAASjc,KAAK7jB,OAAO,GACpE8F,SAASoQ,KAAK0X,iBAAiB,QAAS5tB,KAAK8/B,SAASjc,KAAK7jB,OAAO,GAElEA,KAAKC,OAAO2oB,IAAI,OAAQ5oB,KAAK+/B,YACjC,CAEAD,WACQ9/B,KAAKk/B,iBACLl/B,KAAKggC,eAAehJ,SAAS,CACzBxI,uBAAwB,IAAMxuB,KAAKsuB,OAAO2R,OAAOj1B,0BAErDhL,KAAKiuB,OAEb,CAGAznB,OAAO2lB,KAAkBuF,UACrB,MAAM,MAAO,WAAgBvF,MACvB,IAAK,WAAgBE,MAErB6T,OAASxO,UAAYA,SAASpF,IAAI6T,GAAG7T,MAAQoF,SAAStE,UAAU+S,GAAG/S,WAEzE,GAAIgT,WAAaF,OACb,OAGJlgC,KAAKguB,gBACLhuB,KAAKqgC,wBAGL,MAAM,QAAajT,UACnBptB,KAAKsgC,eAAiB9Q,OAAO,GAC7BxvB,KAAKugC,oBAAsB,EAE3BjU,IAAIkU,aAAaxgC,KAAKsgC,eAAe7Q,MAAMrD,IAAKpsB,KAAKsgC,eAAe3Q,IAAIvD,KAAMpnB,OACtEA,KAAKy7B,SACLzgC,KAAKugC,yBAIb,MAAM/U,KAAO8D,KAAKC,OAAOC,OAAOzxB,KAAKwuB,OAAUA,MAAMkD,MAAMrD,OACrDI,GAAK8C,KAAKI,OAAOF,OAAOzxB,KAAKwuB,OAAUA,MAAMoD,IAAIvD,OAWvD,GATApsB,KAAKk/B,eAAiBl/B,KAAK0C,aAAa,CACpCzC,OAAQD,KAAKC,OACbksB,KACAE,MACAqF,SACAlG,KACAgB,MAGCxsB,KAAKk/B,eAIN,OAHAl/B,KAAKkuB,YACLluB,KAAKggC,eAAe9R,OAKxBluB,KAAKsuB,OAAO0I,SAAS,CACjBxI,uBAAwB,KACpB,IAAI,sBAAgBpB,WAAY,CAC5B,MAAMpoB,KAAOmnB,KAAKgR,QAAQ3R,MAE1B,GAAIxmB,KAAM,CAGN,MdlHO,EAACA,KAAmByB,QAC/C,MAAMi6B,IAAM17B,KAAK27B,qBAAqB,OAAO,GAE7C,MAAa,aAATl6B,MAAuBi6B,IAChBA,IAAI11B,wBAGRhG,KAAKgG,uBAAuB,Ec2GR41B,CAAgB57B,KAFVsnB,IAAI0D,OAAOxE,MAAM/kB,KAAKqH,OAM3C,OAAO,sBAAaqe,KAAMX,KAAMgB,GAAG,IAI3CxsB,KAAK6gC,kBACL7gC,KAAK8gC,aAAaxU,IAAKd,MACvBxrB,KAAKiuB,MACT,CAGAvsB,UACI1B,KAAKsuB,OAAO5sB,UACZ1B,KAAKggC,eAAet+B,UAEpB1B,KAAKqB,QAAQg2B,oBAAoB,YAAar3B,KAAKs2B,iBAAkB,CAAEE,SAAS,IAChFx2B,KAAKmsB,KAAK/nB,IAAIizB,oBAAoB,YAAar3B,KAAK+gC,kBAEpD/gC,KAAKoD,UAAUc,SAAS8H,QAAQ8T,cAChC9f,KAAKoD,UAAUc,SAASwnB,eAAe5L,cAEvC9f,KAAKoD,UAAU1B,UACf1B,KAAK++B,SAASr9B,UAEdoE,SAASoQ,KAAKmhB,oBAAoB,SAAUr3B,KAAK6tB,cAAchK,KAAK7jB,OAAO,GAC3E8F,SAASoQ,KAAKmhB,oBAAoB,UAAWr3B,KAAK8/B,SAASjc,KAAK7jB,OAAO,GACvE8F,SAASoQ,KAAKmhB,oBAAoB,QAASr3B,KAAK8/B,SAASjc,KAAK7jB,OAAO,EACzE,CAGA6gC,kBACI,MAAM,OAAY7gC,KAAKoD,UAAUc,SAE3Bk7B,YAAcp/B,KAAKu/B,eADE,CAAC,OAAQ,SAAU,UAE9Cv/B,KAAKghC,sBACLhhC,KAAKoD,UAAUc,SAASuH,MAAQzL,KAAKm/B,kBAAkB1zB,MAAO2zB,aAC9Dp/B,KAAKoD,UAAUqB,kBAAkBD,eACrC,CAqBAs8B,aAAaxU,IAAKd,MACd,MAAMxmB,KAAOsnB,IAAI0D,OAAOxE,MAClByV,WAAgC,YAAnBj8B,MAAMyB,KAAKqH,KAE9B9N,KAAKkhC,cAAgBl8B,KAErBhF,KAAKoD,UAAUc,SAASuH,MAAQw1B,WAAatN,qBAAuBH,eACxE,CAGAoM,WAAWnyB,MACP,MAAQgmB,WAAY6H,OAAM,QAAa7tB,KACvC,OAAQ6tB,QACJ,IAAK,OACDt7B,KAAKC,OAAOstB,SAAS4T,aACrB,MAEJ,IAAK,SACDnhC,KAAKC,OAAOstB,SAAS6T,eACrB,MAEJ,IAAK,SACDphC,KAAKC,OAAOstB,SAAS8T,eACrB,MAEJ,IAAK,YACDrhC,KAAKC,OAAOstB,SAAS+T,kBACrB,MAEJ,IAAK,OAIL,IAAK,SAIL,IAAK,QACDthC,KAAKuhC,gBAAgBjG,OAAQzP,QAC7B,MAEJ,IAAK,aACD7rB,KAAKC,OAAOstB,SAASmL,mBACrB,MAEJ,IAAK,cACD14B,KAAKC,OAAOstB,SAASiL,oBACrB,MAEJ,IAAK,SACGjF,WAAWvzB,KAAKC,SAChBD,KAAKC,OAAOstB,SAASiU,aAAa,YAGtC,MAEJ,IAAK,UACGjO,WAAWvzB,KAAKC,SAChBD,KAAKC,OAAOstB,SAASkU,aAAa,YAGtC,MAEJ,IAAK,OAED,MAAM,QAAapU,qBAAqBC,SAASttB,KAAKC,OAAOosB,OAC7Dtf,OACM/M,KAAKC,OAAOksB,KAAK/hB,QACjBpK,KAAKC,OAAOstB,SAAST,aAAa,CAAEC,aAAa,IACvD,MAEJ,IAAK,aACG/sB,KAAKugC,oBAAsB,EAC3BvgC,KAAK0hC,gBAEL1hC,KAAK2hC,eAGT,MAEJ,IAAK,WACD3hC,KAAKC,OAAOstB,SAASqU,gBACrB5hC,KAAKC,OAAOstB,SAASsU,aAGjC,CAEAN,gBAAgB7B,UAAW7T,QACnBA,OACA7rB,KAAKC,OAAOstB,SAASuU,iBAErB9hC,KAAKC,OAAOstB,SAASwU,aAAarC,UAE1C,CAEAG,qBACI,MAAMvG,cAA0Bt5B,KAAKC,OAAOs5B,QAAQC,UAAUF,cAExD0I,gBACF1I,cAAcrvB,OAAS,EACjBuD,kBAAkB5F,QAAQ6F,MAAS6rB,cAAc1rB,SAASH,KAAKvP,MAC/DsP,kBAAkB5F,QAAQ6F,MAAoB,kBAAXA,KAAKvP,KAC5C+jC,kBAAoB,CACtBC,SAAU,KACNliC,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAaM,WAAW,CAAEpK,MAAO,IAAKv3B,KAAK,EAE3E4hC,SAAU,KACNpiC,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAaM,WAAW,CAAEpK,MAAO,IAAKv3B,KAAK,EAE3E6hC,SAAU,KACNriC,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAaM,WAAW,CAAEpK,MAAO,IAAKv3B,KAAK,EAE3E8hC,UAAW,KACPtiC,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAaU,eAAe/hC,KAAK,EAEjE83B,YAAa,KACTt4B,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAarJ,oBAAoBh4B,KAAK,EAEtEi4B,WAAY,KACRz4B,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAanJ,mBAAmBl4B,KAAK,EAErEm4B,WAAY,KACR34B,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAaW,mBAAmBhiC,KAAK,EAErEq4B,UAAW,KACP74B,KAAKC,OAAOK,QAAQ8J,QAAQy3B,aAAaY,kBAAkBjiC,KAAK,GAkBxE,OAdAwhC,gBAAgB19B,SAASo+B,SACrBA,OAAOxR,SAAW,IACPwR,OAAOxkC,GAAG0P,SAAS,WACpB5N,KAAKC,OAAOixB,SAAS,UAAWwR,OAAOp9B,YACvCtF,KAAKC,OAAOixB,SAASwR,OAAOxkC,IAGtCwkC,OAAO12B,QAAU,KACbi2B,kBAAkBS,OAAOxkC,MACzB8B,KAAKggC,cAAc9R,OACnBluB,KAAKghC,qBAAqB,CAC7B,IAGEgB,eACX,CAEAhB,sBACI,MAAMv1B,MAAQzL,KAAK++B,SAAS76B,SAASuH,MAC/B2zB,YAAc3zB,MAAM7D,QAAQ86B,QAAWA,QAAQxR,aAG/CyR,WAAavD,YAAYn1B,OAAS,EAAIm1B,YAAY,GAAKA,YAAY,GAEzEp/B,KAAK++B,SAAS76B,SAASkI,iBAAiBX,MAAMm3B,WAAWn1B,MAASA,OAASk1B,cAE3E3iC,KAAKoD,UAAUc,SAASgB,SAAWy9B,YAAY/4B,OAAS,EAC5D,CAGAy2B,wBACI,MAAQh/B,QAAS+sB,eAAkBpuB,KAAKC,OAAOmB,QAE3CpB,KAAKggC,gBAIThgC,KAAKggC,eAAgB,gBAAM5R,cAAe,IACnCpuB,KAAKyC,aACRo3B,SAAU/zB,SAASoQ,KACnBsY,uBAAwB,KACxBE,QAAS1uB,KAAK2/B,gBACd7Q,UAAW,eACXP,SAAU,EACVQ,aAAa,EACbC,cAAe,CACXC,UAAW2E,iBAEfmG,OAAQ,KACJ/5B,KAAK++B,SAAS76B,SAAS6I,QAAS,CAAK,EAEzC81B,OAAQ,KACJ7iC,KAAK++B,SAAS76B,SAAS6I,QAAS,EAChC/M,KAAKghC,qBAAqB,IAGtC,CAEAtV,iBACQ1rB,KAAKggC,cAAc3T,MAAMyW,UACzB9iC,KAAKggC,eAAe9R,OAEpBluB,KAAKggC,eAAe/R,MAE5B,CAEAJ,gBACQ7tB,KAAKggC,eAAe3T,MAAMyW,WAC1B9iC,KAAKggC,eAAe9R,MAE5B,CAEQyT,eACAx6B,gBAAgByG,SAAS5N,KAAKkhC,cAAcz6B,KAAKqH,MACjD9N,KAAK+iC,+BAEL/iC,KAAKgjC,qBAEb,CAEQtB,gBACJ,MAAMlW,KAAOxrB,KAAKsgC,eAAe7Q,MAAMrD,IACjCI,GAAKxsB,KAAKsgC,eAAe3Q,IAAIvD,IAAM,EACzCpsB,KAAKC,OAAOK,QAAQi4B,YAAY,CAAE/M,KAAMgB,KAAMyW,OAAOziC,KACzD,CAEQuiC,+BACJ,MAAMvX,KAAOxrB,KAAKsgC,eAAe7Q,MAAMrD,IACjCI,GAAKhB,KAAO,EAGlBxrB,KAAKC,OAAOK,QAAQi4B,YAAY,CAAE/M,KAAMgB,KAAMyW,OAAOziC,KACzD,CAEQwiC,sBACJ,MAAME,oBAAsBpX,eAAe9rB,KAAKsgC,eAAe7Q,OACzD0T,sBAAmCD,oBAAoBz8B,KAAKqH,KAE5Ds1B,2BAA6BtX,eAAe9rB,KAAKsgC,eAAe7Q,MAAO,CACzEvoB,UAAUm8B,aACVn8B,UAAUo8B,eAGR,YAAiBF,2BAEvB,OAAQD,uBACJ,KAAKj8B,UAAUm8B,aAGf,KAAKn8B,UAAUo8B,YACP5W,WAAa,EAEb1sB,KAAKC,OAAOK,QAAQiF,WAAW2B,UAAUq8B,WAAWN,OAAOziC,MAG3DR,KAAKC,OAAOK,QAAQiF,WAAW69B,2BAA2B38B,MAAMw8B,OAAOziC,MAG3E,MAEJ,QACIR,KAAKC,OAAOK,QAAQiF,WAAW29B,oBAAoBz8B,MAAMw8B,OAAOziC,MAG5E,ECreJ,MAAMgjC,oBAAsC,CACxCjV,SAAU,IACVK,SAAU,OACVE,UAAW,YACXD,QAAS,SACTF,aAAa,GAGV,SAAS8U,uBAAuBlR,kBAEnC,MAAMmR,oBAAsBnR,iBAAiBO,gBAAgBrH,qBACvDkY,kBAAoBD,oBAAoB7xB,SAAS7Q,cAGjDg+B,kBAAoBzM,iBAAiBO,gBAAgBrmB,sBACrDkzB,gBAAkBX,kBAAkBntB,SAAS7Q,cAEnD,OAAO,2CAAqC,CAExCwxB,WAAU,KACC,CACHnxB,QAAS,KACToB,aAAc+gC,oBACdhhC,UAAW,aACXE,WAAYwwB,uBAIpBL,wBACI,OAAK8Q,kBAIE,CACH7E,oBAAoB,CAChB17B,UAAWsgC,oBACX1E,kBACAx8B,UAAWxC,KAAKoB,QAAQoB,UACxBvC,OAAQD,KAAKC,OACboB,QAASsiC,kBACThE,gBACAl9B,aAAczC,KAAKoB,QAAQqB,aAC3BC,WAAY1C,KAAKoB,QAAQsB,cAZtB,EAef,GAER,6hBCnBakhC,wBAAuB,MAAvBA,wBAcTrkC,YAAoB8D,SAA2BkvB,kBAA3B,KAAAlvB,SAAAA,SAA2B,KAAAkvB,iBAAAA,iBAbtC,KAAArpB,K7D7BkB,E6D8BlB,KAAA8D,oBAAsB,GACtB,KAAA62B,aAAe,GAMxB,KAAAC,eAAiB,GAGjB,KAAAzjC,MAAQ,EAE4E,CATvEi5B,kBAAcyK,QACvB/jC,KAAK8jC,eAAiB,CAAC,eAAgBC,OAAO5yB,QAAQ,KAAM,IAAInH,MAAM,KAAKpC,OAAOo8B,SACtF,CASA/iC,WACIjB,KAAKC,OAAS,IAAI,mBAAO,CACrBgkC,WAAYjkC,KAAKkkC,uBAEzB,CAEQA,sBACJ,MAAMC,kBAAoC,ECrDfr9B,KDsDJ,CACfoC,KAAMlJ,KAAKkJ,KACX8D,oBAAqBhN,KAAKgN,oBAC1BssB,cAAet5B,KAAK8jC,gBCxDzB,0BAA0C,CAC7Ch2B,KAAM,YAENs2B,WAAU,KACC,IACAt9B,UDqDPmyB,YAAYj5B,KAAKuyB,kBACjBqK,YAAY58B,KAAKuyB,kBACjBoJ,YAAY37B,KAAKqD,SAAUrD,KAAKuyB,kBAChCD,wBAAwBtyB,KAAKuyB,kBAC7BkR,uBAAuBzjC,KAAKuyB,kBAE5B,iCACA,4CAAoB,CAAExqB,MAAO,CAAC,UAAW,YAAa,WAAY,cAClE,4CAAoB,CAAEmzB,eAAgB,CAAEj1B,MAAO,0BAC/C,sCAAe,CAAE8mB,aAAa,IAC9B,6CAAsB,CAClBsX,YAAa,EAAGr/B,QACW,YAAnBA,KAAKyB,KAAKqH,KACH,GArD/B,SAASw2B,YAAYpzB,KACjB,OAAOA,IAAIC,QAAQ,sBAAsB,SAAUozB,KAC/C,OAAOA,IAAIhzB,OAAO,GAAGF,cAAgBkzB,IAAIllC,MAAM,EACnD,GACJ,CAiDkCilC,CAAYt/B,KAAKyB,KAAKqH,SAAS9I,KAAK+B,MAAMgxB,QAGjD,4BC3EO,IAACjxB,KD+E3B,MAAM09B,iBAA8C,IAAIxyB,IAAI,CACxD,CAAC,eE1EmB3O,SF0EYrD,KAAKqD,SEzEtC,0BAAY,CACfyK,KAAM,aACNumB,MAAO,QACPsG,QAAQ,EACR53B,WAAW,EAGX63B,cAAa,KACF,CACH9zB,KAAM,CACF+zB,QAAS,KACTC,UAAYz5B,UAAY,CACpByF,KAAMzF,QAAQ05B,aAAa,UAE/BC,WAAa11B,aACF,CAAEwB,KAAMxB,WAAWwB,UAM1Cg0B,UAAS,IACE,CAAC,CAAEG,IAAK,4BAGnBD,WAAU,EAAC,kBACA,CAAC,2BAA2B,sBAAgBE,iBAGvDC,YAAW,IACAv0B,wBAAwBC,yBAA0B,CAAExD,eF4C3D,CAAC,WAAYq3B,WAAW16B,KAAKqD,aE3EV,IAACA,SF8ExB,MAAO,IACA8gC,qBACCnkC,KAAKs5B,cACH,CACI,mCAAqBt5B,KAAKykC,2BACvBzkC,KAAK0kC,oBAAoBF,mBAEhC,CAAC,4BAAeA,iBAAiB9T,UAE/C,CAQQ+T,uBAEJ,MAOME,eAAiC,CAAEC,OAAQ,GAAI1J,eAAgB,CAAC,GAWtE,MARA,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,YAAY52B,SACpE8zB,UACOp4B,KAAK8jC,eAAe1L,UACpBuM,eAAeC,OAAOzZ,MAAMiN,QAAQ/4B,OAAO,OAKhD,CACH+4B,UAASuM,eAAeC,OAAO36B,QAAS06B,kBAnBnB,CACrB,cACA,aACA,aACA,YACA,kBAeoBt7B,QAChB,CAACw7B,OAAQp3B,QAAS,IACXo3B,UACC7kC,KAAK8jC,eAAer2B,MAAQ,CAAC,EAAI,CAAE,CAACA,OAAO,MAEnD,CAAC,GAGb,CAEQi3B,oBAAoBF,kBACxB,MAAO,IACCxkC,KAAK8jC,eAA4B,YAAI,CAACU,iBAA8B,aAAK,MACzExkC,KAAK8jC,eAAyB,SAAI,CAACU,iBAA2B,UAAK,GAE/E,qDA/IgB,KAAAM,gBAAyB,KAAAC,uEAoCxC,KAAAljC,mCACA,KAAAA,4BACA,KAAAA,6BAEA,KAAAA,SALQ+hC,yBAAuB,kBALnC,OAAAh/B,WAAU,CACP7C,SAAU,sBACV8C,+hkkBAiB8B,KAAAigC,SAAmC,KAAAC,oBAdxDnB,yBGVb,0CACI/2B,MAAO,gBAGLm4B,gBAAkB,CACpB,CACIl3B,KAAM,gBACN/D,KAAM,qBACNF,IAAK,uBACL6f,KAAM,uBACN7c,MAAO,8BACPo4B,MAAO,OACPC,MAAO,iKACPn1B,WAAY,EACZo1B,QAAS,0BACT/Z,SAAU,UACVga,UAAU,EACVhQ,SAAS,EACTiQ,QAAQ,EACRlQ,MAAM,EACNjP,WAAY,uCACZof,WAAY,QACZhQ,gBAAgB,EAChBiQ,OAAQ,gBACRC,eAAe,EACfC,SAAU,cACVC,gBAAiB,YACjBn9B,YAAa,QAEjB,CACIuF,KAAM,OACN/D,KAAM,UACNF,IAAK,aACLqG,SAAU,OACVrD,MAAO,8BACPo4B,MAAO,OACPC,MAAO,iKACPn1B,WAAY,EACZo1B,QAAS,0BACT/Z,SAAU,UACVga,UAAU,EACVhQ,SAAS,EACTiQ,QAAQ,EACRlQ,MAAM,EACNjP,WAAY,uCACZof,WAAY,QACZhQ,gBAAgB,EAChBiQ,OAAQ,gBACRC,eAAe,EACfC,SAAU,cACVC,gBAAiB,YACjBn9B,YAAa,QAEjB,CACIuF,KAAM,UACN/D,KAAM,OACNF,IAAK,mBACL6f,KAAM,mBACNxZ,SAAU,UACVrD,MAAO,8BACPo4B,MAAO,OACPC,MAAO,iKACPn1B,WAAY,EACZo1B,QAAS,0BACT/Z,SAAU,UACVga,UAAU,EACVhQ,SAAS,EACTiQ,QAAQ,EACRlQ,MAAM,EACNjP,WAAY,uCACZof,WAAY,QACZhQ,gBAAgB,EAChBiQ,OAAQ,gBACRC,eAAe,EACfC,SAAU,cACVC,gBAAiB,YACjBn9B,YAAa,QAEjB,CACIuF,KAAM,YACN/D,KAAM,MACNF,IAAK,uBACL6f,KAAM,uBACNxZ,SAAU,YACVrD,MAAO,8BACPo4B,MAAO,OACPC,MAAO,iKACPn1B,WAAY,EACZo1B,QAAS,0BACT/Z,SAAU,UACVga,UAAU,EACVhQ,SAAS,EACTiQ,QAAQ,EACRlQ,MAAM,EACNjP,WAAY,uCACZof,WAAY,QACZhQ,gBAAgB,EAChBiQ,OAAQ,gBACRC,eAAe,EACfC,SAAU,cACVC,gBAAiB,YACjBn9B,YAAa,QAEjB,CACIuF,KAAM,SACN/D,KAAM,gBACNF,IAAK,iBACL6f,KAAM,iBACNxZ,SAAU,SACVrD,MAAO,8BACPo4B,MAAO,OACPC,MAAO,iKACPn1B,WAAY,EACZo1B,QAAS,0BACT/Z,SAAU,UACVga,UAAU,EACVhQ,SAAS,EACTiQ,QAAQ,EACRlQ,MAAM,EACNjP,WAAY,uCACZof,WAAY,QACZhQ,gBAAgB,EAChBiQ,OAAQ,gBACRC,eAAe,EACfC,SAAU,cACVC,gBAAiB,YACjBn9B,YAAa,QAEjB,CACIuF,KAAM,uBACN/D,KAAM,cACNF,IAAK,kCACL6f,KAAM,kCACNxZ,SAAU,YACVrD,MAAO,8BACPo4B,MAAO,OACPC,MAAO,iKACPn1B,WAAY,EACZo1B,QAAS,0BACT/Z,SAAU,UACVga,UAAU,EACVhQ,SAAS,EACTiQ,QAAQ,EACRlQ,MAAM,EACNjP,WAAY,uCACZof,WAAY,QACZhQ,gBAAgB,EAChBiQ,OAAQ,gBACRC,eAAe,EACfC,SAAU,cACVC,gBAAiB,YACjBn9B,YAAa,QAEjB,CACIuF,KAAM,qBACN/D,KAAM,aACNF,IAAK,6BACL6f,KAAM,6BACNxZ,SAAU,SACVrD,MAAO,8BACPo4B,MAAO,OACPC,MAAO,iKACPn1B,WAAY,EACZo1B,QAAS,0BACT/Z,SAAU,UACVga,UAAU,EACVhQ,SAAS,EACTiQ,QAAQ,EACRlQ,MAAM,EACNjP,WAAY,uCACZof,WAAY,QACZhQ,gBAAgB,EAChBiQ,OAAQ,gBACRC,eAAe,EACfC,SAAU,cACVC,gBAAiB,YACjBn9B,YAAa,SAIRo9B,QAAU,KAAM,CACzBC,eAAgB,CACZ5P,QAAS,CACL,gBACA,UACA,eAAAC,YACAF,gBACA,oBACA,mBACA,eAEJ/zB,UAAW,CACP,CACIC,QAAS8oB,gBACT8a,SAAU,CACN7a,eAAc,KACH,EAAA/hB,GAAAA,IAAG,CACN,CACI68B,iCAAkC,CAC9Bza,MAAO,gFACP0a,SAAU,YACVj4B,KAAM,oBAGf1F,MAAK,EAAA49B,MAAA,GAAM,QAI1B,CACI/jC,QAASqF,mBACTu+B,SAAU,CACNl+B,gBAAe,CAACC,OAAS,MACd,EAAAqB,GAAAA,IACHrB,OACMo9B,gBAAgBp9B,QAAQ6F,MACpBA,KAAKK,KAAK6K,MAAM,IAAItG,OAAOzK,OAAQ,QAEvCo9B,iBAGd18B,eAAc,CAAC7B,KAAMmB,OAAS,KACb,UAATnB,MACO,EAAAwC,GAAAA,IAAG,IAAIb,MAAK,EAAA49B,MAAA,GAAM,OAGtB,EAAA/8B,GAAAA,IACHrB,OACMo9B,gBAAgBp9B,QAAQ6F,MACpBA,KAAKZ,MAAM8L,MAAM,IAAItG,OAAOzK,OAAQ,QAExCo9B,iBAGdp8B,qBAAoB,EAAC,WACV,EAAAK,GAAAA,IACH+7B,gBAAgBp9B,QAAQ6F,MACpBA,KAAK5D,IAAI8O,MAAM,IAAItG,OAAOzK,OAAQ,SAExCQ,MAAK,EAAAmsB,aAAA,GAAa,QAIhC,CACItyB,QAAS6G,mBACT+8B,SAAU,CACN98B,aAAY,KACD,EAAAE,GAAAA,IAAG,CACN,EAAG,CACC0X,QAAS,gBACTvQ,YAAa,KACb61B,iBAAiB,EACjB/nC,GAAI,EACJ2R,SAAU,UACVM,aAAc,MAElB,EAAG,CACCwQ,QAAS,SACTvQ,YAAa,KACb61B,iBAAiB,EACjB/nC,GAAI,EACJ2R,SAAU,UACVM,aAAc,WAQtC+1B,gBAAiB,CACbz5B,qBACA5F,yBACA6J,sBACA8X,qBACAC,oBACAK,gBACAiK,8BAGR3vB,UAAWwgC,slFChTf,SAASuC,QAAQtB,OAAQuB,gBAAkB,IAAI3nC,KAAOE,OAAOF,KAAKomC,QAAS,GAAIlmC,OAAO0nC,sBAAuB,CAAE,IAAIC,QAAU3nC,OAAO0nC,sBAAsBxB,QAASuB,iBAAmBE,QAAUA,QAAQ1+B,QAAO,SAAU2+B,KAAO,OAAO5nC,OAAO6nC,yBAAyB3B,OAAQ0B,KAAKE,UAApF,KAAqGhoC,KAAK0sB,KAAKsG,MAAMhzB,KAAM6nC,QAAW,CAAC,OAAO7nC,IAAO,CAIrV,SAASioC,gBAAgBp9B,IAAK/E,IAAKlE,OAAiK,OAApJkE,OAAO+E,IAAO3K,OAAOgoC,eAAer9B,IAAK/E,IAAK,CAAElE,MAAcomC,YAAY,EAAMG,cAAc,EAAMC,UAAU,IAAkBv9B,IAAI/E,KAAOlE,MAAgBiJ,GAAM,ECHjN,WAAY,GAAG,oBAAqBsI,aAAQ,IAASA,OAAOk1B,cAAS,IAASl1B,OAAOm1B,eAAe,CAAC,IAAI3rB,EAAE4rB,YAAYp1B,OAAOo1B,YAAY,WAAW,OAAOF,QAAQG,UAAU7rB,EAAE,GAAGpb,KAAKT,YAAjE,EAA+EynC,YAAYE,UAAU9rB,EAAE8rB,UAAUF,YAAYE,UAAU3nC,YAAYynC,YAAYroC,OAAOwoC,eAAeH,YAAY5rB,EAAG,CAA3T,ICQ6B,SAAvBgsB,qBAAwBC,IAAKjmC,SACX,oBAAXwQ,OAA+B3S,QAAQL,UALnC,SAAX0oC,WACF,OAAOC,EAAAA,eAAAA,IADX,CAMSD,GAAWpoC,MAAK,WACvB,OAAOsoC,EAAAA,eAAAA,GAAc,CAAC,CAAC,gBAAgB,CAAC,CAAC,EAAE,gBAAgB,CAAC,MAAQ,CAAC,IAAI,MAAQ,CAAC,MAAM,SAAW,CAAC,IAAI,WAAa,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,SAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC,EAAE,kBAAkB,CAAC,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,YAAc,CAAC,MAAM,KAAO,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,EAAE,oBAAoB,kBAAoB,CAAC,EAAE,sBAAsB,qBAAuB,CAAC,EAAE,4BAA4B,0BAA4B,CAAC,EAAE,gCAAgC,SAAW,CAAC,KAAK,OAAS,CAAC,MAAM,cAAgB,CAAC,KAAK,mBAAmB,YAAc,CAAC,IAAI,gBAAgB,aAAe,CAAC,KAAK,iBAAiB,iBAAmB,CAAC,KAAK,sBAAsB,gBAAkB,CAAC,KAAK,qBAAqB,OAAS,CAAC,IAAI,MAAQ,CAAC,IAAI,WAAa,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,qBAAqB,CAAC,EAAE,WAAW,kBAAkB,CAAC,EAAE,YAAY,mBAAmB,CAAC,EAAE,OAAO,cAAc,CAAC,EAAE,SAAS,oBAAoB,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,aAAe,CAAC,EAAE,kBAAkB,WAAa,CAAC,IAAI,eAAe,YAAc,CAAC,IAAI,gBAAgB,OAAS,CAAC,IAAI,SAAW,CAAC,KAAK,OAAS,CAAC,IAAI,aAAe,CAAC,IAAI,qBAAuB,CAAC,KAAK,CAAC,CAAC,EAAE,iBAAiB,iBAAiB,CAAC,EAAE,kBAAkB,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,EAAE,gBAAgB,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,IAAI,oBAAoB,qBAAuB,CAAC,IAAI,0BAA0B,SAAW,CAAC,KAAK,WAAa,CAAC,IAAI,eAAe,mBAAqB,CAAC,IAAI,wBAAwB,qBAAuB,CAAC,IAAI,0BAA0B,aAAe,CAAC,IAAI,kBAAkB,eAAiB,CAAC,IAAI,oBAAoB,mBAAqB,CAAC,IAAI,yBAAyB,gBAAkB,CAAC,IAAI,qBAAqB,0BAA4B,CAAC,IAAI,iCAAiC,UAAY,CAAC,IAAI,cAAc,iBAAmB,CAAC,IAAI,OAAS,CAAC,IAAI,MAAQ,CAAC,IAAI,MAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,qBAAqB,CAAC,EAAE,UAAU,uBAAuB,CAAC,EAAE,MAAM,kBAAkB,CAAC,EAAE,aAAa,yBAAyB,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,YAAc,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,IAAI,oBAAoB,SAAW,CAAC,KAAK,UAAY,CAAC,KAAK,SAAW,CAAC,KAAK,KAAO,CAAC,IAAI,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,SAAW,CAAC,MAAM,gBAAkB,CAAC,IAAI,oBAAoB,kBAAoB,CAAC,IAAI,sBAAsB,SAAW,CAAC,MAAM,IAAM,CAAC,MAAM,IAAM,CAAC,MAAM,KAAO,CAAC,MAAM,WAAa,CAAC,IAAI,oBAAsB,CAAC,IAAI,MAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,kBAAkB,mBAAmB,CAAC,EAAE,mBAAmB,wBAAwB,CAAC,gBAAgB,CAAC,CAAC,EAAE,gBAAgB,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,IAAI,oBAAoB,kBAAoB,CAAC,IAAI,sBAAsB,SAAW,CAAC,KAAK,IAAM,CAAC,MAAM,IAAM,CAAC,MAAM,KAAO,CAAC,MAAM,UAAY,CAAC,IAAI,cAAc,UAAY,CAAC,IAAI,cAAc,WAAa,CAAC,IAAI,oBAAsB,CAAC,IAAI,MAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,kBAAkB,mBAAmB,CAAC,EAAE,mBAAmB,wBAAwB,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,IAAI,oBAAoB,kBAAoB,CAAC,IAAI,sBAAsB,SAAW,CAAC,KAAK,IAAM,CAAC,MAAM,IAAM,CAAC,MAAM,KAAO,CAAC,KAAK,WAAa,CAAC,IAAI,oBAAsB,CAAC,IAAI,MAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,kBAAkB,mBAAmB,CAAC,EAAE,mBAAmB,wBAAwB,CAAC,sBAAsB,CAAC,CAAC,EAAE,sBAAsB,CAAC,aAAe,CAAC,EAAE,oBAAoB,YAAc,CAAC,EAAE,iBAAiB,OAAS,CAAC,GAAG,cAAgB,CAAC,EAAE,mBAAmB,eAAiB,CAAC,EAAE,oBAAoB,aAAe,CAAC,IAAI,iBAAmB,CAAC,EAAE,qBAAqB,iBAAmB,CAAC,EAAE,sBAAsB,uBAAyB,CAAC,EAAE,8BAA8B,uBAAyB,CAAC,EAAE,8BAA8B,iBAAmB,CAAC,EAAE,sBAAsB,YAAc,CAAC,IAAI,gBAAkB,CAAC,EAAE,qBAAqB,kBAAoB,CAAC,IAAI,UAAY,CAAC,IAAI,kBAAoB,CAAC,IAAI,gBAAkB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,QAAU,CAAC,KAAK,SAAW,CAAC,KAAK,SAAW,CAAC,MAAM,gBAAkB,CAAC,IAAI,oBAAoB,MAAQ,CAAC,MAAM,SAAW,CAAC,IAAI,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC,EAAE,uBAAuB,CAAC,MAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,EAAE,iBAAiB,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,IAAM,CAAC,KAAK,IAAM,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,IAAI,oBAAoB,SAAW,CAAC,KAAK,cAAgB,CAAC,IAAI,kBAAkB,QAAU,CAAC,MAAM,YAAc,CAAC,IAAI,gBAAgB,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,EAAE,mBAAmB,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,QAAU,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,IAAI,oBAAoB,SAAW,CAAC,KAAK,KAAO,CAAC,KAAK,SAAW,CAAC,IAAI,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,SAAW,CAAC,KAAK,SAAW,CAAC,MAAM,gBAAkB,CAAC,IAAI,oBAAoB,QAAU,CAAC,KAAK,SAAW,CAAC,IAAI,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,EAAE,aAAa,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,QAAU,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAkB,CAAC,IAAI,oBAAoB,SAAW,CAAC,KAAK,SAAW,CAAC,IAAI,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAO,CAAC,KAAK,SAAW,CAAC,MAAM,gBAAkB,CAAC,IAAI,oBAAoB,kBAAoB,CAAC,IAAI,sBAAsB,SAAW,CAAC,MAAM,WAAa,CAAC,KAAK,eAAe,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,EAAE,gBAAgB,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,GAAG,MAAQ,CAAC,KAAK,YAAc,CAAC,MAAM,KAAO,CAAC,KAAK,SAAW,CAAC,MAAM,gBAAkB,CAAC,EAAE,oBAAoB,kBAAoB,CAAC,EAAE,sBAAsB,SAAW,CAAC,MAAM,WAAa,CAAC,KAAK,eAAe,KAAO,CAAC,MAAM,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,MAAQ,CAAC,GAAG,OAAS,CAAC,MAAM,MAAQ,CAAC,MAAM,WAAa,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC,EAAE,2BAA2B,CAAC,YAAc,CAAC,KAAK,KAAO,CAAC,KAAK,MAAQ,CAAC,MAAM,KAAO,CAAC,MAAM,UAAY,CAAC,KAAK,cAAc,WAAa,CAAC,KAAK,eAAe,WAAa,CAAC,KAAK,eAAe,eAAiB,CAAC,IAAI,gBAAkB,CAAC,IAAI,cAAgB,CAAC,IAAI,wBAA0B,CAAC,KAAK,CAAC,CAAC,EAAE,QAAQ,yBAAyB,CAAC,mBAAmB,CAAC,CAAC,EAAE,mBAAmB,CAAC,KAAO,CAAC,GAAG,SAAW,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,MAAQ,CAAC,KAAK,QAAU,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC,EAAE,eAAe,CAAC,IAAM,CAAC,IAAI,aAAe,CAAC,IAAI,oBAAoB,CAAC,EAAE,uBAAuB,CAAC,qBAAqB,CAAC,CAAC,EAAE,mBAAmB,CAAC,SAAW,CAAC,KAAK,YAAc,CAAC,KAAK,UAAY,CAAC,KAAK,WAAa,CAAC,IAAI,eAAe,SAAW,CAAC,KAAK,KAAO,CAAC,MAAM,CAAC,EAAE,WAAW,CAAC,MAAQ,CAAC,KAAK,YAAc,CAAC,IAAI,gBAAgB,SAAW,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC,EAAE,iBAAiB,CAAC,SAAW,CAAC,KAAK,eAAiB,CAAC,IAAI,oBAAoB,eAAiB,CAAC,IAAI,mBAAmB,iBAAmB,CAAC,IAAI,qBAAqB,SAAW,CAAC,IAAI,aAAa,WAAa,CAAC,IAAI,eAAe,yBAA2B,CAAC,IAAI,+BAA+B,UAAY,CAAC,IAAI,cAAc,OAAS,CAAC,IAAI,qBAAuB,CAAC,MAAM,CAAC,EAAE,kBAAkB,CAAC,MAAQ,CAAC,IAAI,SAAW,CAAC,KAAK,YAAc,CAAC,IAAI,gBAAgB,aAAe,CAAC,IAAI,qBAAqB,CAAC,kBAAkB,CAAC,CAAC,EAAE,kBAAkB,CAAC,OAAS,CAAC,IAAI,aAAe,CAAC,IAAI,sBAAsB,CAAC,4BAA4B,CAAC,CAAC,EAAE,0BAA0B,CAAC,SAAW,CAAC,KAAK,aAAa,WAAa,CAAC,KAAK,eAAe,YAAc,CAAC,IAAI,kBAAkB,CAAC,EAAE,wBAAwB,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,YAAc,CAAC,KAAK,SAAW,CAAC,KAAK,OAAS,CAAC,KAAK,SAAW,CAAC,KAAK,OAAS,CAAC,MAAM,CAAC,EAAE,2BAA2B,CAAC,KAAO,CAAC,KAAK,SAAW,CAAC,KAAK,OAAS,CAAC,KAAK,SAAW,CAAC,KAAK,cAAgB,CAAC,IAAI,mBAAmB,YAAc,CAAC,IAAI,oBAAoB,CAAC,qBAAqB,CAAC,CAAC,EAAE,qBAAqB,CAAC,MAAQ,CAAC,MAAM,KAAO,CAAC,KAAK,SAAW,CAAC,KAAK,SAAW,CAAC,KAAK,IAAM,CAAC,KAAK,IAAM,CAAC,KAAK,KAAO,CAAC,KAAK,KAAO,CAAC,KAAK,OAAS,CAAC,IAAI,MAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,EAAE,sBAAsB,CAAC,KAAO,CAAC,IAAI,cAAgB,CAAC,EAAE,kBAAkB,SAAW,CAAC,EAAE,aAAa,QAAU,CAAC,MAAM,SAAW,CAAC,IAAI,SAAW,CAAC,MAAM,CAAC,EAAE,2BAA2B,CAAC,OAAS,CAAC,KAAK,MAAQ,CAAC,KAAK,IAAM,CAAC,KAAK,SAAW,CAAC,IAAI,aAAa,WAAa,CAAC,IAAI,YAAc,CAAC,MAAM,CAAC,EAAE,iBAAiB,CAAC,MAAQ,CAAC,IAAI,KAAO,CAAC,KAAK,OAAS,CAAC,MAAM,CAAC,EAAE,YAAY,CAAC,QAAU,CAAC,EAAE,YAAY,MAAQ,CAAC,GAAG,KAAO,CAAC,GAAG,SAAW,CAAC,KAAK,CAAC,EAAE,YAAY,CAAC,EAAE,2BAA2B,CAAC,OAAS,CAAC,GAAG,KAAO,CAAC,KAAK,CAAC,EAAE,mBAAmB,CAAC,QAAU,CAAC,IAAI,SAAW,CAAC,EAAE,aAAa,MAAQ,CAAC,IAAI,KAAO,CAAC,IAAI,KAAO,CAAC,MAAM,CAAC,EAAE,sBAAsB,CAAC,KAAO,CAAC,KAAK,KAAO,CAAC,OAAO,CAAC,EAAE,cAAc,CAAC,QAAU,CAAC,GAAG,IAAM,CAAC,GAAG,MAAQ,CAAC,GAAG,SAAW,CAAC,QAASpmC,QAD9+R,GAFT,CCPAgmC,GHOAzoC,OAAOF,KAAKgH,yBAAQnB,SAAQ,SAAUC,KACpC,IAAIlE,MAAQoF,wBAAOlB,KAEnB,OAAQA,KACN,IAAK,OAED,OAAOkjC,EAAAA,UAAAA,IAAQpnC,OAGnB,IAAK,WAED,OAAOqnC,EAAAA,UAAAA,IAAYrnC,OAGvB,IAAK,aAED,OAAOA,MAAMiE,SAAQ,SAAUqjC,WAC7B,OAAOC,EAAAA,UAAAA,IAAaD,WAAW,EAD1B,IAKX,IAAK,UAED,OAAOtnC,MAAMiE,SAAQ,SAAUujC,QAC7B,OAAOC,EAAAA,UAAAA,IAAUD,QAAQ,EADpB,IAKX,IAAK,aAED,OAAOE,EAAAA,UAAAA,IArCf,SAASC,cAAcj5B,QAAU,IAAK,IAAIgW,EAAI,EAAGA,EAAIkjB,UAAUh+B,OAAQ8a,IAAK,CAAE,IAAIjP,OAAS,MAAQmyB,UAAUljB,GAAKkjB,UAAUljB,GAAK,CAAC,EAAGA,EAAI,EAAIohB,QAAQxnC,OAAOmX,SAAS,GAAIxR,SAAQ,SAAUC,KAAOmiC,gBAAgB33B,OAAQxK,IAAKuR,OAAOvR,KAAzF,IAAqG5F,OAAOupC,0BAA4BvpC,OAAOwpC,iBAAiBp5B,OAAQpQ,OAAOupC,0BAA0BpyB,SAAWqwB,QAAQxnC,OAAOmX,SAASxR,SAAQ,SAAUC,KAAO5F,OAAOgoC,eAAe53B,OAAQxK,IAAK5F,OAAO6nC,yBAAyB1wB,OAAQvR,KAA5H,GAAwI,CAAC,OAAOwK,MAAS,CAqC7di5B,CAAc,CAAC,EAAG3nC,QAAQ,GAGnD,IAAK,oBAED,OAAOA,MAAMiE,SAAQ,SAAU8jC,UAC7B,OAAOC,EAAAA,UAAAA,IAAoBD,SADtB,IAKX,IAAK,gBAED,OAAO/nC,MAAMiE,SAAQ,SAAU8jC,UAC7B,OAAOE,EAAAA,UAAAA,IAAgBF,SADlB,IAKX,IAAK,SAED,OAAOG,EAAAA,UAAAA,IAAgBloC,OAG3B,IAAK,UACL,IAAK,cAED,IAAImoC,EAAI,CAAC,EAET,OADAA,EAAEjkC,KAAOlE,OACF0nC,EAAAA,UAAAA,IAAcS,GAAG,GAG5B,IAAK,sBACL,IAAK,gBACL,IAAK,cAED,OAAO,KAGX,QAGI,OAAO11B,QAAQ21B,IAAIlkC,IAAM,2BAtEjC,o0nBITA,IAEImkC,QACAC,WACAC,YACAC,oBAAqB,EACrBC,6BAA8B,EAC9BC,mBAAoB,EAEpBC,cAAe,EACb3B,IAAwB,oBAAXz1B,OAAyBA,OAAS,CAAC,EAChD0a,IAAM+a,IAAIvhC,UAAY,CAAEmjC,KAAM,CAAC,GAC/BC,IAAM,CACRC,QAAS,EACTC,eAAgB,GAChBC,IAAK,aAACC,GAAD,OAAOA,GAHJ,EAIRC,IAAK,aAACD,GAAD,OAAOr5B,sBAAsBq5B,EAJ1B,EAKRE,IAAK,aAAChqC,GAAIiqC,UAAWC,SAAUzf,MAA1B,OAAmCzqB,GAAGouB,iBAAiB6b,UAAWC,SAAUzf,KALzE,EAMR0f,IAAK,aAACnqC,GAAIiqC,UAAWC,SAAUzf,MAA1B,OAAmCzqB,GAAG63B,oBAAoBoS,UAAWC,SAAUzf,KAN5E,EAOR2f,GAAI,YAACH,UAAWxf,MAAZ,OAAqB,IAAI4f,YAAYJ,UAAWxf,KAAhD,GAEFsd,eAAiB,SAAjBA,eAAkBiB,GAAD,OAAOvpC,QAAQL,QAAQ4pC,EAA9C,EACMsB,iCAAkD,WAChD,IAEI,OADA,IAAIC,cAC8C,mBAApC,IAAIA,eAAgBC,WAEzB,CAAb,MAAO1rC,GAAM,CACb,OAAO,CANwC,CAAC,GASlD2rC,sBAAwB,SAAxBA,sBAAyBC,IAAKC,QAASC,UAAWC,uBAChDD,WACAA,UAAUrsC,KAAI,eAA2B,iCAAzBusC,MAAyB,SAAlBx8B,KAAkB,SAAZqJ,OAAY,SAC/BpI,OAASw7B,sBAAsBL,IAAKI,OACpCE,QAAUC,kBAAkBN,QAAShzB,QACrC8S,KAAOygB,iBAAiBJ,OAC9BpB,IAAIM,IAAIz6B,OAAQjB,KAAM08B,QAASvgB,OAC9BkgB,QAAQQ,cAAgBR,QAAQQ,eAAiB,IAAIxf,MAAK,kBAAM+d,IAAIS,IAAI56B,OAAQjB,KAAM08B,QAASvgB,KAAhG,GALJ,GAFR,EAWMwgB,kBAAoB,SAApBA,kBAAqBN,QAASS,YAAV,OAAyB,SAAC/tB,IAChD,IAE8B,IAAlBstB,QAAQhB,QAERgB,QAAQU,eAAeD,YAAY/tB,KAGlCstB,QAAQW,kBAAoBX,QAAQW,mBAAqB,IAAI3f,KAAK,CAACyf,WAAY/tB,IAM3F,CAFD,MAAOve,GACHysC,aAAazsC,EAChB,CAdqB,CAA1B,EAgBMisC,sBAAwB,SAAxBA,sBAAyBL,IAAKI,OAChC,OAAY,EAARA,MACOjD,IACJ6C,GAHX,EAMMQ,iBAAmB,SAAnBA,iBAAoBJ,OAAD,OAAyC,IAArB,EAARA,MAArC,EACMU,aAAe,mDAefC,kBAAoB,IAAIC,QACxBC,cAAgB,SAAhBA,cAAiBzC,QAAS0C,QAASC,SACrC,IAAIplC,MAAQqlC,OAAO9nC,IAAIklC,SACnBoB,kCAAoCuB,QAEf,iBADrBplC,MAASA,OAAS,IAAI8jC,eAElB9jC,MAAQmlC,QAGRnlC,MAAM+jC,YAAYoB,SAItBnlC,MAAQmlC,QAEZE,OAAO5jC,IAAIghC,QAASziC,MAdxB,EAiDMslC,aAAe,SAAfA,aAAgBpB,SAClB,IAAMqB,QAAUrB,QAAQsB,UAClBvB,IAAMC,QAAQuB,cACdpB,MAAQkB,QAAQrC,QAChBwC,iBAA6CH,QAAQI,UAlEhD,WAAP,GAmEElD,QAtCO,SAAXmD,SAAYC,mBAAoBN,QAASO,KAAMC,SACjD,IAAItD,QAAUuD,WAAWT,SACnBvlC,MAAQqlC,OAAO9nC,IAAIklC,SAIzB,GADAoD,mBAAqD,KAAhCA,mBAAmB/U,SAAyC+U,mBAAqBxf,IAClGrmB,MACA,GAAqB,iBAAVA,MAAoB,CAC3B6lC,mBAAqBA,mBAAmB7C,MAAQ6C,mBAChD,IACII,SADAC,cAAgBlB,kBAAkBznC,IAAIsoC,oBAErCK,eACDlB,kBAAkBvjC,IAAIokC,mBAAqBK,cAAgB,IAAIC,KAE9DD,cAAcxnB,IAAI+jB,YAGXwD,SAAW5f,IAAIvmB,cAAc,UACpB7E,UAAY+E,MAEzB6lC,mBAAmBO,aAAaH,SAAUJ,mBAAmBxlC,cAAc,SAE3E6lC,eACAA,cAAc5Q,IAAImN,SAhB9B,MAoBUoD,mBAAmBQ,mBAAmB1+B,SAAS3H,SACrD6lC,mBAAmBQ,mBAAnBR,GAAAA,OAAAA,mBAA4CA,mBAAmBQ,oBAA/D,CAAmFrmC,SAG3F,OAAOyiC,OA/BX,CAsCoBmD,CAAS3B,IAAIqC,WAAarC,IAAIqC,WAAarC,IAAIsC,cAAehB,SAClE,GAARlB,QAQAJ,IAAI,QAAUxB,QACdwB,IAAInM,UAAUxC,IAAImN,QAAU,OAEhCiD,iBAjBJ,EAmBMM,WAAa,SAAbA,WAAcQ,IAAKV,MAAN,MAAe,MAASU,IAAIb,SAA/C,EAQMc,UAAY,CAAC,EAEbC,cAAgB,SAAhBA,cAAiBtuC,GAGnB,MAAa,YADbA,SAAWA,IACoB,aAANA,CAH7B,EAgBMirC,EAAI,SAAJA,EAAK5K,SAAUkO,WAA2B,IAC5C,IAAIpiC,MAAQ,KACRjG,IAAM,KACNsoC,SAAW,KACXC,QAAS,EACTC,YAAa,EACXC,cAAgB,GAChBC,KAAO,SAAPA,KAAQC,GACV,IAAK,IAAInoB,EAAI,EAAGA,EAAImoB,EAAEjjC,OAAQ8a,IAC1Bva,MAAQ0iC,EAAEnoB,GACNjH,MAAMgM,QAAQtf,OACdyiC,KAAKziC,OAES,MAATA,OAAkC,kBAAVA,SACxBsiC,OAA6B,mBAAbpO,WAA4BiO,cAAcniC,UAC3DA,MAAQ2iC,OAAO3iC,QAEfsiC,QAAUC,WAEVC,cAAcA,cAAc/iC,OAAS,GAAGmjC,QAAU5iC,MAIlDwiC,cAAc7hB,KAAK2hB,OAASO,SAAS,KAAM7iC,OAASA,OAExDuiC,WAAaD,OAlBzB,EAP4C,sBAAbQ,SAAa,mDAAbA,SAAa,QAAArF,UAAAA,MA8B5C,GADAgF,KAAKK,UACDV,UAAW,CAEPA,UAAUroC,MACVA,IAAMqoC,UAAUroC,KAEhBqoC,UAAU9+B,OACV++B,SAAWD,UAAU9+B,MAGrB,IAAMy/B,UAAYX,UAAUY,WAAaZ,UAAS,MAC9CW,YACAX,UAAS,MACgB,iBAAdW,UACDA,UACA5uC,OAAOF,KAAK8uC,WACT3lC,QAAO,SAACod,GAAD,OAAOuoB,UAAUvoB,EAD3B,IAEGyoB,KAAK,KAG7B,CACD,IAAMC,MAAQL,SAAS3O,SAAU,MAWjC,OAVAgP,MAAMC,QAAUf,UACZI,cAAc/iC,OAAS,IACvByjC,MAAME,WAAaZ,eAGnBU,MAAMG,MAAQtpC,IAGdmpC,MAAMI,OAASjB,SAEZa,KA7DX,EA+DML,SAAW,SAAXA,SAAYpS,IAAKpqB,MACnB,IAAM68B,MAAQ,CACVvE,QAAS,EACT4E,MAAO9S,IACPmS,OAAQv8B,KACRm9B,MAAO,KACPJ,WAAY,KAGZF,QAAgB,KAGhBA,MAAc,KAGdA,OAAe,MAEnB,OAAOA,KAjBX,EAmBMO,KAAO,CAAC,EAURC,YAAc,SAAdA,YAAehE,IAAKiE,WAAYC,SAAUC,SAAUC,MAAOhE,OAC7D,GAAI8D,WAAaC,SAAU,CACvB,IAAIE,OAASC,kBAAkBtE,IAAKiE,YAChCM,GAAKN,WAAW9+B,cACpB,GAAmB,UAAf8+B,WAAwB,CACxB,IAAMpQ,UAAYmM,IAAInM,UAChB2Q,WAAaC,eAAeP,UAC5BQ,WAAaD,eAAeN,UAClCtQ,UAAUtQ,OAAVsQ,MAAAA,UAAS8Q,mBAAWH,WAAW9mC,QAAO,SAACslC,GAAD,OAAOA,IAAM0B,WAAWhhC,SAASs/B,EAAnD,MACpBnP,UAAUxC,IAAVwC,MAAAA,UAAS8Q,mBAAQD,WAAWhnC,QAAO,SAACslC,GAAD,OAAOA,IAAMwB,WAAW9gC,SAASs/B,EAAnD,KALrB,MAOK,GAAmB,UAAfiB,WAAwB,CAGzB,IAAK,IAAMW,QAAQV,SACVC,UAA8B,MAAlBA,SAASS,QAClBA,KAAKlhC,SAAS,KACds8B,IAAIjkC,MAAM8oC,eAAeD,MAGzB5E,IAAIjkC,MAAM6oC,MAAQ,IAKlC,IAAK,IAAMA,SAAQT,SACVD,UAAYC,SAASS,SAAUV,SAASU,SACrCA,MAAKlhC,SAAS,KACds8B,IAAIjkC,MAAMlF,YAAY+tC,MAAMT,SAASS,QAGrC5E,IAAIjkC,MAAM6oC,OAAQT,SAASS,OApBtC,MAyBA,GAAmB,QAAfX,iBAEJ,GAAMI,QACW,MAAlBJ,WAAW,IACO,MAAlBA,WAAW,GAqCV,CAED,IAAMa,UAAYrC,cAAc0B,UAChC,IAAKE,QAAWS,WAA0B,OAAbX,YAAwBC,MACjD,IACI,GAAKpE,IAAI+E,QAAQrhC,SAAS,KAWtBs8B,IAAIiE,YAAcE,aAXU,CAC5B,IAAMa,EAAgB,MAAZb,SAAmB,GAAKA,SAEf,SAAfF,WACAI,QAAS,EAEQ,MAAZH,UAAoBlE,IAAIiE,aAAee,IAC5ChF,IAAIiE,YAAce,EAP1B,CAcS,CAAb,MAAO5wC,GAAM,CAED,MAAZ+vC,WAAiC,IAAbA,UACH,IAAbA,UAAuD,KAAjCnE,IAAInP,aAAaoT,aAEnCjE,IAAIiF,gBAAgBhB,cAIrBI,QAAkB,EAARjE,OAA0BgE,SAAWU,YACtDX,UAAwB,IAAbA,SAAoB,GAAKA,SAEhCnE,IAAIhM,aAAaiQ,WAAYE,UAGxC,MA1DOF,WARkB,MAAlBA,WAAW,GAQEA,WAAW9uC,MAAM,GAEzBmvC,kBAAkBnH,IAAKoH,IAKfA,GAAGpvC,MAAM,GAQTovC,GAAG,GAAKN,WAAW9uC,MAAM,GAEtC+uC,UACAlF,IAAIS,IAAIO,IAAKiE,WAAYC,UAAU,GAEnCC,UACAnF,IAAIM,IAAIU,IAAKiE,WAAYE,UAAU,EAsC9C,CAhHL,EAkHMe,oBAAsB,KACtBT,eAAiB,SAAjBA,eAAkBtuC,OAAD,OAAaA,MAAaA,MAAM2J,MAAMolC,qBAAjB,EAA5C,EACMC,cAAgB,SAAhBA,cAAiBC,SAAUC,SAAUC,UAAWrB,YAIlD,IAAMjE,IAAkC,KAA5BqF,SAASvB,MAAMjX,UAA0CwY,SAASvB,MAAMyB,KAC9EF,SAASvB,MAAMyB,KACfF,SAASvB,MACT0B,cAAiBJ,UAAYA,SAAS3B,SAAYjB,UAClDiD,cAAgBJ,SAAS5B,SAAWjB,UAGtC,IAAKyB,cAAcuB,cACTvB,cAAcwB,eAChBzB,YAAYhE,IAAKiE,WAAYuB,cAAcvB,iBAAalrB,EAAWusB,UAAWD,SAASpG,SAKnG,IAAKgF,cAAcwB,cACfzB,YAAYhE,IAAKiE,WAAYuB,cAAcvB,YAAawB,cAAcxB,YAAaqB,UAAWD,SAASpG,QAnB/G,EAsBMyG,UAAY,SAAZA,UAAaC,eAAgBC,eAAgBC,WAAYC,WAE3D,IAEI9F,IACA+F,UACAC,SAJE7C,SAAWyC,eAAelC,WAAWmC,YACvChrB,EAAI,EAmBR,GAfK8jB,qBAEDE,mBAAoB,EACG,SAAnBsE,SAASU,QACLrF,SAEAsH,UAAUjS,UAAUxC,IAAImN,QAAU,MAEtC2E,SAASlE,SAAWkE,SAASO,WAErB,EAEA,IAGQ,OAApBP,SAASD,OAETlD,IAAMmD,SAASW,MAAQ1hB,IAAI6jB,eAAe9C,SAASD,aAElD,GAAuB,EAAnBC,SAASlE,QAEde,IAAMmD,SAASW,MACX1hB,IAAI6jB,eAAe,SAgBvB,GAZAjG,IAAMmD,SAASW,MAAS1hB,IAAIvmB,cAAiC,EAAnBsnC,SAASlE,QACzC,UACAkE,SAASU,OAGfsB,cAAc,KAAMhC,SAnbhB,OAsJF,SAAR+C,MAAS5H,GAAD,OAAY,MAALA,CAArB,CA+RY4H,CAAM1H,UAAYwB,IAAI,UAAYxB,SAGlCwB,IAAInM,UAAUxC,IAAK2O,IAAI,QAAUxB,SAEjC2E,SAASO,WACT,IAAK7oB,EAAI,EAAGA,EAAIsoB,SAASO,WAAW3jC,SAAU8a,GAE1CkrB,UAAYL,UAAUC,eAAgBxC,SAAUtoB,EAAGmlB,OAI/CA,IAAI/oC,YAAY8uC,WAuBhC,OAjBI/F,IAAI,QAAUtB,YACVyE,EAAAA,SAASlE,UAETe,IAAI,SAAU,EAEdA,IAAI,QAAUvB,WAEduB,IAAI,QAAUmD,SAASS,QAAU,IAEjCoC,SAAWL,gBAAkBA,eAAejC,YAAciC,eAAejC,WAAWmC,cACpEG,SAASnC,QAAUV,SAASU,OAAS8B,eAAe7B,OAGhEqC,0BAA0BR,eAAe7B,OAAO,IAIrD9D,GA3EX,EA6EMmG,0BAA4B,SAA5BA,0BAA6BL,UAAWM,WAC1CpH,IAAIC,SAAW,EAEf,IADA,IAAMoH,kBAAoBP,UAAUvR,WAC3B1Z,EAAIwrB,kBAAkBtmC,OAAS,EAAG8a,GAAK,EAAGA,IAAK,CACpD,IAAMkrB,UAAYM,kBAAkBxrB,GAChCkrB,UAAU,UAAYrH,aAAeqH,UAAU,UAK/CO,oBAAoBP,WAAW5D,aAAa4D,UAAWQ,cAAcR,YAIrEA,UAAU,QAAQxiB,SAClBwiB,UAAU,aAAUhtB,EACpB8lB,mBAAoB,GAEpBuH,WACAD,0BAA0BJ,UAAWK,UAE5C,CACDpH,IAAIC,UAAW,CAtBnB,EAwBMuH,UAAY,SAAZA,UAAaV,UAAWW,OAAQC,YAAaC,OAAQC,SAAUC,QACjE,IACId,UADAe,aAAiBhB,UAAU,SAAWA,UAAU,QAAQlS,YAAekS,UAK3E,IAHIgB,aAAazE,YAAcyE,aAAa/B,UAAYrG,cACpDoI,aAAeA,aAAazE,YAEzBuE,UAAYC,SAAUD,SACrBD,OAAOC,YACPb,UAAYL,UAAU,KAAMgB,YAAaE,SAAUd,cAE/Ca,OAAOC,UAAU9C,MAAQiC,UACzBe,aAAa3E,aAAa4D,UAAWQ,cAAcE,SAXnE,EAgBMM,aAAe,SAAfA,aAAgBJ,OAAQC,SAAUC,OAAQrD,MAAOxD,KACnD,KAAO4G,UAAYC,SAAUD,UACpBpD,MAAQmD,OAAOC,aAChB5G,IAAMwD,MAAMM,MAIRlF,6BAA8B,EAC1BoB,IAAI,QAEJA,IAAI,QAAQzc,SAKZ4iB,0BAA0BnG,KAAK,GAIvCA,IAAIzc,SAnBhB,EAuBMyjB,eAAiB,SAAjBA,eAAkBlB,UAAWmB,MAAO9D,SAAU+D,OAahD,IAZA,IAUIpsC,KACAqsC,UAXAC,YAAc,EACdC,YAAc,EACdC,SAAW,EACXzsB,EAAI,EACJ0sB,UAAYN,MAAMlnC,OAAS,EAC3BynC,cAAgBP,MAAM,GACtBQ,YAAcR,MAAMM,WACpBG,UAAYR,MAAMnnC,OAAS,EAC3B4nC,cAAgBT,MAAM,GACtBU,YAAcV,MAAMQ,WAGjBN,aAAeG,WAAaF,aAAeK,WAC9C,GAAqB,MAAjBF,cAEAA,cAAgBP,QAAQG,kBAEvB,GAAmB,MAAfK,YACLA,YAAcR,QAAQM,gBAErB,GAAqB,MAAjBI,cACLA,cAAgBT,QAAQG,kBAEvB,GAAmB,MAAfO,YACLA,YAAcV,QAAQQ,gBAErB,GAAIG,YAAYL,cAAeG,eAChCG,MAAMN,cAAeG,eACrBH,cAAgBP,QAAQG,aACxBO,cAAgBT,QAAQG,kBAEvB,GAAIQ,YAAYJ,YAAaG,aAC9BE,MAAML,YAAaG,aACnBH,YAAcR,QAAQM,WACtBK,YAAcV,QAAQQ,gBAErB,GAAIG,YAAYL,cAAeI,aAEH,SAAxBJ,cAAc3D,OAA0C,SAAtB+D,YAAY/D,OAC/CsC,0BAA0BqB,cAAc1D,MAAMlQ,YAAY,GAE9DkU,MAAMN,cAAeI,aACrB9B,UAAU3D,aAAaqF,cAAc1D,MAAO2D,YAAY3D,MAAMiE,aAC9DP,cAAgBP,QAAQG,aACxBQ,YAAcV,QAAQQ,gBAErB,GAAIG,YAAYJ,YAAaE,eAED,SAAxBH,cAAc3D,OAA0C,SAAtB+D,YAAY/D,OAC/CsC,0BAA0BsB,YAAY3D,MAAMlQ,YAAY,GAE5DkU,MAAML,YAAaE,eACnB7B,UAAU3D,aAAasF,YAAY3D,MAAO0D,cAAc1D,OACxD2D,YAAcR,QAAQM,WACtBI,cAAgBT,QAAQG,iBAEvB,CAIG,IAFJC,UAAY,EAEHzsB,EAAIusB,YAAavsB,GAAK0sB,YAAa1sB,EACpC,GAAIosB,MAAMpsB,IAAyB,OAAnBosB,MAAMpsB,GAAG8oB,OAAkBsD,MAAMpsB,GAAG8oB,QAAUgE,cAAchE,MAAO,CAC/E2D,SAAWzsB,EACX,KACH,CAGLysB,UAAY,IACZH,UAAYF,MAAMK,WACJzD,QAAU8D,cAAc9D,MAClC/oC,KAAO4qC,UAAUuB,OAASA,MAAMI,aAAclE,SAAUmE,SAAUxB,YAGlEgC,MAAMX,UAAWQ,eACjBV,MAAMK,eAAYvuB,EAClBje,KAAOqsC,UAAUrD,OAErB6D,cAAgBT,QAAQG,eAIxBvsC,KAAO4qC,UAAUuB,OAASA,MAAMI,aAAclE,SAAUkE,YAAavB,WACrE6B,cAAgBT,QAAQG,cAExBvsC,MAEIwrC,oBAAoBkB,cAAc1D,OAAO3B,aAAarnC,KAAMyrC,cAAciB,cAAc1D,OAGnG,CAEDsD,YAAcG,UACdf,UAAUV,UAAmC,MAAxBoB,MAAMQ,UAAY,GAAa,KAAOR,MAAMQ,UAAY,GAAG5D,MAAOX,SAAU+D,MAAOG,YAAaK,WAEhHL,YAAcK,WACnBX,aAAaE,MAAOG,YAAaG,UAhGzC,EAmGMM,YAAc,SAAdA,YAAeG,OAAQC,QAGzB,OAAID,OAAOnE,QAAUoE,OAAOpE,QACH,SAAjBmE,OAAOnE,MACAmE,OAAOpE,SAAWqE,OAAOrE,OAGzBoE,OAAOrE,QAAUsE,OAAOtE,MAR3C,EAaM4C,cAAgB,SAAhBA,cAAiBzrC,MAKnB,OAAQA,MAAQA,KAAK,SAAYA,IALrC,EAOMwrC,oBAAsB,SAAtBA,oBAAuBxrC,MAAD,OAAWA,KAAK,QAAUA,KAAK,QAAUA,MAAM84B,UAA3E,EACMkU,MAAQ,SAARA,MAAS9B,SAAU7C,UACrB,IAKI+E,cALElI,IAAOmD,SAASW,MAAQkC,SAASlC,MACjCqE,YAAcnC,SAAStC,WACvB0E,YAAcjF,SAASO,WACvB3S,IAAMoS,SAASU,MACfl9B,KAAOw8B,SAASD,OAET,OAATv8B,MAGgB,SAARoqB,KAMAoU,cAAca,SAAU7C,SAjqBxB,OAoqBY,OAAhBgF,aAAwC,OAAhBC,YAExBpB,eAAehH,IAAKmI,YAAahF,SAAUiF,aAEtB,OAAhBA,aAEmB,OAApBpC,SAAS9C,SAETlD,IAAIpT,YAAc,IAGtB4Z,UAAUxG,IAAK,KAAMmD,SAAUiF,YAAa,EAAGA,YAAYroC,OAAS,IAE/C,OAAhBooC,aAELpB,aAAaoB,YAAa,EAAGA,YAAYpoC,OAAS,KAGhDmoC,cAAgBlI,IAAI,SAE1BkI,cAActU,WAAWhH,YAAcjmB,KAElCq/B,SAAS9C,SAAWv8B,OAGzBq5B,IAAIpjC,KAAO+J,KA5CnB,EA+CM0hC,6BAA+B,SAA/BA,6BAAgCrI,KAElC,IACI+F,UACAlrB,EACAytB,KACAC,EACAC,aACA3b,SANE0H,WAAayL,IAAIzL,WAOvB,IAAK1Z,EAAI,EAAGytB,KAAO/T,WAAWx0B,OAAQ8a,EAAIytB,KAAMztB,IAE5C,GAA2B,KAD3BkrB,UAAYxR,WAAW1Z,IACTgS,SAAkC,CAC5C,GAAIkZ,UAAU,QAOV,IAJAyC,aAAezC,UAAU,QAGzBA,UAAU0C,QAAS,EACdF,EAAI,EAAGA,EAAID,KAAMC,IAElB,GADA1b,SAAW0H,WAAWgU,GAAG1b,SACrB0H,WAAWgU,GAAG,UAAYxC,UAAU,SAA4B,KAAjByC,cAE/C,GAAiB,IAAb3b,UAAoC2b,eAAiBjU,WAAWgU,GAAG1X,aAAa,QAAS,CACzFkV,UAAU0C,QAAS,EACnB,KACH,OAMD,GAAiB,IAAb5b,UACc,IAAbA,UAAsE,KAArC0H,WAAWgU,GAAG3b,YAAYxnB,OAAgB,CAC5E2gC,UAAU0C,QAAS,EACnB,KACH,CAKbJ,6BAA6BtC,UAChC,CA1CT,EA6CM2C,cAAgB,GAChBC,oBAAsB,SAAtBA,oBAAuB3I,KAWzB,IATA,IAAI+F,UACAjrC,KACA8tC,iBACAJ,aACAK,iBACAN,EACA1tB,EAAI,EACF0Z,WAAayL,IAAIzL,WACjB+T,KAAO/T,WAAWx0B,OACjB8a,EAAIytB,KAAMztB,IAAK,CAElB,IADAkrB,UAAYxR,WAAW1Z,IACT,UAAY/f,KAAOirC,UAAU,UAAYjrC,KAAK84B,WAKxD,IAFAgV,iBAAmB9tC,KAAK84B,WAAWW,WACnCiU,aAAezC,UAAU,QACpBwC,EAAIK,iBAAiB7oC,OAAS,EAAGwoC,GAAK,EAAGA,KAC1CztC,KAAO8tC,iBAAiBL,IACd,SAAYztC,KAAK,SAAWA,KAAK,UAAYirC,UAAU,UAIzD+C,oBAAoBhuC,KAAM0tC,eAE1BK,iBAAmBH,cAAcnX,MAAK,SAACwX,GAAD,OAAOA,EAAEC,mBAAqBluC,IAAjD,IAInB8jC,6BAA8B,EAC9B9jC,KAAK,QAAUA,KAAK,SAAW0tC,aAC3BK,iBAGAA,iBAAiBI,cAAgBlD,UAIjC2C,cAAcznB,KAAK,CACfgoB,cAAelD,UACfiD,iBAAkBluC,OAGtBA,KAAK,SACL4tC,cAAc70C,KAAI,SAACq1C,cACXJ,oBAAoBI,aAAaF,iBAAkBluC,KAAK,WACxD+tC,iBAAmBH,cAAcnX,MAAK,SAACwX,GAAD,OAAOA,EAAEC,mBAAqBluC,IAAjD,OACMouC,aAAaD,gBAClCC,aAAaD,cAAgBJ,iBAAiBI,cAJ1D,KAUEP,cAAcS,MAAK,SAACJ,GAAD,OAAOA,EAAEC,mBAAqBluC,IAAjD,KAGN4tC,cAAcznB,KAAK,CACf+nB,iBAAkBluC,QAMX,IAAvBirC,UAAUlZ,UACV8b,oBAAoB5C,UAE3B,CApEL,EAsEM+C,oBAAsB,SAAtBA,oBAAuBM,eAAgBZ,cACzC,OAAgC,IAA5BY,eAAevc,SAC6B,OAAxCuc,eAAevY,aAAa,SAAqC,KAAjB2X,cAGhDY,eAAevY,aAAa,UAAY2X,aAK5CY,eAAe,UAAYZ,cAGP,KAAjBA,YAbX,EAeMa,WAAa,SAAbA,WAAcpJ,QAASqJ,iBACzB,IAAMxH,QAAU7B,QAAQuB,cAClBF,QAAUrB,QAAQsB,UAClByE,SAAW/F,QAAQsJ,SAAWpG,SAAS,KAAM,MAC7CqG,UA7kBK,SAATC,OAAU3uC,MAAD,OAAUA,MAAQA,KAAK+oC,QAAUE,IAAhD,CA6kBsB0F,CAAOH,iBAAmBA,gBAAkBlK,EAAE,KAAM,KAAMkK,iBAyBxE,GAxBJ5K,YAAcoD,QAAQiD,QAClBzD,QAAQoI,mBACRF,UAAU/F,QAAU+F,UAAU/F,SAAW,CAAC,EAC1CnC,QAAQoI,iBAAiB71C,KAAI,kDAAE81C,SAAF,SAAYC,UAAZ,gBAA4BJ,UAAU/F,QAAQmG,WAAa9H,QAAQ6H,SAAhG,KAEJH,UAAU3F,MAAQ,KAClB2F,UAAUvK,SAAW,EACrBgB,QAAQsJ,QAAUC,UAClBA,UAAU1F,MAAQkC,SAASlC,MAAShC,QAAQO,YAAcP,QAEtDtD,QAAUsD,QAAQ,QAGlBrD,WAAaqD,QAAQ,QACrBnD,mBAA4E,IAApC,EAAlB2C,QAAQrC,SAE9BL,6BAA8B,EAGlCkJ,MAAM9B,SAAUwD,WAIZxK,IAAIC,SAAW,EACXJ,kBAAmB,CAEnB,IAAIgL,aACAT,eACAU,gBACAC,cACAC,iBACAC,QANJtB,oBAAoBa,UAAU1F,OAQ9B,IADA,IAAIjpB,EAAI,EACDA,EAAI6tB,cAAc3oC,OAAQ8a,KAE7BuuB,gBADAS,aAAenB,cAAc7tB,IACCmuB,kBACV,WAGhBc,gBACI1nB,IAAI6jB,eAAe,KACP,QAAUmD,eAC1BA,eAAexV,WAAWuO,aAAciH,eAAe,QAAUU,gBAAkBV,iBAG3F,IAAKvuB,EAAI,EAAGA,EAAI6tB,cAAc3oC,OAAQ8a,IAGlC,GADAuuB,gBADAS,aAAenB,cAAc7tB,IACCmuB,iBAC1Ba,aAAaZ,cAAe,CAM5B,IAHAc,cAAgBF,aAAaZ,cAAcrV,WAC3CoW,iBAAmBH,aAAaZ,cAAclB,YAC9C+B,gBAAkBV,eAAe,QACzBU,gBAAkBA,gBAAgBI,iBAEtC,IADAD,QAAUH,gBAAgB,UACXG,QAAQ,UAAYb,eAAe,SAAWW,gBAAkBE,QAAQrW,eACnFqW,QAAUA,QAAQlC,eACDkC,QAAQ,SAAS,CAC9BD,iBAAmBC,QACnB,KACH,GAGHD,kBAAoBD,gBAAkBX,eAAexV,YACvDwV,eAAerB,cAAgBiC,mBAI3BZ,iBAAmBY,oBACdZ,eAAe,SAAWA,eAAe,UAE1CA,eAAe,QAAUA,eAAe,QAAQxV,WAAWY,UAG/DuV,cAAc5H,aAAaiH,eAAgBY,kBA3BvD,MAiCoC,IAA5BZ,eAAevc,WACfuc,eAAeX,QAAS,EAIvC,CACG7J,6BACAyJ,6BAA6BmB,UAAU1F,OAI3C9E,IAAIC,UAAW,EAEfyJ,cAAc3oC,OAAS,CAnG/B,EAsGMoqC,WAAa,SAAbA,WAAcC,KAAD,OAAUC,WAAWD,KAAK5I,aAA7C,EACM8I,YAAc,SAAdA,YAAeF,IAAKxmC,KAAMw8B,OAC5B,IAAMJ,IAAMmK,WAAWC,KACvB,MAAO,CACH5mC,KAAM,cAAC+mC,QACH,OAAO7f,UAAUsV,IAAKp8B,KAAM,CACxB4mC,WAAoB,EAARpK,OACZqK,YAAqB,EAARrK,OACbsK,cAAuB,EAARtK,OACfmK,QAEP,EAVT,EAoBM7f,UAAY,SAAZA,UAAasV,IAAKp8B,KAAMmc,MAC1B,IAAMpN,GAAKqsB,IAAIU,GAAG97B,KAAMmc,MAExB,OADAigB,IAAI2K,cAAch4B,IACXA,EAHX,EAKMi4B,iBAAmB,SAAnBA,iBAAoB3K,QAAS4K,mBAC3BA,oBAAsB5K,QAAQ6K,mBAAqBD,kBAAkB,QACrEA,kBAAkB,OAAO5pB,KAAK,IAAIlsB,SAAQ,SAACg0C,GAAD,OAAQ9I,QAAQ6K,kBAAoB/B,CAAhD,IAFtC,EAKMgC,eAAiB,SAAjBA,eAAkB9K,QAAS+K,eAI7B,GAFI/K,QAAQhB,SAAW,KAED,EAAlBgB,QAAQhB,SAAZ,CAIA2L,iBAAiB3K,QAASA,QAAQgL,qBAKlC,OAAOC,WADU,SAAXpb,WAAW,OAAMqb,cAAclL,QAAS+K,cAA9C,GALC,CAFG/K,QAAQhB,SAAW,GAL3B,EAeMkM,cAAgB,SAAhBA,cAAiBlL,QAAS+K,eAC5B,IAEII,QAFEC,aAA2CpL,QAAQsB,UAAUG,UA55BxD,WAAP,GA65BE1nC,SAAWimC,QAAQU,eAkBzB,OAhBIqK,gBAEI/K,QAAQhB,SAAW,IACfgB,QAAQW,oBACRX,QAAQW,kBAAkB/sC,KAAI,kDAAE6sC,WAAF,SAAch/B,MAAd,gBAAyB4pC,SAAStxC,SAAU0mC,WAAYh/B,MAAtF,IACAu+B,QAAQW,kBAAoB,MAIhCwK,QAAUE,SAAStxC,SAAU,sBAIjCoxC,QAAUp2C,KAAKo2C,SAAS,kBAAME,SAAStxC,SAAU,sBAAnC,IAElBqxC,cACOr2C,KAAKo2C,SAAS,kBAAMzU,gBAAgBsJ,QAASjmC,SAAUgxC,cAAnD,GApBf,EAsBMrU,gBAAe,mEAAG,iBAAOsJ,QAASjmC,SAAUgxC,eAA1B,4KAEdhL,IAAMC,QAAQuB,cACmBvB,QAAQsB,UAAUG,UAAnD6J,UAp7BK,WAAP,EAq7BEC,GAAKxL,IAAI,QACXgL,eAEA3J,aAAapB,SAEsBA,QAAQsB,UAAUG,UAAnD+J,UA17BK,WAAP,EA47BAC,WAAWzL,QAASjmC,UAEpBwxC,KAIAA,GAAG33C,KAAI,SAAC83C,IAAD,OAAQA,IAAf,IACA3L,IAAI,aAAUjnB,GAElB0yB,YACAF,YAEUK,iBAAmB5L,IAAI,OACvB6L,WAAa,SAAbA,aAAa,OAAMC,oBAAoB7L,QAxB7B,EAyBgB,IAA5B2L,iBAAiB7rC,OACjB8rC,cAGA92C,QAAQG,IAAI02C,kBAAkB52C,KAAK62C,YACnC5L,QAAQhB,SAAW,EACnB2M,iBAAiB7rC,OAAS,GA/Bd,oDAAH,qBAAf42B,gBAAe,mDAmCf+U,WAAa,SAAbA,WAAczL,QAASjmC,SAAUgmC,KACnC,IACIhmC,SAAWA,SAASwyB,SAEhByT,QAAQhB,UAAW,GAGnBgB,QAAQhB,SAAW,EAQXoK,WAAWpJ,QAASjmC,SAOnC,CAFD,MAAO5F,GACHysC,aAAazsC,EAAG6rC,QAAQuB,cAC3B,CACD,OAAO,IAvBX,EAyBMsK,oBAAsB,SAAtBA,oBAAuB7L,SACTA,QAAQsB,UAAUG,UAAlC,IACM1B,IAAMC,QAAQuB,cACduK,cAh/BK,WAAP,EAi/BE/xC,SAAWimC,QAAQU,eACnBkK,kBAAoB5K,QAAQgL,oBACV,GAAlBhL,QAAQhB,SAmBNqM,SAAStxC,SAAU,sBAEvB+xC,kBApBA9L,QAAQhB,SAAW,GAGf+M,gBAAgBhM,KAGhBsL,SAAStxC,SAAU,oBAEvB+xC,gBAEI9L,QAAQgM,iBAAiBjM,KACpB6K,mBACDqB,cAWRjM,QAAQkM,oBAAoBnM,KAKxBC,QAAQ6K,oBACR7K,QAAQ6K,oBACR7K,QAAQ6K,uBAAoB/xB,GAEV,IAAlBknB,QAAQhB,SACRmN,UAAS,kBAAMrB,eAAe9K,SAAS,EAA/B,IAEZA,QAAQhB,UAAW,GA1C3B,EAgDMiN,WAAa,SAAbA,WAAcG,KAIZL,gBAAgB5pB,IAAIkqB,iBAExBF,UAAS,kBAAM1hB,UAAUyS,IAAK,UAAW,CAAEoN,OAAQ,CAAEgC,UAvmCvC,yBAumCN,GANZ,EAQMjB,SAAW,SAAXA,SAAYtxC,SAAUiT,OAAQu/B,KAChC,GAAIxyC,UAAYA,SAASiT,QACrB,IACI,OAAOjT,SAASiT,QAAQu/B,IAI3B,CAFD,MAAOp4C,GACHysC,aAAazsC,EAChB,CAPT,EAWMY,KAAO,SAAPA,KAAQo2C,QAASqB,QACnB,OAAOrB,SAAWA,QAAQp2C,KAAOo2C,QAAQp2C,KAAKy3C,QAAUA,QAD5D,EAGMT,gBAAkB,SAAlBA,gBAAmBhM,KAAD,OAASA,IAAInM,UAAUxC,IAAI,WAAnD,EAkDM5G,SAAW,SAAXA,SAAY2f,IAAKT,SAAU+C,OAAQpL,SAErC,IAAMrB,QAAUoK,WAAWD,KACrBpK,IAAMC,QAAQuB,cACdmL,OAAS1M,QAAQ2M,iBAAiBtzC,IAAIqwC,UACtCvJ,MAAQH,QAAQhB,QAChBjlC,SAAWimC,QAAQU,eACzB+L,OAhCuB,SAArBG,mBAAsBC,UAAWC,UAEnC,OAAiB,MAAbD,WAAsBrK,cAAcqK,WAoBjCA,UAnBY,EAAXC,SAGqB,UAAdD,YAA8C,KAAdA,aAAsBA,WAElD,EAAXC,SAEOC,WAAWF,WAEP,EAAXC,SAGO9J,OAAO6J,WAGXA,SAlBf,CAgCaD,CAAmBH,OAAQpL,QAAQ2L,UAAUtD,UAAU,IAEhE,IAAMuD,WAAatoC,OAAOuoC,MAAMR,SAAW/nC,OAAOuoC,MAAMT,QAExD,MAAe,EAARtM,aAAsDrnB,IAAX4zB,UAD3BD,SAAWC,SAAWO,cAIzCjN,QAAQ2M,iBAAiBpvC,IAAImsC,SAAU+C,QACnC1yC,UAAU,CAEV,GAAIsnC,QAAQ8L,YAAsB,IAARhN,MAAgC,CACtD,IAAMiN,aAAe/L,QAAQ8L,WAAWzD,UACpC0D,cAEAA,aAAax5C,KAAI,SAACy5C,iBACd,IAEItzC,SAASszC,iBAAiBZ,OAAQC,OAAQhD,SAI7C,CAFD,MAAOv1C,GACHysC,aAAazsC,EAAG4rC,IACnB,CAPL,GAUP,CACoE,IAAxD,GAARI,QAKD2K,eAAe9K,SAAS,EAE/B,CAvCT,EA0CMsN,eAAiB,SAAjBA,eAAkBC,KAAMlM,QAASlB,OACnC,GAAIkB,QAAQ2L,UAAW,CACfO,KAAKC,WACLnM,QAAQ8L,WAAaI,KAAKC,UAG9B,IAAMC,QAAUj5C,OAAO0F,QAAQmnC,QAAQ2L,WACjCjQ,UAAYwQ,KAAKxQ,UA6BvB,GA5BA0Q,QAAQ75C,KAAI,gBAAiC,kCAA/BowC,WAA+B,SAAlB0J,YAAkB,8BACtB,GAAdA,aACa,EAARvN,OAA6C,GAAduN,YAErCl5C,OAAOgoC,eAAeO,UAAWiH,WAAY,CACzC3qC,IADyC,eAGrC,OA1DP,SAAX6jB,SAAYitB,IAAKT,UAAN,OAAmBU,WAAWD,KAAKwC,iBAAiBtzC,IAAIqwC,SAAzE,CA0D+BxsB,CAASrnB,KAAMmuC,WAHe,EAKzCzmC,IALyC,aAKrC2mC,UAEA1Z,SAAS30B,KAAMmuC,WAAYE,SAAU7C,QAPA,EASzC5E,cAAc,EACdH,YAAY,IAGH,EAAR6D,OACS,GAAduN,aAEAl5C,OAAOgoC,eAAeO,UAAWiH,WAAY,CACzC9tC,MADyC,iBAC1B,+BAANy3C,KAAM,6CAANA,KAAM,OAAA7P,UAAAA,OACX,IAAMqM,IAAMC,WAAWv0C,MACvB,OAAOs0C,IAAIyD,oBAAoB74C,MAAK,0CAAM,oBAAAo1C,IAAIzJ,gBAAesD,YAAnB,0BAAkC2J,KAArE,GACV,GAxBb,IA4Ba,EAARxN,MAAuC,CACxC,IAAM0N,mBAAqB,IAAIhmC,IAC/Bk1B,UAAU+Q,yBAA2B,SAAUC,SAAUC,UAAW9J,UAAU,eAC1EnF,IAAIG,KAAI,WACJ,IAAMwK,SAAWmE,mBAAmBx0C,IAAI00C,UAkCxC,GAAIE,MAAKC,eAAexE,UACpBxF,SAAW+J,MAAKvE,iBACTuE,MAAKvE,eAEX,GAAI3M,UAAUmR,eAAexE,WACJ,iBAAnBuE,MAAKvE,WACZuE,MAAKvE,WAAaxF,SAIlB,OAEJ+J,MAAKvE,WAAyB,OAAbxF,UAA+C,kBAAnB+J,MAAKvE,YAAkCxF,QA/CxF,GADJ,EAqDAqJ,KAAKY,mBAAqBV,QACrBhwC,QAAO,sEAAmB,GAAnB,UAAc,EAAd,IACP7J,KAAI,iBAAmB,oCAAjB81C,SAAiB,UAAP0E,EAAO,UAClBL,SAAWK,EAAE,IAAM1E,SAKzB,OAJAmE,mBAAmBtwC,IAAIwwC,SAAUrE,UACtB,IAAP0E,EAAE,IACF/M,QAAQoI,iBAAiBzoB,KAAK,CAAC0oB,SAAUqE,WAEtCA,QARe,GAU7B,CACJ,CACD,OAAOR,IAvGX,EAyGMc,oBAAmB,oEAAG,kBAAOtO,IAAKC,QAASqB,QAASiN,aAAcf,MAA5C,+MAEqC,IAAtC,GAAlBvN,QAAQhB,SAFW,CAAAuP,UAAAA,KAAAA,GAAA,SAKhBvO,QAAQhB,SAAW,KAInBuO,KAAOiB,WAAWnN,UACTtsC,KAVO,CAAAw5C,UAAAA,KAAAA,EAAA,aAYNE,QA7vCP,WAAP,EAivCoBF,UAAAA,KAAAA,EAaChB,KAbD,OAaZA,KAbY,eAcZkB,UAdY,OAgBXlB,KAAKmB,YAKFrN,QAAQ8L,WAAaI,KAAKC,SAE9BF,eAAeC,KAAMlM,QAAS,GAC9BkM,KAAKmB,WAAY,GAE+BrN,QAAQI,UAAtDkN,eAlxCH,WAAP,EAuxCQ3O,QAAQhB,SAAW,EAMvB,IACI,IAAIuO,KAAKvN,QAIZ,CAFD,MAAO7rC,GACHysC,aAAazsC,EAChB,CAEG6rC,QAAQhB,UAAW,EAGnBgB,QAAQhB,SAAW,IAEvB2P,iBACAC,sBAAsB5O,QAAQU,gBAE9B6M,KAAKzxC,QAEDA,MAAQyxC,KAAKzxC,MACXyiC,SAAUuD,WAAWT,SACtBF,OAAO3mB,IAAI+jB,YAC2C8C,QAAQI,UAAzDoN,kBAjzCP,WAAP,EAkzCQ7N,cAAczC,SAASziC,SAA4B,EAAlBulC,QAAQrC,UACzC6P,sBA3DY,QAgElBjE,kBAAoB5K,QAAQgL,oBAC5B8D,SAAW,SAAXA,WAAW,OAAMhE,eAAe9K,SAAS,EAjEvB,EAkEpB4K,mBAAqBA,kBAAkB,QAOvCA,kBAAkB,QAAQ5pB,KAAK8tB,UAG/BA,WA5EoB,sDAAH,qBAAnBT,oBAAmB,6DA+EnBO,sBAAwB,SAAxBA,sBAAyB70C,UAEvBsxC,SAAStxC,SAAU,oBAF3B,EAKMg1C,mBAAoB,SAApBA,kBAAqBhP,KACvB,GAAkD,IAA/B,EAAdhB,IAAIC,SAA4C,CACjD,IAAMgB,QAAUoK,WAAWrK,KACrBsB,QAAUrB,QAAQsB,UAClB0N,cAA+C3N,QAAQI,UAh1CtD,WAAP,GAi1CA,GAAwB,EAAlBzB,QAAQhB,QA8CVc,sBAAsBC,IAAKC,QAASqB,QAAQ4N,aAE5CL,sBAAsB5O,QAAQU,oBAhDa,CAE3CV,QAAQhB,SAAW,EAMVqC,GAAAA,QAAQrC,SACTkQ,oBAAoBnP,KAOxB,IADA,IAAI6K,kBAAoB7K,IAChB6K,kBAAoBA,kBAAkBjX,YAAciX,kBAAkBtF,MAG1E,GAAIsF,kBAAkB,OAAQ,CAG1BD,iBAAiB3K,QAAUA,QAAQgL,oBAAsBJ,mBACzD,KACH,CAKLvJ,QAAQ2L,WACRx4C,OAAO0F,QAAQmnC,QAAQ2L,WAAWp5C,KAAI,iBAAiC,oCAA/BowC,WAA+B,UACnE,GAAkB,GADiD,gCAChCjE,IAAImO,eAAelK,YAAa,CAC/D,IAAM9tC,MAAQ6pC,IAAIiE,mBACXjE,IAAIiE,YACXjE,IAAIiE,YAAc9tC,KACrB,CALL,IASAm4C,oBAAoBtO,IAAKC,QAASqB,QAvC1C,CAkDA2N,cACH,CAxDL,EA0DME,oBAAsB,SAAtBA,oBAAuBnP,KAOzB,IAAMoP,cAAiBpP,IAAI,QAAU5d,IAAIitB,cAAc,IACvDD,cAAc,SAAU,EACxBpP,IAAImC,aAAaiN,cAAepP,IAAI5oC,WATxC,EAWMk4C,sBAAuB,SAAvBA,qBAAwBtP,KAC1B,GAAkD,IAA/B,EAAdhB,IAAIC,SAA4C,CACjD,IAAMgB,QAAUoK,WAAWrK,KACrBhmC,SAAWimC,QAAQU,eAEjBV,QAAQQ,gBACRR,QAAQQ,cAAc5sC,KAAI,SAAC07C,YAAD,OAAgBA,YAA1C,IACAtP,QAAQQ,mBAAgB1nB,GAI5BuyB,SAAStxC,SAAU,uBAE1B,CAbL,EAeMsjC,cAAgB,SAAhBA,cAAiBkS,aAA8B,IAS7CC,gBAT4Bv4C,QAAiB,uDAAP,CAAC,EACrCw4C,aAj6CK,WAAP,EAk6CEC,QAAU,GACVC,QAAU14C,QAAQ04C,SAAW,GAC7B/S,eAAiBM,IAAIN,eACrBkC,KAAO3c,IAAI2c,KACX8Q,YAA4B9Q,KAAK3iC,cAAc,iBAC/C0zC,gBAAgC1tB,IAAIvmB,cAAc,SAClDk0C,2BAA6B,GAE/BC,iBAAkB,EACtBv7C,OAAO4K,OAAO2/B,IAAK9nC,SACnB8nC,IAAIE,eAAiB,IAAI+Q,IAAI/4C,QAAQg5C,cAAgB,KAAM9tB,IAAI+tB,SAAS9nC,KACxEmnC,YAAY37C,KAAI,SAACu8C,YACbA,WAAW,GAAGv8C,KAAI,SAACw8C,aACf,IAAM/O,QAAU,CACZrC,QAASoR,YAAY,GACrB3O,UAAW2O,YAAY,GACvBpD,UAAWoD,YAAY,GACvBnB,YAAamB,YAAY,IAGzB/O,QAAQ2L,UAAYoD,YAAY,GAGhC/O,QAAQ4N,YAAcmB,YAAY,GAGlC/O,QAAQoI,iBAAmB,GAG3BpI,QAAQ8L,WAAa,CAAC,EAE1B,IAAMrI,QAAUzD,QAAQI,UAClB4O,YAAW,uBAAAC,UAAAA,YAAAA,cAAA,qCAEb,qBAAYC,MAAM,kBAAAC,gBAAAA,KAAAA,aAGdD,KAAO,uBADPE,OAAAA,OAAAA,KAAAA,KAAMF,OAENG,aAAaH,KAAMlP,SACG,EAAlBA,QAAQrC,SAOAuR,KAAKI,aAAa,CAAE/O,KAAM,SAZxB,MAgBjB,CAlBY,OAAAgP,aAAAA,YAAAA,CAAAA,CAAAx2C,IAAAA,oBAAAlE,MAmBb,SAAA64C,oBAAoB,gBACZS,kBACAqB,aAAarB,iBACbA,gBAAkB,MAElBO,gBAEAD,2BAA2B9uB,KAAKnrB,MAGhCkpC,IAAIG,KAAI,kBAAM6P,mBAAkB+B,OAAhC,GAEP,GA/BY,CAAA12C,IAAAA,uBAAAlE,MAgCb,SAAAm5C,uBAAuB,gBACnBtQ,IAAIG,KAAI,kBAAMmQ,sBAAqB0B,OAAnC,GACH,GAlCY,CAAA32C,IAAAA,mBAAAlE,MAmCb,SAAA86C,mBACI,OAAO5G,WAAWv0C,MAAMo7C,gBAC3B,KArCY,8BAAiBpU,cAuClCwE,QAAQ6P,eAAiBf,WAAW,GAC/BR,QAAQlsC,SAASqhC,UAAalI,eAAevjC,IAAIyrC,WAClD4K,QAAQ1uB,KAAK8jB,SACblI,eAAeuU,OAAOrM,QAASwI,eAAe+C,YAAahP,QAAS,IA9D5E,GADJ,IAoEIwO,gBAAgB94C,UAAY24C,QAAU7O,aACtCgP,gBAAgB9b,aAAa,cAAe,IAC5C+K,KAAKoD,aAAa2N,gBAAiBD,YAAcA,YAAY9H,YAAchJ,KAAK3nC,YAGpF44C,iBAAkB,EACdD,2BAA2BhwC,OAC3BgwC,2BAA2Bl8C,KAAI,SAAC0xC,MAAD,OAAUA,KAAKyJ,mBAA9C,IAIIhQ,IAAIG,KAAI,kBAAOsQ,gBAAkBxtC,WAAWiqC,WAAY,GAAxD,IAIRwD,cAhGJ,EAkGM2B,SAAW,IAAIrQ,QACfqJ,WAAa,SAAbA,WAAcD,KAAD,OAASiH,SAAS/3C,IAAI8wC,IAAzC,EACMkH,iBAAmB,SAAnBA,iBAAoBC,aAActR,SAAf,OAA2BoR,SAAS7zC,IAAKyiC,QAAQU,eAAiB4Q,aAAetR,QAA1G,EACM0Q,aAAe,SAAfA,aAAgB3Q,IAAKsB,SACvB,IAAMrB,QAAU,CACZhB,QAAS,EACTuC,cAAexB,IACfuB,UAAWD,QACXsL,iBAAkB,IAAI9kC,KAW1B,OARIm4B,QAAQ4N,oBAAsB,IAAI94C,SAAQ,SAACg0C,GAAD,OAAQ9I,QAAQkM,oBAAsBpD,CAAlD,IAG9B9I,QAAQiR,iBAAmB,IAAIn8C,SAAQ,SAACg0C,GAAD,OAAQ9I,QAAQgM,iBAAmBlD,CAA/C,IAC3B/I,IAAI,OAAS,GACbA,IAAI,QAAU,GAElBD,sBAAsBC,IAAKC,QAASqB,QAAQ4N,aACrCmC,SAAS7zC,IAAIwiC,IAAKC,QAhB7B,EAkBMqE,kBAAoB,SAApBA,kBAAqBtE,IAAKiE,YAAN,OAAqBA,cAAcjE,GAA7D,EACMa,aAAe,SAAfA,aAAgBzsC,EAAGkB,IAAJ,OAAW,EAAIsT,QAAQK,OAAO7U,EAAGkB,GAAtD,EACMk8C,WAA2B,IAAI1pC,IAC/B2mC,WAAa,SAAbA,WAAcnN,QAASrB,QAASsO,cAElC,IAAMkD,WAAanQ,QAAQI,UAAUz6B,QAAQ,KAAM,KAC7CyqC,SAAWpQ,QAAQ6P,eACnBx8C,OAAS68C,WAAWl4C,IAAIo4C,UAC9B,OAAI/8C,OACOA,OAAO88C,YAGX,sKAKFC,SALE,aAKwB18C,MAAK,SAAC28C,gBAIjC,OAFIH,WAAWh0C,IAAIk0C,SAAUC,gBAEtBA,eAAeF,WATnB,GAUJ5Q,aAnBP,EAqBMO,OAAS,IAAIt5B,IACb8pC,cAAgB,GAChBC,eAAiB,GACjBC,UAAY,SAAZA,UAAaC,MAAOC,OAAR,OAAkB,SAACrG,IACjCoG,MAAM9wB,KAAK0qB,IACN7M,eACDA,cAAe,EACXkT,OAAuB,EAAdhT,IAAIC,QACbmN,SAAS6F,OAGTjT,IAAIK,IAAI4S,OARF,CAAlB,EAYMC,QAAU,SAAVA,QAAWH,OACb,IAAK,IAAIl3B,EAAI,EAAGA,EAAIk3B,MAAMhyC,OAAQ8a,IAC9B,IACIk3B,MAAMl3B,GAAGs3B,YAAYC,MAIxB,CAFD,MAAOh+C,GACHysC,aAAazsC,EAChB,CAEL29C,MAAMhyC,OAAS,CATnB,EAWMkyC,MAAQ,SAARA,QAIFC,QAAQN,eAGJM,QAAQL,iBACH/S,aAAe8S,cAAc7xC,OAAS,IAGvCi/B,IAAIK,IAAI4S,MAXpB,EAeM7F,SAAyB,SAAzBA,SAA0BT,IAAD,OAAQtO,iBAAiBroC,KAAK22C,GAA7D,EACMT,UAA0B4G,UAAUD,gBAAgB,6XCxpD1D,EAH2BQ,oBAAQ,gEAGVC,WAAW,CAACD,oBAAAA,mJAA2IA,oBAAAA,sKAAyJ19C,QAAQ","sources":["webpack:///./apps/dotcms-block-editor/src/app/ sync ^\\.(?eda0","./apps/dotcms-block-editor/src/app/ sync ^\\.(","./dist/libs/dotcms-webcomponents/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./libs/block-editor/src/lib/editor.directive.ts","./libs/block-editor/src/lib/floating-menu.directive.ts","./libs/block-editor/src/lib/bubble-menu.directive.ts","./libs/block-editor/src/lib/draggable.directive.ts","./libs/block-editor/src/lib/node-view-content.directive.ts","./libs/block-editor/src/lib/AngularRenderer.ts","./libs/block-editor/src/lib/NodeViewRenderer.ts","./libs/block-editor/src/lib/extensions/blocks/contentlet-block/contentlet-block.component.ts","./libs/block-editor/src/lib/models/dot-bubble-menu.model.ts","./libs/block-editor/src/lib/extensions/services/suggestions/suggestions.service.ts","./libs/block-editor/src/lib/extensions/services/dot-language/dot-language.service.ts","./libs/block-editor/src/lib/extensions/components/suggestions-list-item/suggestions-list-item.component.ts","./libs/block-editor/src/lib/extensions/components/suggestion-list/suggestion-list.component.ts","./libs/block-editor/src/lib/extensions/components/suggestions/suggestions.component.ts","./libs/block-editor/src/lib/extensions/components/action-button/action-button.component.ts","./libs/dotcms-js/src/lib/core/string-utils.service.ts","./libs/dotcms-js/src/lib/environments/environment.ts","./libs/dotcms-js/src/lib/core/util/http-request-utils.ts","./libs/dotcms-js/src/lib/core/logger.service.ts","./libs/dotcms-js/src/lib/core/shared/user.model.ts","./libs/dotcms-js/src/lib/core/api-root.service.ts","./libs/dotcms-js/src/lib/core/browser-util.service.ts","./libs/dotcms-js/src/lib/core/util/http-code.ts","./libs/dotcms-js/src/lib/core/util/http-response-util.ts","./libs/dotcms-js/src/lib/core/util/response-view.ts","./libs/dotcms-js/src/lib/core/core-web.service.ts","./libs/dotcms-js/src/lib/core/dot-push-publish-dialog.service.ts","./libs/dotcms-js/src/lib/core/dot-router.service.ts","./libs/dotcms-js/src/lib/core/dotcms-config.service.ts","./libs/dotcms-js/src/lib/core/util/protocol.ts","./libs/dotcms-js/src/lib/core/util/websockets-protocol.ts","./libs/dotcms-js/src/lib/core/util/long-polling-protocol.ts","./libs/dotcms-js/src/lib/core/util/models/dot-event-socket-url.ts","./libs/dotcms-js/src/lib/core/util/dot-event-socket.ts","./libs/dotcms-js/src/lib/core/dotcms-events.service.ts","./libs/dotcms-js/src/lib/core/login.service.ts","./libs/dotcms-js/src/lib/core/routing.service.ts","./libs/dotcms-js/src/lib/core/site.service.ts","./libs/dotcms-js/src/lib/core/util/app.config.ts","./libs/dotcms-js/src/lib/core/util/local-store.service.ts","./libs/dotcms-js/src/lib/core/util/notification.service.ts","./libs/dotcms-js/src/lib/core/core-web.service.mock.ts","./libs/block-editor/src/lib/extensions/components/drag-handler/drag-handler.component.ts","./libs/block-editor/src/lib/extensions/blocks/image-block/image-block.component.ts","./libs/block-editor/src/lib/extensions/components/loader/loader.component.ts","./libs/utils/src/lib/services/dot-temp-file.service.ts","./libs/block-editor/src/lib/extensions/services/dot-image/dot-image.service.ts","./libs/block-editor/src/lib/extensions/components/bubble-menu/bubble-menu.component.ts","./libs/block-editor/src/lib/extensions/components/bubble-menu-button/bubble-menu-button.component.ts","./libs/block-editor/src/lib/utils/prosemirror.utils.ts","./libs/block-editor/src/lib/extensions/components/bubble-menu-link-form/utils/index.ts","./libs/block-editor/src/lib/plugins/bubble-link-form.plugin.ts","./libs/block-editor/src/lib/extensions/bubble-link-form.extension.ts","./libs/block-editor/src/lib/utils/bubble-menu.utils.ts","./libs/block-editor/src/lib/extensions/components/bubble-menu-link-form/bubble-menu-link-form.component.ts","./libs/block-editor/src/lib/extensions/pipes/contentlet-state/contentlet-state.pipe.ts","./libs/block-editor/src/lib/extensions/components/suggestion-loading-list/suggestion-loading-list.component.ts","./libs/block-editor/src/lib/extensions/components/bubble-menu-link-form/components/form-actions/form-actions.component.ts","./libs/block-editor/src/lib/ngx-tiptap.module.ts","./libs/block-editor/src/lib/plugins/floating.plugin.ts","./libs/block-editor/src/lib/extensions/components/suggestions/suggestion-icons.ts","./libs/block-editor/src/lib/utils/suggestion.utils.ts","./libs/block-editor/src/lib/extensions/actions-menu.extension.ts","./libs/block-editor/src/lib/extensions/blocks/image-block/image-block.extention.ts","./libs/block-editor/src/lib/plugins/placeholder.plugin.ts","./libs/block-editor/src/lib/extensions/imageUpload.extension.ts","./libs/block-editor/src/lib/extensions/dragHandler.extension.ts","./libs/block-editor/src/lib/plugins/dot-bubble-menu.plugin.ts","./libs/block-editor/src/lib/extensions/dot-bubble-menu.extension.ts","./apps/dotcms-block-editor/src/app/dot-block-editor/dot-block-editor.component.ts","./libs/block-editor/src/lib/extensions/dot-config.extension.ts","./libs/block-editor/src/lib/extensions/blocks/contentlet-block/contentlet-block.extension.ts","./apps/dotcms-block-editor/src/app/dot-block-editor/dot-block-editor.component.stories.ts","./apps/dotcms-block-editor/.storybook/preview.js-generated-config-entry.js","./dist/libs/dotcms-webcomponents/loader/index.js","./dist/libs/dotcms-webcomponents/dist/esm/loader.js","./apps/dotcms-block-editor/.storybook/preview.js","./dist/libs/dotcms-webcomponents/dist/esm/index-27076004.js","./generated-stories-entry.cjs"],"sourcesContent":["var map = {\n\t\"./dot-block-editor/dot-block-editor.component.stories.ts\": \"./apps/dotcms-block-editor/src/app/dot-block-editor/dot-block-editor.component.stories.ts\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./apps/dotcms-block-editor/src/app sync recursive ^\\\\.(?:(?:^%7C\\\\/%7C(?:(?:(?%21(?:^%7C\\\\/)\\\\.).)*?)\\\\/)(?%21\\\\.)(?=.)[^/]*?\\\\.stories\\\\.(js%7Cjsx%7Cts%7Ctsx))$\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"./apps/dotcms-block-editor/src/app sync recursive ^\\\\.(?:(?:^%7C\\\\/%7C(?:(?:(?%21(?:^%7C\\\\/)\\\\.).)*?)\\\\/)(?%21\\\\.)(?=.)[^/]*?\\\\.stories\\\\.mdx)$\";\nmodule.exports = webpackEmptyContext;","var map = {\n\t\"./dot-asset-drop-zone.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-asset-drop-zone.entry.js\",\n\t\t253,\n\t\t396,\n\t\t969,\n\t\t281\n\t],\n\t\"./dot-autocomplete_2.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-autocomplete_2.entry.js\",\n\t\t34\n\t],\n\t\"./dot-badge_9.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-badge_9.entry.js\",\n\t\t253,\n\t\t396,\n\t\t106\n\t],\n\t\"./dot-binary-file-preview_3.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-binary-file-preview_3.entry.js\",\n\t\t451\n\t],\n\t\"./dot-binary-file.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-binary-file.entry.js\",\n\t\t155,\n\t\t844\n\t],\n\t\"./dot-card-view.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-card-view.entry.js\",\n\t\t310\n\t],\n\t\"./dot-checkbox.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-checkbox.entry.js\",\n\t\t155,\n\t\t186\n\t],\n\t\"./dot-data-view-button.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-data-view-button.entry.js\",\n\t\t22\n\t],\n\t\"./dot-date-range.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-date-range.entry.js\",\n\t\t155,\n\t\t20\n\t],\n\t\"./dot-date-time.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-date-time.entry.js\",\n\t\t155,\n\t\t980\n\t],\n\t\"./dot-date.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-date.entry.js\",\n\t\t155,\n\t\t250\n\t],\n\t\"./dot-error-message_2.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-error-message_2.entry.js\",\n\t\t936\n\t],\n\t\"./dot-form-column.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-form-column.entry.js\",\n\t\t752\n\t],\n\t\"./dot-form.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-form.entry.js\",\n\t\t969,\n\t\t959\n\t],\n\t\"./dot-html-to-image.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-html-to-image.entry.js\",\n\t\t253,\n\t\t885\n\t],\n\t\"./dot-input-calendar.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-input-calendar.entry.js\",\n\t\t484\n\t],\n\t\"./dot-key-value.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-key-value.entry.js\",\n\t\t155,\n\t\t44\n\t],\n\t\"./dot-label.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-label.entry.js\",\n\t\t457\n\t],\n\t\"./dot-material-icon-picker.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-material-icon-picker.entry.js\",\n\t\t253,\n\t\t321\n\t],\n\t\"./dot-multi-select.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-multi-select.entry.js\",\n\t\t155,\n\t\t28\n\t],\n\t\"./dot-progress-bar.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-progress-bar.entry.js\",\n\t\t191\n\t],\n\t\"./dot-radio.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-radio.entry.js\",\n\t\t155,\n\t\t35\n\t],\n\t\"./dot-select-button.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-select-button.entry.js\",\n\t\t253,\n\t\t396,\n\t\t673\n\t],\n\t\"./dot-select.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-select.entry.js\",\n\t\t155,\n\t\t566\n\t],\n\t\"./dot-tags.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-tags.entry.js\",\n\t\t155,\n\t\t966\n\t],\n\t\"./dot-textarea.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-textarea.entry.js\",\n\t\t155,\n\t\t902\n\t],\n\t\"./dot-textfield.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-textfield.entry.js\",\n\t\t155,\n\t\t554\n\t],\n\t\"./dot-time.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/dot-time.entry.js\",\n\t\t155,\n\t\t307\n\t],\n\t\"./key-value-form_2.entry.js\": [\n\t\t\"./dist/libs/dotcms-webcomponents/dist/esm/key-value-form_2.entry.js\",\n\t\t833\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = \"./dist/libs/dotcms-webcomponents/dist/esm lazy recursive ^\\\\.\\\\/.*\\\\.entry\\\\.js$ include: \\\\.entry\\\\.js$ exclude: \\\\.system\\\\.entry\\\\.js$\";\nmodule.exports = webpackAsyncContext;","import {\n    Directive,\n    ElementRef,\n    forwardRef,\n    Input,\n    OnDestroy,\n    OnInit,\n    Renderer2\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Content, Editor, JSONContent } from '@tiptap/core';\nimport { Transaction } from 'prosemirror-state';\n\n@Directive({\n    // eslint-disable-next-line @angular-eslint/directive-selector\n    selector: 'tiptap[editor], [tiptap][editor], tiptap-editor[editor], [tiptapEditor][editor]',\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => EditorDirective),\n            multi: true\n        }\n    ]\n})\nexport class EditorDirective implements OnInit, ControlValueAccessor, OnDestroy {\n    @Input() editor!: Editor;\n    @Input() outputFormat: 'json' | 'html' = 'html';\n\n    constructor(private el: ElementRef<HTMLElement>, private _renderer: Renderer2) {}\n\n    private onChange: (value: Content) => void = () => {\n        /** */\n    };\n    private onTouched: () => void = () => {\n        /** */\n    };\n\n    // Writes a new value to the element.\n    // This methods is called when programmatic changes from model to view are requested.\n    writeValue(value: Content): void {\n        if (!value) {\n            return;\n        }\n\n        if (!this.outputFormat && typeof value === 'string') {\n            this.outputFormat = 'html';\n        }\n\n        this.editor.chain().setContent(value, false).run();\n    }\n\n    // Registers a callback function that is called when the control's value changes in the UI.\n    registerOnChange(fn: () => void): void {\n        this.onChange = fn;\n    }\n\n    // Registers a callback function that is called by the forms API on initialization to update the form model on blur.\n    registerOnTouched(fn: () => void): void {\n        this.onTouched = fn;\n    }\n\n    // Called by the forms api to enable or disable the element\n    setDisabledState(isDisabled: boolean): void {\n        this.editor.setEditable(!isDisabled);\n        this._renderer.setProperty(this.el.nativeElement, 'disabled', isDisabled);\n    }\n\n    private handleChange = ({ transaction }: { transaction: Transaction }): void => {\n        if (!transaction.docChanged) {\n            return;\n        }\n\n        if (this.outputFormat === 'html') {\n            this.onChange(this.editor.getHTML());\n\n            return;\n        }\n\n        this.onChange(this.editor.getJSON() as JSONContent);\n    };\n\n    ngOnInit(): void {\n        if (!this.editor) {\n            throw new Error('Required: Input `editor`');\n        }\n\n        // take the inner contents and clear the block\n        const innerHTML = this.el.nativeElement.innerHTML;\n        this.el.nativeElement.innerHTML = '';\n\n        // insert the editor in the dom\n        this.el.nativeElement.appendChild(this.editor.options.element.firstChild as ChildNode);\n\n        // update the options for the editor\n        this.editor.setOptions({ element: this.el.nativeElement });\n\n        // update content to the editor\n        if (innerHTML) {\n            this.editor.chain().setContent(innerHTML, false).run();\n        }\n\n        // register blur handler to update `touched` property\n        this.editor.on('blur', () => {\n            this.onTouched();\n        });\n\n        // register transaction handler to emit changes on update\n        this.editor.on('transaction', this.handleChange);\n    }\n\n    ngOnDestroy(): void {\n        this.editor.destroy();\n    }\n}\n","import { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Editor } from '@tiptap/core';\nimport { FloatingMenuPlugin, FloatingMenuPluginProps } from '@tiptap/extension-floating-menu';\n\n@Directive({\n    // eslint-disable-next-line @angular-eslint/directive-selector\n    selector: 'tiptap-floating-menu[editor], [tiptapFloatingMenu][editor]'\n})\nexport class FloatingMenuDirective implements OnInit, OnDestroy {\n    @Input() pluginKey: FloatingMenuPluginProps['pluginKey'] = 'NgxTiptapFloatingMenu';\n    @Input() editor!: Editor;\n    @Input() tippyOptions: FloatingMenuPluginProps['tippyOptions'] = {};\n    @Input() shouldShow: FloatingMenuPluginProps['shouldShow'] = null;\n\n    constructor(private _el: ElementRef<HTMLElement>) {}\n\n    ngOnInit(): void {\n        if (!this.editor) {\n            throw new Error('Required: Input `editor`');\n        }\n\n        this.editor.registerPlugin(\n            FloatingMenuPlugin({\n                pluginKey: this.pluginKey,\n                editor: this.editor,\n                element: this._el.nativeElement,\n                tippyOptions: this.tippyOptions,\n                shouldShow: this.shouldShow\n            })\n        );\n    }\n\n    ngOnDestroy(): void {\n        this.editor.unregisterPlugin(this.pluginKey);\n    }\n}\n","import { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Editor } from '@tiptap/core';\nimport { BubbleMenuPlugin, BubbleMenuPluginProps } from '@tiptap/extension-bubble-menu';\n\n@Directive({\n    // eslint-disable-next-line @angular-eslint/directive-selector\n    selector: 'tiptap-bubble-menu[editor], [tiptapBubbleMenu][editor]'\n})\nexport class BubbleMenuDirective implements OnInit, OnDestroy {\n    @Input() pluginKey: BubbleMenuPluginProps['pluginKey'] = 'NgxTiptapBubbleMenu';\n    @Input() editor!: Editor;\n    @Input() tippyOptions: BubbleMenuPluginProps['tippyOptions'] = {};\n    @Input() shouldShow: BubbleMenuPluginProps['shouldShow'] = null;\n\n    constructor(private _el: ElementRef<HTMLElement>) {}\n\n    ngOnInit(): void {\n        if (!this.editor) {\n            throw new Error('Required: Input `editor`');\n        }\n\n        this.editor.registerPlugin(\n            BubbleMenuPlugin({\n                pluginKey: this.pluginKey,\n                editor: this.editor,\n                element: this._el.nativeElement,\n                tippyOptions: this.tippyOptions,\n                shouldShow: this.shouldShow\n            })\n        );\n    }\n\n    ngOnDestroy(): void {\n        this.editor.unregisterPlugin(this.pluginKey);\n    }\n}\n","import { Directive, HostBinding } from '@angular/core';\n\n@Directive({\n    // eslint-disable-next-line @angular-eslint/directive-selector\n    selector: '[tiptapDraggable]'\n})\nexport class DraggableDirective {\n    @HostBinding('attr.draggable') draggable = true;\n    @HostBinding('attr.data-drag-handle') handle = '';\n}\n","import { Directive, HostBinding } from '@angular/core';\n\n@Directive({\n    // eslint-disable-next-line @angular-eslint/directive-selector\n    selector: '[tiptapNodeViewContent]'\n})\nexport class NodeViewContentDirective {\n    @HostBinding('attr.data-node-view-content') handle = '';\n}\n","import {\n    ApplicationRef,\n    ComponentFactoryResolver,\n    ComponentRef,\n    ElementRef,\n    Injector,\n    Type\n} from '@angular/core';\n\nexport class AngularRenderer<C, P> {\n    private applicationRef: ApplicationRef;\n    private componentRef: ComponentRef<C>;\n\n    constructor(component: Type<C>, injector: Injector, props: Partial<P>) {\n        this.applicationRef = injector.get(ApplicationRef);\n\n        const componentFactoryResolver = injector.get(ComponentFactoryResolver);\n        const factory = componentFactoryResolver.resolveComponentFactory(component);\n\n        this.componentRef = factory.create(injector, []);\n\n        // set input props to the component\n        this.updateProps(props);\n\n        // Attach to the view so that the change detector knows to run\n        this.applicationRef.attachView(this.componentRef.hostView);\n    }\n\n    get instance(): C {\n        return this.componentRef.instance;\n    }\n\n    get elementRef(): ElementRef {\n        return this.componentRef.injector.get(ElementRef);\n    }\n\n    get dom(): HTMLElement {\n        return this.elementRef.nativeElement;\n    }\n\n    updateProps<T extends P>(props: Partial<T>): void {\n        Object.entries(props).forEach(([key, value]) => {\n            this.instance[key as keyof C] = value as C[keyof C];\n        });\n    }\n\n    detectChanges(): void {\n        this.componentRef.changeDetectorRef.detectChanges();\n    }\n\n    destroy(): void {\n        this.componentRef.destroy();\n        this.applicationRef.detachView(this.componentRef.hostView);\n    }\n}\n","import { Component, Injector, Input, Type } from '@angular/core';\nimport {\n    Editor,\n    NodeView,\n    NodeViewProps,\n    NodeViewRenderer,\n    NodeViewRendererProps,\n    NodeViewRendererOptions\n} from '@tiptap/core';\nimport type { Decoration } from 'prosemirror-view';\nimport type { Node as ProseMirrorNode } from 'prosemirror-model';\n\nimport { AngularRenderer } from './AngularRenderer';\n\n@Component({ template: '' })\nexport class AngularNodeViewComponent implements NodeViewProps {\n    @Input() editor!: NodeViewProps['editor'];\n    @Input() node!: NodeViewProps['node'];\n    @Input() decorations!: NodeViewProps['decorations'];\n    @Input() selected!: NodeViewProps['selected'];\n    @Input() extension!: NodeViewProps['extension'];\n    @Input() getPos!: NodeViewProps['getPos'];\n    @Input() updateAttributes!: NodeViewProps['updateAttributes'];\n    @Input() deleteNode!: NodeViewProps['deleteNode'];\n}\n\ninterface AngularNodeViewRendererOptions extends NodeViewRendererOptions {\n    update?: ((node: ProseMirrorNode, decorations: Decoration[]) => boolean) | null;\n    injector: Injector;\n}\n\nclass AngularNodeView extends NodeView<\n    Type<AngularNodeViewComponent>,\n    Editor,\n    AngularNodeViewRendererOptions\n> {\n    renderer!: AngularRenderer<AngularNodeViewComponent, NodeViewProps>;\n    contentDOMElement!: HTMLElement | null;\n\n    mount() {\n        const injector = this.options.injector as Injector;\n\n        const props: NodeViewProps = {\n            editor: this.editor,\n            node: this.node,\n            decorations: this.decorations,\n            selected: false,\n            extension: this.extension,\n            getPos: () => this.getPos(),\n            updateAttributes: (attributes = {}) => this.updateAttributes(attributes),\n            deleteNode: () => this.deleteNode()\n        };\n\n        // create renderer\n        this.renderer = new AngularRenderer(this.component, injector, props);\n\n        // Register drag handler\n        if (this.extension.config.draggable) {\n            this.renderer.elementRef.nativeElement.ondragstart = (e: DragEvent) => {\n                this.onDragStart(e);\n            };\n        }\n\n        this.contentDOMElement = this.node.isLeaf\n            ? null\n            : document.createElement(this.node.isInline ? 'span' : 'div');\n\n        if (this.contentDOMElement) {\n            // For some reason the whiteSpace prop is not inherited properly in Chrome and Safari\n            // With this fix it seems to work fine\n            // See: https://github.com/ueberdosis/tiptap/issues/1197\n            this.contentDOMElement.style.whiteSpace = 'inherit';\n            this.renderer.detectChanges();\n        }\n    }\n\n    get dom() {\n        return this.renderer.dom;\n    }\n\n    get contentDOM() {\n        if (this.node.isLeaf) {\n            return null;\n        }\n\n        this.maybeMoveContentDOM();\n\n        return this.contentDOMElement;\n    }\n\n    private maybeMoveContentDOM(): void {\n        const contentElement = this.dom.querySelector('[data-node-view-content]');\n\n        if (\n            this.contentDOMElement &&\n            contentElement &&\n            !contentElement.contains(this.contentDOMElement)\n        ) {\n            contentElement.appendChild(this.contentDOMElement);\n        }\n    }\n\n    update(node: ProseMirrorNode, decorations: Decoration[]): boolean {\n        if (this.options.update) {\n            return this.options.update(node, decorations);\n        }\n\n        if (node.type !== this.node.type) {\n            return false;\n        }\n\n        if (node === this.node && this.decorations === decorations) {\n            return true;\n        }\n\n        this.node = node;\n        this.decorations = decorations;\n        this.renderer.updateProps({ node, decorations });\n        this.maybeMoveContentDOM();\n\n        return true;\n    }\n\n    selectNode() {\n        this.renderer.updateProps({ selected: true });\n    }\n\n    deselectNode() {\n        this.renderer.updateProps({ selected: false });\n    }\n\n    destroy() {\n        this.renderer.destroy();\n    }\n}\n\nexport const AngularNodeViewRenderer = (\n    component: Type<AngularNodeViewComponent>,\n    options: Partial<AngularNodeViewRendererOptions>\n): NodeViewRenderer => {\n    return (props: NodeViewRendererProps) => {\n        return new AngularNodeView(component, props, options);\n    };\n};\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { AngularNodeViewComponent } from '../../../NodeViewRenderer';\nimport { DotCMSContentlet } from '@dotcms/dotcms-models';\n\n@Component({\n    selector: 'dot-contentlet-block',\n    templateUrl: './contentlet-block.component.html',\n    styleUrls: ['./contentlet-block.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class ContentletBlockComponent extends AngularNodeViewComponent implements OnInit {\n    public data: DotCMSContentlet;\n\n    ngOnInit() {\n        this.data = this.node.attrs.data;\n    }\n}\n","import { Editor } from '@tiptap/core';\nimport { EditorView } from 'prosemirror-view';\nimport { EditorState } from 'prosemirror-state';\nimport { BubbleMenuPluginProps, BubbleMenuViewProps } from '@tiptap/extension-bubble-menu';\nimport { ComponentRef, EventEmitter } from '@angular/core';\nimport { SuggestionsComponent } from '../extensions/components/suggestions/suggestions.component';\n\nexport const DEFAULT_LANG_ID = 1;\n\nexport type DotConfigKeys = 'lang';\n\nexport interface ContentletFilters {\n    contentType: string;\n    filter: string;\n    currentLanguage: number;\n}\n\nexport enum NodeTypes {\n    DOT_IMAGE = 'dotImage',\n    LIST_ITEM = 'listItem',\n    BULLET_LIST = 'bulletList',\n    ORDERED_LIST = 'orderedList',\n    BLOCKQUOTE = 'blockquote',\n    CODE_BLOCK = 'codeBlock',\n    DOC = 'doc',\n    DOT_CONTENT = 'dotContent',\n    PARAGRAPH = 'paragraph',\n    HARD_BREAK = 'hardBreak',\n    HEADING = 'heading',\n    HORIZONTAL_RULE = 'horizontalRule',\n    TEXT = 'text'\n}\n\nexport const CustomNodeTypes: Array<NodeTypes> = [NodeTypes.DOT_IMAGE, NodeTypes.DOT_CONTENT];\n\nexport interface ShouldShowProps {\n    editor: Editor;\n    view: EditorView;\n    state: EditorState;\n    oldState?: EditorState;\n    from: number;\n    to: number;\n}\n\nexport interface BubbleMenuItem {\n    icon: string;\n    markAction: string;\n    active: boolean;\n    divider?: boolean;\n}\n\nexport interface BubbleMenuComponentProps {\n    command: EventEmitter<BubbleMenuItem>;\n    items: BubbleMenuItem[];\n    selected: string;\n    toggleChangeTo: EventEmitter<void>;\n}\n\nexport declare type DotBubbleMenuPluginProps = BubbleMenuPluginProps & {\n    component: ComponentRef<BubbleMenuComponentProps>;\n    changeToComponent: ComponentRef<SuggestionsComponent>;\n    changeToElement: HTMLElement;\n};\n\nexport declare type DotBubbleMenuViewProps = BubbleMenuViewProps & {\n    component: ComponentRef<BubbleMenuComponentProps>;\n    changeToComponent: ComponentRef<SuggestionsComponent>;\n    changeToElement: HTMLElement;\n};\n","import { Injectable } from '@angular/core';\n\nimport { Observable } from 'rxjs';\nimport { pluck } from 'rxjs/operators';\n\nimport { DotCMSContentlet, DotCMSContentType } from '@dotcms/dotcms-models';\n\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { ContentletFilters, DEFAULT_LANG_ID } from '../../../models/dot-bubble-menu.model';\n\n@Injectable()\nexport class SuggestionsService {\n    constructor(private http: HttpClient) {}\n\n    get defaultHeaders() {\n        const headers = new HttpHeaders();\n        headers.set('Accept', '*/*').set('Content-Type', 'application/json');\n\n        return headers;\n    }\n\n    getContentTypes(filter = '', allowedTypes = ''): Observable<DotCMSContentType[]> {\n        return this.http\n            .post(`/api/v1/contenttype/_filter`, {\n                filter: {\n                    types: allowedTypes,\n                    query: filter\n                },\n                orderBy: 'name',\n                direction: 'ASC',\n                perPage: 40\n            })\n            .pipe(pluck('entity'));\n    }\n\n    getContentlets({\n        contentType,\n        filter,\n        currentLanguage\n    }: ContentletFilters): Observable<DotCMSContentlet[]> {\n        return this.http\n            .post('/api/content/_search', {\n                query: `+contentType:${contentType} +languageId:${currentLanguage} +deleted:false +working:true +catchall:*${filter}* `,\n                sort: 'modDate desc',\n                offset: 0,\n                limit: 40\n            })\n            .pipe(pluck('entity', 'jsonObjectView', 'contentlets'));\n    }\n\n    /**\n     * Get contentlets filtered by urlMap\n     *\n     * @param {*} { filter, currentLanguage = DEFAULT_LANG_ID }\n     * @return {*}  {Observable<DotCMSContentlet[]>}\n     * @memberof SuggestionsService\n     */\n    getContentletsUrlMap({\n        filter,\n        currentLanguage = DEFAULT_LANG_ID\n    }): Observable<DotCMSContentlet[]> {\n        return this.http\n            .post('/api/content/_search', {\n                query: `+languageId:${currentLanguage} +deleted:false +working:true +(urlmap:*${filter}* OR +(basetype:5 AND path:*${filter}*))`,\n                sort: 'modDate desc',\n                offset: 0,\n                limit: 40\n            })\n            .pipe(pluck('entity', 'jsonObjectView', 'contentlets'));\n    }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Observable, of } from 'rxjs';\nimport { map, pluck } from 'rxjs/operators';\n\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\ninterface DotLanguage {\n    country: string;\n    countryCode: string;\n    defaultLanguage: boolean;\n    id: number;\n    language: string;\n    languageCode: string;\n}\n\nexport interface Languages {\n    [key: string]: DotLanguage;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DotLanguageService {\n    private languages: Languages;\n\n    constructor(private http: HttpClient) {}\n\n    get defaultHeaders() {\n        const headers = new HttpHeaders();\n        headers.set('Accept', '*/*').set('Content-Type', 'application/json');\n\n        return headers;\n    }\n\n    /**\n     * Get an object of DotLanguage whose keys are the languageId.\n     *\n     * @return {*}  {Observable<Languages>}\n     * @memberof DotLanguageService\n     */\n    getLanguages(): Observable<Languages> {\n        if (this.languages) {\n            return of(this.languages);\n        }\n\n        return this.http\n            .get(`/api/v2/languages`, {\n                headers: this.defaultHeaders\n            })\n            .pipe(\n                pluck('entity'),\n                map((lang: DotLanguage[]) => {\n                    const dotLang: Languages = this.getDotLanguageObject(lang);\n\n                    this.languages = dotLang;\n\n                    return dotLang;\n                })\n            );\n    }\n\n    /**\n     * Transform an array of languages into an object\n     * using the language id as an object key.\n     * @private\n     * @param {DotLanguage[]} lang\n     * @return {*}  {Languages}\n     * @memberof DotLanguageService\n     */\n    private getDotLanguageObject(lang: DotLanguage[]): Languages {\n        return lang.reduce((obj, lang) => Object.assign(obj, { [lang.id]: lang }), {});\n    }\n}\n","import { Component, ElementRef, HostBinding, Input, OnInit } from '@angular/core';\n\nimport { FocusableOption } from '@angular/cdk/a11y';\n\n@Component({\n    selector: 'dot-suggestions-list-item',\n    templateUrl: './suggestions-list-item.component.html',\n    styleUrls: ['./suggestions-list-item.component.scss']\n})\nexport class SuggestionsListItemComponent implements FocusableOption, OnInit {\n    @HostBinding('attr.role') role = 'list-item';\n    @HostBinding('attr.tabindex') tabindex = '-1';\n\n    @HostBinding('attr.data-index')\n    @Input()\n    index: number;\n\n    @Input() command: () => void;\n    @Input() label = '';\n    @Input() url = '';\n    @Input() urlItem = false;\n    @Input() data = null;\n\n    icon = false;\n\n    constructor(private element: ElementRef) {}\n\n    ngOnInit() {\n        this.icon = this.icon = typeof this.url === 'string' && !(this.url.split('/').length > 1);\n    }\n\n    getLabel(): string {\n        return this.element.nativeElement.innerText;\n    }\n\n    focus() {\n        this.element.nativeElement.style = 'background: #eee';\n    }\n\n    unfocus() {\n        this.element.nativeElement.style = '';\n    }\n\n    scrollIntoView() {\n        if (!this.isIntoView()) {\n            const child = this.element.nativeElement as HTMLElement;\n            const parent = child.parentElement;\n\n            // Get BoundingClientRect of the elements\n            const {\n                top: containerTop,\n                top: containerBot,\n                height: containerHeight\n            } = parent.getBoundingClientRect();\n            const { top, bottom } = child.getBoundingClientRect();\n\n            const scrollTop = top - containerTop;\n            const scrollBot = bottom - containerBot;\n\n            // += scrollTop -> If we're near the top of the list.\n            // += scrollBot - containerHeight -> If we're near the bottom of the list.\n            parent.scrollTop += this.alignToTop() ? scrollTop : scrollBot - containerHeight;\n        }\n    }\n\n    /**\n     *\n     * Check if the element is a visible area\n     *\n     * @private\n     * @return {*}  {boolean}\n     * @memberof SuggestionsListItemComponent\n     */\n    private isIntoView(): boolean {\n        const { bottom, top } = this.element.nativeElement.getBoundingClientRect();\n        const containerRect = this.element.nativeElement.parentElement.getBoundingClientRect();\n\n        return top >= containerRect.top && bottom <= containerRect.bottom;\n    }\n\n    /**\n     *\n     * If true, the top of the element will be aligned to the top of the visible area\n     * of the scrollable ancestor If true, the top of the element will be aligned to\n     * the top of the visible area of the scrollable ancestor.\n     *\n     * @private\n     * @return {*}  {boolean}\n     * @memberof SuggestionsListItemComponent\n     */\n    private alignToTop(): boolean {\n        const { top } = this.element.nativeElement.getBoundingClientRect();\n        const { top: containerTop } =\n            this.element.nativeElement.parentElement.getBoundingClientRect();\n\n        return top < containerTop;\n    }\n}\n","import { FocusKeyManager } from '@angular/cdk/a11y';\nimport { AfterContentInit, Component, ContentChildren, QueryList } from '@angular/core';\nimport { SuggestionsListItemComponent } from '../suggestions-list-item/suggestions-list-item.component';\n\n@Component({\n    selector: 'dot-suggestion-list',\n    templateUrl: './suggestion-list.component.html',\n    styleUrls: ['./suggestion-list.component.scss']\n})\nexport class SuggestionListComponent implements AfterContentInit {\n    keyManager: FocusKeyManager<SuggestionsListItemComponent>;\n\n    @ContentChildren(SuggestionsListItemComponent) items: QueryList<SuggestionsListItemComponent>;\n\n    ngAfterContentInit() {\n        this.keyManager = new FocusKeyManager(this.items).withWrap();\n    }\n\n    /**\n     * Update the selected item in the list\n     *\n     * @param {KeyboardEvent} event\n     * @memberof SuggestionListComponent\n     */\n    updateSelection(event: KeyboardEvent) {\n        if (this.keyManager.activeItem) {\n            this.keyManager.activeItem.unfocus();\n        }\n\n        this.keyManager.onKeydown(event);\n        this.keyManager.activeItem.scrollIntoView();\n    }\n\n    /**\n     * Execute the command function in the list item component\n     *\n     * @memberof SuggestionListComponent\n     */\n    execCommand() {\n        this.keyManager.activeItem.command();\n    }\n\n    /**\n     * Set the first item of the list active\n     *\n     * @memberof SuggestionListComponent\n     */\n    setFirstItemActive() {\n        this.keyManager.activeItem?.unfocus();\n        this.keyManager.setFirstItemActive();\n        this.keyManager.activeItem?.focus();\n    }\n\n    /**\n     * Reset the key manager with the new options\n     *\n     * @memberof SuggestionListComponent\n     */\n    resetKeyManager() {\n        this.keyManager = new FocusKeyManager(this.items).withWrap();\n\n        // Needs to wait until the new items are rendered\n        setTimeout(() => {\n            this.setFirstItemActive();\n        }, 0);\n    }\n\n    /**\n     * Set an active item manually\n     *\n     * @param {number} index\n     * @memberof SuggestionListComponent\n     */\n    updateActiveItem(index: number): void {\n        this.keyManager.activeItem?.unfocus();\n        this.keyManager.setActiveItem(index);\n    }\n}\n","import {\n    AfterViewInit,\n    ChangeDetectorRef,\n    Component,\n    EventEmitter,\n    HostListener,\n    Input,\n    OnInit,\n    Output,\n    ViewChild\n} from '@angular/core';\n\nimport { SafeUrl } from '@angular/platform-browser';\nimport { DotCMSContentlet, DotCMSContentType } from '@dotcms/dotcms-models';\n\nimport { map, take } from 'rxjs/operators';\nimport { MenuItem } from 'primeng/api';\n\nimport { DotLanguageService, Languages } from '../../services/dot-language/dot-language.service';\nimport { SuggestionListComponent } from '../suggestion-list/suggestion-list.component';\nimport { SuggestionsService } from '../../services/suggestions/suggestions.service';\nimport { DEFAULT_LANG_ID, suggestionOptions } from '@dotcms/block-editor';\n\nexport interface SuggestionsCommandProps {\n    payload?: DotCMSContentlet;\n    type: { name: string; level?: number };\n}\n\nexport interface DotMenuItem extends Omit<MenuItem, 'icon'> {\n    icon: string | SafeUrl;\n    isActive?: () => boolean;\n    attributes?: Record<string, unknown>;\n    data?: Record<string, unknown>;\n}\n\nexport enum ItemsType {\n    BLOCK = 'block',\n    CONTENTTYPE = 'contentType',\n    CONTENT = 'content'\n}\n\n@Component({\n    selector: 'dot-suggestions',\n    templateUrl: './suggestions.component.html',\n    styleUrls: ['./suggestions.component.scss']\n})\nexport class SuggestionsComponent implements OnInit, AfterViewInit {\n    // TODO: Move all the logic related to the list to its component\n    @ViewChild('list', { static: false }) list: SuggestionListComponent;\n\n    // Maybe this should be an @Output() instead of @Input();\n    @Input() onSelection: (props: SuggestionsCommandProps) => void;\n    @Input() items: DotMenuItem[] = [];\n    @Input() title = 'Select a block';\n    @Input() noResultsMessage = 'No Results';\n    @Input() isOpen = false;\n    @Input() currentLanguage = DEFAULT_LANG_ID;\n    @Input() allowedContentTypes = '';\n\n    @Input() loading = false;\n    @Input() urlItem = false;\n\n    @Output() clearFilter: EventEmitter<string> = new EventEmitter<string>();\n    @Output() goBack: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\n\n    private itemsLoaded: ItemsType;\n    private selectedContentType: DotCMSContentType;\n    private mouseMove = true;\n    private dotLangs: Languages;\n    private initialItems: DotMenuItem[];\n\n    isFilterActive = false;\n\n    @HostListener('mousemove', ['$event'])\n    onMousemove() {\n        this.mouseMove = true;\n    }\n\n    constructor(\n        private suggestionsService: SuggestionsService,\n        private dotLanguageService: DotLanguageService,\n        private cd: ChangeDetectorRef\n    ) {}\n\n    ngOnInit(): void {\n        if (this.items?.length === 0 && !this.loading) {\n            // assign the default suggestions options.\n            this.items = suggestionOptions;\n            this.items.forEach((item) => {\n                item.command = () => {\n                    this.clearFilter.emit(ItemsType.BLOCK);\n                    item.id.includes('heading')\n                        ? this.onSelection({\n                              type: { name: 'heading', ...item.attributes }\n                          })\n                        : this.onSelection({ type: { name: item.id } });\n                };\n            });\n        }\n\n        this.initialItems = this.items;\n        this.itemsLoaded = ItemsType.BLOCK;\n        this.dotLanguageService\n            .getLanguages()\n            .pipe(take(1))\n            .subscribe((dotLang) => (this.dotLangs = dotLang));\n    }\n\n    ngAfterViewInit() {\n        this.setFirstItemActive();\n    }\n\n    /**\n     * Add the Contentlets item to the suggestions that is not present by default.\n     *\n     * @memberof SuggestionsComponent\n     */\n    addCContentletItem() {\n        this.items = [\n            {\n                label: 'Contentlets',\n                icon: 'receipt',\n                command: () => {\n                    this.clearFilter.emit(ItemsType.CONTENTTYPE);\n                    this.loadContentTypes();\n                }\n            },\n            ...this.items\n        ];\n        this.setFirstItemActive();\n    }\n\n    /**\n     * Execute the item command\n     *\n     * @memberof SuggestionsComponent\n     */\n    execCommand() {\n        if (this.items.length) {\n            this.list.execCommand();\n        } else {\n            this.handleBackButton(new MouseEvent('click'));\n        }\n    }\n\n    /**\n     * Update the current item selected\n     *\n     * @param {KeyboardEvent} e\n     * @memberof SuggestionsComponent\n     */\n    updateSelection(e: KeyboardEvent) {\n        this.list.updateSelection(e);\n        this.mouseMove = false;\n    }\n\n    /**\n     * Set the first item active\n     *\n     * @memberof SuggestionsComponent\n     */\n    setFirstItemActive() {\n        this.list?.setFirstItemActive();\n    }\n\n    /**\n     * Update the active Index\n     * @param {number} index\n     * @memberof SuggestionsComponent\n     */\n    updateActiveItem(index: number): void {\n        this.list?.updateActiveItem(index);\n    }\n\n    /**\n     * Reset the key manager after we add new elements to the list\n     *\n     * @memberof SuggestionsComponent\n     */\n    resetKeyManager() {\n        this.list?.resetKeyManager();\n    }\n\n    /**\n     * Avoid closing the suggestions on manual scroll\n     *\n     * @param {MouseEvent} e\n     * @memberof SuggestionsComponent\n     */\n    onMouseDownHandler(e: MouseEvent) {\n        e.preventDefault();\n    }\n\n    /**\n     * Handle the active item on menu events\n     *\n     * @param {MouseEvent} e\n     * @memberof SuggestionsComponent\n     */\n    onMouseEnter(e: MouseEvent) {\n        // If mouse does not move then leave the function.\n        if (!this.mouseMove) {\n            return;\n        }\n\n        e.preventDefault();\n        const index = Number((e.target as HTMLElement).dataset.index);\n        this.updateActiveItem(index);\n    }\n\n    /**\n     * Execute the item command on mouse down\n     *\n     * @param {MouseEvent} e\n     * @param {MenuItem} item\n     * @memberof SuggestionsComponent\n     */\n    onMouseDown(e: MouseEvent, item: MenuItem) {\n        e.preventDefault();\n        item.command();\n    }\n\n    /**\n     * Go back to contentlet selection\n     *\n     * @param {MouseEvent} event\n     * @memberof SuggestionsComponent\n     */\n    handleBackButton(event: MouseEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n        this.goBack.emit(event);\n        // Set the previous load Time to make the right search.\n        this.itemsLoaded =\n            this.itemsLoaded === ItemsType.CONTENT ? ItemsType.CONTENTTYPE : ItemsType.BLOCK;\n        this.filterItems();\n    }\n\n    /**\n     * Set items visible based on filter\n     *\n     * @param {string} filter\n     * @memberof SuggestionsComponent\n     */\n    filterItems(filter: string = '') {\n        switch (this.itemsLoaded) {\n            case ItemsType.BLOCK:\n                this.items = this.initialItems.filter((item) =>\n                    item.label.toLowerCase().includes(filter.trim().toLowerCase())\n                );\n                break;\n\n            case ItemsType.CONTENTTYPE:\n                this.loadContentTypes(filter);\n                break;\n\n            case ItemsType.CONTENT:\n                this.loadContentlets(this.selectedContentType, filter);\n        }\n\n        this.isFilterActive = !!filter.length;\n        this.setFirstItemActive();\n    }\n\n    // MOVE THIS TO LINK FORM COMPONENT\n    /**\n     * Search contentlets filtered by url\n     *\n     * @private\n     * @param {*} { link = '' }\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    searchContentlets({ link = '' }) {\n        this.loading = true;\n        this.suggestionsService\n            .getContentletsUrlMap({ filter: link })\n            .pipe(take(1))\n            .subscribe((contentlets: DotCMSContentlet[]) => {\n                this.items = contentlets.map((contentlet) => {\n                    const { languageId } = contentlet;\n                    contentlet.language = this.getContentletLanguage(languageId);\n\n                    return {\n                        label: contentlet.title,\n                        icon: 'contentlet/image',\n                        data: {\n                            contentlet: contentlet\n                        },\n                        command: () => {\n                            this.onSelection({\n                                payload: contentlet,\n                                type: {\n                                    name: 'dotContent'\n                                }\n                            });\n                        }\n                    };\n                });\n                this.loading = false;\n                // Active first result\n                requestAnimationFrame(() => this.setFirstItemActive());\n            });\n    }\n\n    private loadContentTypes(filter = '') {\n        this.suggestionsService\n            .getContentTypes(filter, this.allowedContentTypes)\n            .pipe(\n                map((items) => {\n                    return items.map((item) => {\n                        return {\n                            label: item.name,\n                            icon: item.icon,\n                            command: () => {\n                                this.selectedContentType = item;\n                                this.itemsLoaded = ItemsType.CONTENT;\n                                this.loadContentlets(item);\n                                this.clearFilter.emit(ItemsType.CONTENT);\n                            }\n                        };\n                    });\n                }),\n                take(1)\n            )\n            .subscribe((items) => {\n                this.items = items;\n                this.itemsLoaded = ItemsType.CONTENTTYPE;\n                if (this.items.length) {\n                    this.title = 'Select a content type';\n                    this.cd.detectChanges();\n                    this.resetKeyManager();\n                } else {\n                    this.title = `No results`;\n                    this.cd.detectChanges();\n                }\n\n                this.cd.detectChanges();\n                this.resetKeyManager();\n            });\n    }\n\n    private loadContentlets(contentType: DotCMSContentType, filter = '') {\n        this.suggestionsService\n            .getContentlets({\n                contentType: contentType.variable,\n                filter,\n                currentLanguage: this.currentLanguage\n            })\n            .pipe(take(1))\n            .subscribe((contentlets) => {\n                this.items = contentlets.map((contentlet) => {\n                    const { languageId } = contentlet;\n                    contentlet.language = this.getContentletLanguage(languageId);\n\n                    return {\n                        label: contentlet.title,\n                        icon: 'contentlet/image',\n                        data: {\n                            contentlet: contentlet\n                        },\n                        command: () => {\n                            this.onSelection({\n                                payload: contentlet,\n                                type: {\n                                    name: 'dotContent'\n                                }\n                            });\n                        }\n                    };\n                });\n                if (this.items.length) {\n                    this.title = 'Select a contentlet';\n                    this.cd.detectChanges();\n                    this.resetKeyManager();\n                } else {\n                    this.title = `No results for <b>${contentType.name}</b>`;\n                    this.cd.detectChanges();\n                }\n            });\n    }\n\n    private getContentletLanguage(languageId: number): string {\n        const { languageCode, countryCode } = this.dotLangs[languageId];\n\n        if (!languageCode || !countryCode) {\n            return '';\n        }\n\n        return `${languageCode}-${countryCode}`;\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'dot-action-button',\n    templateUrl: './action-button.component.html',\n    styleUrls: ['./action-button.component.scss']\n})\nexport class ActionButtonComponent {}\n","import { Injectable } from '@angular/core';\n/**\n * Encapsulate string utils methods.\n */\n@Injectable()\nexport class StringUtils {\n    /**\n     * Get from text, the line number (indexLine), null if it does not exists.\n     * @param text\n     * @param indexLine\n     * @returns string\n     */\n    getLine(text: string, indexLine: number): string {\n        let line: string = null;\n\n        if (text) {\n            const lines = text.split('\\n');\n            line = lines && lines.length > indexLine ? lines[indexLine] : null;\n        }\n\n        return line;\n    } // getLine.\n\n    /**\n     * Get an string and return it camelcased, ex: \"Hello World\" > \"helloWorld\"\n     * @param str\n     * @returns string\n     */\n    camelize(str): string {\n        return str\n            .replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (letter, index) => {\n                return index === 0 ? letter.toLowerCase() : letter.toUpperCase();\n            })\n            .replace(/\\s+/g, '');\n    }\n\n    /**\n     * Return a string with the first char in uppercase\n     *\n     * @param string str\n     * @returns string\n     *\n     * @memberof StringUtils\n     */\n    titleCase(str: string): string {\n        return `${str.charAt(0).toLocaleUpperCase()}${str.slice(1)}`;\n    }\n} // E:O:F:StringUtils.\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n    production: false\n};\n","/**\n * Created by oswaldogallango on 9/27/16.\n */\n\nexport class HttpRequestUtils {\n    /**\n     * Get a map with the url querystring parameters\n     * @returns Map<string, string>\n     */\n    // TODO: change the getQueryParams() with an NG2 method equivalent to QueryParams on NGRX.\n    getQueryParams(): Map<string, string> {\n        const split: string[] = window.location.search.substring(1).split('&');\n        const map: Map<string, string> = new Map();\n\n        split.forEach((param) => {\n            const paramSplit: string[] = param.split('=');\n            map.set(paramSplit[0], paramSplit[1]);\n        });\n\n        return map;\n    }\n\n    /**\n     * Get a single parameter form the query string, null if does not exits.\n     * it is based on the window.location.href.\n     * @returns string\n     */\n    getQueryStringParam(name: string): string {\n        let value = null;\n        const regex = new RegExp('[?&]' + name.replace(/[\\[\\]]/g, '\\\\$&') + '(=([^&#]*)|&|#|$)');\n        const results = regex.exec(window.location.href);\n\n        if (results && results[2]) {\n            value = decodeURIComponent(results[2].replace(/\\+/g, ' '));\n        }\n\n        return value;\n    } // getQueryStringParam.\n}\n","import { Injectable } from '@angular/core';\nimport { StringUtils } from './string-utils.service';\nimport { environment } from '../environments/environment';\nimport { HttpRequestUtils } from './util/http-request-utils';\nconst DEV_MODE_PARAM = 'devMode';\n\n/**\n * LoggerService to log.  Allows logger to be changed at runtime\n * To set the logger level in the console run logger.level=logger.Level.DEBUG\n */\n@Injectable()\nexport class LoggerService {\n    private showLogs = true;\n    private httpRequestUtils: HttpRequestUtils;\n\n    constructor(private stringUtils: StringUtils) {\n        this.httpRequestUtils = new HttpRequestUtils();\n        this.showLogs = this.shouldShowLogs();\n\n        if (this.showLogs) {\n            console.info('Setting the logger --> Developer mode logger on');\n        }\n    }\n\n    info(message?: any, ...optionalParams: any[]): void {\n        if (optionalParams && optionalParams.length > 0) {\n            console.info(this.wrapMessage(message), optionalParams);\n        } else {\n            console.info(this.wrapMessage(message));\n        }\n    }\n\n    error(message?: any, ...optionalParams: any[]): void {\n        if (optionalParams && optionalParams.length > 0) {\n            console.error(this.wrapMessage(message), optionalParams);\n        } else {\n            console.error(this.wrapMessage(message));\n        }\n    }\n\n    warn(message?: any, ...optionalParams: any[]): void {\n        if (optionalParams && optionalParams.length > 0) {\n            console.warn(this.wrapMessage(message), optionalParams);\n        } else {\n            console.warn(this.wrapMessage(message));\n        }\n    }\n\n    debug(message?: any, ...optionalParams: any[]): void {\n        if (optionalParams && optionalParams.length > 0) {\n            console.debug(this.wrapMessage(message), optionalParams);\n        } else {\n            console.debug(this.wrapMessage(message));\n        }\n    }\n\n    /**\n     * Determine if angular should show lo\n     * @returns boolean\n     */\n    shouldShowLogs(): boolean {\n        const devMode: string = this.httpRequestUtils.getQueryStringParam(DEV_MODE_PARAM);\n        return !environment.production || devMode === 'on';\n    } // isProduction.\n\n    private wrapMessage(message?: any): string {\n        // on prod, we do not attach the caller.\n        return this.showLogs ? message : this.getCaller() + '>> ' + message;\n    }\n    private getCaller(): string {\n        let caller = 'unknown';\n        try {\n            throw new Error();\n        } catch (e) {\n            caller = this.cleanCaller(this.stringUtils.getLine(e.stack, 4));\n        }\n        return caller;\n    }\n\n    private cleanCaller(caller: string): string {\n        return caller ? caller.trim().substr(3) : 'unknown';\n    }\n}\n","import { Injectable, Inject, LOCALE_ID } from '@angular/core';\nimport { LoggerService } from '../logger.service';\n\n@Injectable()\nexport class UserModel {\n    username: string;\n    password: string;\n    locale: string;\n    suppressAlerts = false;\n\n    constructor(private loggerService: LoggerService, @Inject(LOCALE_ID) localeId: string) {\n        this.locale = localeId; // default to 'en-US'\n        try {\n            const url = window.location.search.substring(1);\n            this.locale = this.checkQueryForUrl(url);\n        } catch (e) {\n            this.loggerService.error('Could not set locale from URL.');\n        }\n    }\n\n    checkQueryForUrl(locationQuery: string): string {\n        let locale = this.locale;\n        if (locationQuery && locationQuery.length) {\n            const q = locationQuery;\n            const token = 'locale=';\n            const idx = q.indexOf(token);\n            if (idx >= 0) {\n                let end = q.indexOf('&', idx);\n                end = end !== -1 ? end : q.indexOf('#', idx);\n                end = end !== -1 ? end : q.length;\n                locale = q.substring(idx + token.length, end);\n            }\n        }\n        return locale;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { UserModel } from './shared/user.model';\nimport { LoggerService } from './logger.service';\n\n@Injectable()\nexport class ApiRoot {\n    siteId = '48190c8c-42c4-46af-8d1a-0cd5db894797';\n    authUser: UserModel;\n    hideFireOn = false;\n    hideRulePushOptions = false;\n\n    static parseQueryParam(query: string, token: string): string {\n        let idx = -1;\n        let result = null;\n        token = token + '=';\n        if (query && query.length) {\n            idx = query.indexOf(token);\n        }\n        if (idx >= 0) {\n            let end = query.indexOf('&', idx);\n            end = end !== -1 ? end : query.length;\n            result = query.substring(idx + token.length, end);\n        }\n\n        return result;\n    }\n\n    constructor(authUser: UserModel, private loggerService: LoggerService) {\n        this.authUser = authUser;\n\n        try {\n            let query = document.location.search.substring(1);\n            if (query === '') {\n                if (document.location.hash.indexOf('?') >= 0) {\n                    query = document.location.hash.substr(document.location.hash.indexOf('?') + 1);\n                }\n            }\n            const siteId = ApiRoot.parseQueryParam(query, 'realmId');\n            if (siteId) {\n                this.siteId = siteId;\n                this.loggerService.debug('Site Id set to ', this.siteId);\n            }\n            const hideFireOn = ApiRoot.parseQueryParam(query, 'hideFireOn');\n            if (hideFireOn) {\n                this.hideFireOn = hideFireOn === 'true' || hideFireOn === '1';\n                this.loggerService.debug('hideFireOn set to ', this.hideFireOn);\n            }\n\n            const hideRulePushOptions = ApiRoot.parseQueryParam(query, 'hideRulePushOptions');\n            if (hideRulePushOptions) {\n                this.hideRulePushOptions =\n                    hideRulePushOptions === 'true' || hideRulePushOptions === '1';\n                this.loggerService.debug('hideRulePushOptions set to ', this.hideRulePushOptions);\n            }\n\n            this.configureUser(query, authUser);\n        } catch (e) {\n            this.loggerService.error('Could not set baseUrl automatically.', e);\n        }\n    }\n\n    private configureUser(query: string, user: UserModel): void {\n        user.suppressAlerts = ApiRoot.parseQueryParam(query, 'suppressAlerts') === 'true';\n    }\n}\n","import { Injectable } from '@angular/core';\n/**\n * Check if the browser is ie11\n *\n * @export\n * @class BrowserUtil\n * @deprecated We don't support IE11 anymore\n */\n@Injectable()\nexport class BrowserUtil {\n    public isIE11(): boolean {\n        return navigator.appName === 'Netscape' && navigator.appVersion.indexOf('Trident') !== -1;\n    }\n}\n","export enum HttpCode {\n    BAD_REQUEST = 400,\n    FORBIDDEN = 403,\n    NOT_FOUND = 404,\n    NO_CONTENT = 204,\n    SERVER_ERROR = 500,\n    UNAUTHORIZED = 401\n}\n","import { HttpCode } from './http-code';\nimport { HttpRequest, HttpErrorResponse, HttpResponse } from '@angular/common/http';\n\nexport const NETWORK_CONNECTION_ERROR = 1;\nexport const UNKNOWN_RESPONSE_ERROR = 2;\nexport const SERVER_RESPONSE_ERROR = 3;\nexport const CLIENTS_ONLY_MESSAGES = {\n    1: 'Could not connect to server.'\n};\n\nexport class CwError {\n    constructor(\n        public code: number,\n        public message: string,\n        public request?: HttpRequest<any>,\n        public response?: HttpErrorResponse,\n        public source?: any\n    ) {}\n}\n\nexport interface ResponseError {\n    response: HttpResponse<any>;\n    msg: string;\n}\n\nexport function isSuccess(resp: HttpResponse<any>): boolean {\n    return resp.status > 199 && resp.status < 300;\n}\n\nexport function hasContent(resp: HttpResponse<any>): boolean {\n    return isSuccess(resp) && resp.status !== HttpCode.NO_CONTENT;\n}\n","import { HttpResponse, HttpHeaders } from '@angular/common/http';\nimport { DotCMSResponse } from '../core-web.service';\n\n/**\n *\n *\n * <code>\n * {\n *   \"errors\":[],\n *   \"entity\":{},\n *   \"messages\":[],\n *   \"i18nMessagesMap\":{}\n * }\n * </code>\n */\nexport class ResponseView<T = any> {\n    private bodyJsonObject: DotCMSResponse<T>;\n    private headers: HttpHeaders;\n\n    public constructor(private resp: HttpResponse<DotCMSResponse<T>>) {\n        try {\n            this.bodyJsonObject = resp.body;\n            this.headers = resp.headers;\n        } catch (e) {\n            this.bodyJsonObject = null;\n        }\n    }\n\n    public header(headerName: string): string {\n        return this.headers.get(headerName);\n    }\n\n    get i18nMessagesMap(): { [key: string]: string } {\n        return this.bodyJsonObject.i18nMessagesMap;\n    }\n\n    get contentlets(): T {\n        return this.bodyJsonObject.contentlets;\n    }\n\n    get entity(): T {\n        return this.bodyJsonObject.entity;\n    }\n\n    get tempFiles(): T {\n        return this.bodyJsonObject.tempFiles;\n    }\n\n    get errorsMessages(): string {\n        let errorMessages = '';\n\n        if (this.bodyJsonObject.errors) {\n            this.bodyJsonObject.errors.forEach((e: any) => {\n                errorMessages += e.message;\n            });\n        } else {\n            errorMessages = this.bodyJsonObject.messages.toString();\n        }\n\n        return errorMessages;\n    }\n\n    get status(): number {\n        return this.resp.status;\n    }\n\n    get response(): HttpResponse<DotCMSResponse<T>> {\n        return this.resp;\n    }\n\n    public existError(errorCode: string): boolean {\n        return (\n            this.bodyJsonObject.errors &&\n            this.bodyJsonObject.errors.filter((e: any) => e.errorCode === errorCode).length > 0\n        );\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject, Observable, throwError } from 'rxjs';\nimport { map, catchError, filter } from 'rxjs/operators';\n\nimport {\n    CwError,\n    NETWORK_CONNECTION_ERROR,\n    UNKNOWN_RESPONSE_ERROR,\n    CLIENTS_ONLY_MESSAGES,\n    SERVER_RESPONSE_ERROR\n} from './util/http-response-util';\nimport { ResponseView } from './util/response-view';\nimport { LoggerService } from './logger.service';\nimport { HttpCode } from './util/http-code';\nimport { Router } from '@angular/router';\nimport {\n    HttpClient,\n    HttpRequest,\n    HttpHeaders,\n    HttpParams,\n    HttpResponse,\n    HttpEventType,\n    HttpEvent,\n    HttpErrorResponse\n} from '@angular/common/http';\n\nexport interface DotCMSResponse<T> {\n    contentlets?: T;\n    entity?: T;\n    tempFiles?: T; // /api/v1/temp don't have entity\n    errors: string[];\n    i18nMessagesMap: { [key: string]: string };\n    messages: string[];\n    permissions: string[];\n}\n\nexport interface DotRequestOptionsArgs {\n    url: string;\n    body?:\n        | {\n              [key: string]: any;\n          }\n        | string;\n    method?: string;\n    params?: {\n        [key: string]: any;\n    };\n    headers?: {\n        [key: string]: any;\n    };\n}\n\n@Injectable()\nexport class CoreWebService {\n    private httpErrosSubjects: Subject<any>[] = [];\n\n    constructor(\n        private loggerService: LoggerService,\n        private router: Router,\n        private http: HttpClient\n    ) {}\n\n    /**\n     *\n     * Request data from dotCMS endpoints\n     *\n     * @template T\n     * @param {DotRequestOptionsArgs} options\n     * @return {*}  {Observable<HttpResponse<any>>}\n     * @memberof CoreWebService\n     * @deprecated\n     */\n    request<T>(options: DotRequestOptionsArgs): Observable<HttpResponse<T | unknown> | T> {\n        if (!options.method) {\n            options.method = 'GET';\n        }\n\n        const request = this.getRequestOpts(options);\n        const source = options.body;\n\n        return this.http.request(request).pipe(\n            filter(\n                (event: HttpEvent<HttpResponse<DotCMSResponse<T>> | any>) =>\n                    event.type === HttpEventType.Response\n            ),\n            map((resp: HttpResponse<DotCMSResponse<T>>) => {\n                // some endpoints have empty body.\n                try {\n                    return resp.body;\n                } catch (error) {\n                    return resp;\n                }\n            }),\n            catchError(\n                (response: HttpErrorResponse, _original: Observable<any>): Observable<any> => {\n                    if (response) {\n                        this.emitHttpError(response.status);\n\n                        if (\n                            response.status === HttpCode.SERVER_ERROR ||\n                            response.status === HttpCode.FORBIDDEN\n                        ) {\n                            if (\n                                response.statusText &&\n                                response.statusText.indexOf('ECONNREFUSED') >= 0\n                            ) {\n                                throw new CwError(\n                                    NETWORK_CONNECTION_ERROR,\n                                    CLIENTS_ONLY_MESSAGES[NETWORK_CONNECTION_ERROR],\n                                    request,\n                                    response,\n                                    source\n                                );\n                            } else {\n                                throw new CwError(\n                                    SERVER_RESPONSE_ERROR,\n                                    response.error.message,\n                                    request,\n                                    response,\n                                    source\n                                );\n                            }\n                        } else if (response.status === HttpCode.NOT_FOUND) {\n                            this.loggerService.error(\n                                'Could not execute request: 404 path not valid.',\n                                options.url\n                            );\n                            throw new CwError(\n                                UNKNOWN_RESPONSE_ERROR,\n                                response.headers.get('error-message'),\n                                request,\n                                response,\n                                source\n                            );\n                        }\n                    }\n                    return null;\n                }\n            )\n        );\n    }\n\n    /**\n     * Return a response adapted to the follow json format:\n     *\n     * <code>\n     * {\n     *   \"errors\":[],\n     *   \"entity\":{},\n     *   \"messages\":[],\n     *   \"i18nMessagesMap\":{}\n     * }\n     * </code>\n     *\n     * @RequestOptionsArgs options\n     * @returns Observable<ResponseView>\n     */\n    requestView<T = any>(options: DotRequestOptionsArgs): Observable<ResponseView<T>> {\n        if (!options.method) {\n            options.method = 'GET';\n        }\n\n        let request;\n\n        if (options.body) {\n            if (typeof options.body === 'string') {\n                request = this.getRequestOpts<string>(options);\n            } else {\n                request = this.getRequestOpts<{ [key: string]: any }>(options);\n            }\n        } else {\n            request = this.getRequestOpts(options);\n        }\n\n        return this.http.request(request).pipe(\n            filter(\n                (event: HttpEvent<HttpResponse<DotCMSResponse<T>> | any>) =>\n                    event.type === HttpEventType.Response\n            ),\n            map((resp: HttpResponse<DotCMSResponse<T>>) => {\n                if (resp.body && resp.body.errors && resp.body.errors.length > 0) {\n                    return this.handleRequestViewErrors<T>(resp);\n                } else {\n                    return new ResponseView<T>(resp);\n                }\n            }),\n            catchError((err: HttpErrorResponse) => {\n                this.emitHttpError(err.status);\n                return throwError(this.handleResponseHttpErrors(err));\n            })\n        );\n    }\n\n    /**\n     * Emit to the subscriber when the request fail\n     *\n     * @param {number} httpErrorCode\n     * @returns {Observable<number>}\n     * @memberof CoreWebService\n     */\n    subscribeToHttpError(httpErrorCode: number): Observable<void> {\n        if (!this.httpErrosSubjects[httpErrorCode]) {\n            this.httpErrosSubjects[httpErrorCode] = new Subject();\n        }\n\n        return this.httpErrosSubjects[httpErrorCode].asObservable();\n    }\n\n    private handleRequestViewErrors<T>(resp: HttpResponse<DotCMSResponse<T>>): ResponseView<T> {\n        if (resp.status === 401) {\n            this.router.navigate(['/public/login']);\n        }\n\n        return new ResponseView<T>(resp);\n    }\n\n    private handleResponseHttpErrors(resp: HttpErrorResponse): HttpErrorResponse {\n        if (resp.status === 401) {\n            this.router.navigate(['/public/login']);\n        }\n\n        return resp;\n    }\n\n    private emitHttpError(status: number): void {\n        if (this.httpErrosSubjects[status]) {\n            this.httpErrosSubjects[status].next();\n        }\n    }\n\n    private getRequestOpts<T>(options: DotRequestOptionsArgs): HttpRequest<T> {\n        const headers = this.getHttpHeaders(options.headers);\n        const params = this.getHttpParams(options.params);\n        const url = this.getFixedUrl(options.url);\n        const body = <T>options.body || null;\n\n        if (\n            options.method === 'POST' ||\n            options.method === 'PUT' ||\n            options.method === 'PATCH' ||\n            options.method === 'DELETE'\n        ) {\n            return new HttpRequest<T>(options.method, url, body, {\n                headers,\n                params\n            });\n        }\n\n        const method = <'GET' | 'HEAD' | 'JSONP' | 'OPTIONS'>options.method;\n        return new HttpRequest<T>(method, url, {\n            headers,\n            params\n        });\n    }\n\n    private getHttpHeaders(headers: { [key: string]: string }): HttpHeaders {\n        let httpHeaders = this.getDefaultRequestHeaders();\n\n        if (headers && Object.keys(headers).length) {\n            Object.keys(headers).forEach((key) => {\n                httpHeaders = httpHeaders.set(key, headers[key]);\n            });\n\n            // If Content-Type == 'multipart/form-data' we need to remove Content-Type,\n            // otherwise \"boundary\" will not be added to Content-Type in the Header\n            if (headers['Content-Type'] === 'multipart/form-data') {\n                httpHeaders = httpHeaders.delete('Content-Type');\n            }\n        }\n        return httpHeaders;\n    }\n\n    private getFixedUrl(url: string): string {\n        if (url?.startsWith('api')) {\n            return `/${url}`;\n        }\n\n        const version = url ? url.split('/')[0] : '';\n        if (version.match(/v[1-9]/g)) {\n            return `/api/${url}`;\n        }\n        return url;\n    }\n\n    private getHttpParams(params: { [key: string]: any }): HttpParams {\n        if (params && Object.keys(params).length) {\n            let httpParams = new HttpParams();\n\n            Object.keys(params).forEach((key: string) => {\n                httpParams = httpParams.set(key, params[key]);\n            });\n            return httpParams;\n        }\n\n        return null;\n    }\n\n    private getDefaultRequestHeaders(): HttpHeaders {\n        const headers = new HttpHeaders()\n            .set('Accept', '*/*')\n            .set('Content-Type', 'application/json');\n        return headers;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { DotPushPublishDialogData } from '@dotcms/dotcms-models';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DotPushPublishDialogService {\n    private data: Subject<DotPushPublishDialogData> = new Subject<DotPushPublishDialogData>();\n\n    get showDialog$(): Observable<DotPushPublishDialogData> {\n        return this.data.asObservable();\n    }\n\n    open(data: DotPushPublishDialogData): void {\n        this.data.next(data);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\n/**\n * Router service with common routing methods\n *\n * @export\n * @class DotRouterService\n * @deprecated Please use @services/dot-router/dot-router.service\n */\n@Injectable()\nexport class DotRouterService {\n    constructor(private router: Router) {}\n\n    public goToMain(): void {\n        this.router.navigate(['/c']);\n    }\n\n    public goToLogin(parameters?: any): void {\n        this.router.navigate(['/public/login'], parameters);\n    }\n\n    public goToURL(url: string): void {\n        this.router.navigate([url]);\n    }\n\n    public isPublicUrl(url: string): boolean {\n        return url.startsWith('/public');\n    }\n\n    public isFromCoreUrl(url: string): boolean {\n        return url.startsWith('/fromCore');\n    }\n\n    public isRootUrl(url: string): boolean {\n        return url === '/';\n    }\n\n    public gotoPortlet(portletId: string): void {\n        this.router.navigate([`c/${portletId.replace(' ', '_')}`]);\n    }\n\n    public goToForgotPassword(): void {\n        this.router.navigate(['/public/forgotPassword']);\n    }\n\n    public goToNotLicensed(): void {\n        this.router.navigate(['c/notLicensed']);\n    }\n}\n","import { CoreWebService } from './core-web.service';\nimport { Injectable } from '@angular/core';\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { pluck, filter, map, take } from 'rxjs/operators';\nimport { LoggerService } from './logger.service';\nimport { Menu } from './routing.service';\n\n/**\n * Created by josecastro on 7/29/16.\n *\n * Wraps the configuration properties for dotCMS in order to provide an\n * easier way to access the information.\n *\n */\nconst DOTCMS_WEBSOCKET_RECONNECT_TIME = 'dotcms.websocket.reconnect.time';\nconst DOTCMS_DISABLE_WEBSOCKET_PROTOCOL = 'dotcms.websocket.disable';\nconst DOTCMS_PAGINATOR_ROWS = 'dotcms.paginator.rows';\nconst DOTCMS_PAGINATOR_LINKS = 'dotcms.paginator.links';\nconst EMAIL_REGEX = 'emailRegex';\n\nexport interface DotUiColors {\n    primary: string;\n    secondary: string;\n    background: string;\n}\n\nexport interface ConfigParams {\n    colors: DotUiColors;\n    emailRegex: string;\n    license: {\n        displayServerId: string;\n        isCommunity: boolean;\n        level: number;\n        levelName: string;\n    };\n    logos: {\n        loginScreen: string;\n        navBar: string;\n    };\n    menu: Menu[];\n    paginatorLinks: number;\n    paginatorRows: number;\n    releaseInfo: {\n        buildDate: string;\n        version: string;\n    };\n    websocket: WebSocketConfigParams;\n}\n\nexport interface WebSocketConfigParams {\n    disabledWebsockets: boolean;\n    websocketReconnectTime: number;\n}\n\nexport interface DotTimeZone {\n    id: string;\n    label: string;\n    offset: string;\n}\n\n@Injectable()\nexport class DotcmsConfigService {\n    private configParamsSubject: BehaviorSubject<ConfigParams> = new BehaviorSubject(null);\n    private configUrl: string;\n\n    /**\n     * Initializes this class with the dotCMS core configuration parameters.\n     *\n     * @param configParams - The configuration properties for the current instance.\n     */\n    constructor(private coreWebService: CoreWebService, private loggerService: LoggerService) {\n        this.configUrl = 'v1/appconfiguration';\n        this.loadConfig();\n    }\n\n    getConfig(): Observable<ConfigParams> {\n        return this.configParamsSubject\n            .asObservable()\n            .pipe(filter((config: ConfigParams) => !!config));\n    }\n\n    loadConfig(): void {\n        this.loggerService.debug('Loading configuration on: ', this.configUrl);\n\n        this.coreWebService\n            .requestView({\n                url: this.configUrl\n            })\n            .pipe(pluck('entity'))\n            .subscribe((res: any) => {\n                this.loggerService.debug('Configuration Loaded!', res);\n\n                const configParams: ConfigParams = {\n                    colors: res.config.colors,\n                    emailRegex: res.config[EMAIL_REGEX],\n                    license: res.config.license,\n                    logos: res.config.logos,\n                    menu: res.menu,\n                    paginatorLinks: res.config[DOTCMS_PAGINATOR_LINKS],\n                    paginatorRows: res.config[DOTCMS_PAGINATOR_ROWS],\n                    releaseInfo: {\n                        buildDate: res.config.releaseInfo?.buildDate,\n                        version: res.config.releaseInfo?.version\n                    },\n                    websocket: {\n                        websocketReconnectTime:\n                            res.config.websocket[DOTCMS_WEBSOCKET_RECONNECT_TIME],\n                        disabledWebsockets: res.config.websocket[DOTCMS_DISABLE_WEBSOCKET_PROTOCOL]\n                    }\n                };\n\n                this.configParamsSubject.next(configParams);\n\n                this.loggerService.debug('this.configParams', configParams);\n\n                return res;\n            });\n    }\n\n    /**\n     * Return a list of timezones.\n     * @returns Observable<DotTimeZone[]>\n     * @memberof DotcmsConfigService\n     */\n    getTimeZones(): Observable<DotTimeZone[]> {\n        return this.coreWebService\n            .requestView({\n                url: this.configUrl\n            })\n            .pipe(\n                pluck('entity', 'config', 'timezones'),\n                map((timezones: DotTimeZone[]) => {\n                    return timezones.sort((a: DotTimeZone, b: DotTimeZone) => {\n                        if (a.label > b.label) {\n                            return 1;\n                        }\n                        if (a.label < b.label) {\n                            return -1;\n                        }\n                        // a must be equal to b\n                        return 0;\n                    });\n                })\n            );\n    }\n\n    /**\n     * Return the system Timezone.\n     * @returns Observable<DotTimeZone[]>\n     * @memberof DotcmsConfigService\n     */\n    getSystemTimeZone(): Observable<DotTimeZone> {\n        return this.coreWebService\n            .requestView({\n                url: this.configUrl\n            })\n            .pipe(pluck('entity', 'config', 'systemTimezone'), take(1));\n    }\n}\n","import { Observable, Subject } from 'rxjs';\nimport { LoggerService } from '../logger.service';\n\nexport abstract class Protocol {\n    protected _open: Subject<any> = new Subject<any>();\n    protected _close: Subject<any> = new Subject<any>();\n    protected _message: Subject<any> = new Subject<any>();\n    protected _error: Subject<any> = new Subject<any>();\n\n    constructor(protected loggerService: LoggerService) {}\n\n    abstract connect(): void;\n    abstract close(): void;\n\n    message$(): Observable<any> {\n        return this._message.asObservable();\n    }\n\n    open$(): Observable<any> {\n        return this._open.asObservable();\n    }\n\n    close$(): Observable<any> {\n        return this._close.asObservable();\n    }\n\n    error$(): Observable<any> {\n        return this._error.asObservable();\n    }\n\n    reconnect(): void {\n        this.close();\n        setTimeout(() => {\n            this.connect();\n        }, 0);\n    }\n\n    destroy(): void {\n        this._open.complete();\n        this._close.complete();\n        this._message.complete();\n        this._error.complete();\n    }\n}\n","import { Subject } from 'rxjs';\nimport { LoggerService } from '../logger.service';\nimport { Protocol } from './protocol';\n\nenum WEB_SOCKET_PROTOCOL_CODE {\n    NORMAL_CLOSE_CODE = 1000,\n    GO_AWAY_CODE = 1001\n}\nexport class WebSocketProtocol extends Protocol {\n    dataStream: Subject<{}> = new Subject();\n    private socket: WebSocket;\n    private errorThrown: boolean;\n\n    constructor(private url: string, loggerService: LoggerService) {\n        super(loggerService);\n\n        const match = new RegExp('wss?://').test(url);\n        if (!match) {\n            throw new Error('Invalid url provided [' + url + ']');\n        }\n    }\n\n    connect(): void {\n        this.errorThrown = false;\n        this.loggerService.debug('Connecting with Web socket', this.url);\n\n        try {\n            this.socket = new WebSocket(this.url);\n\n            this.socket.onopen = (ev: Event) => {\n                this.loggerService.debug('Web socket connected', this.url);\n                this._open.next(ev);\n            };\n\n            this.socket.onmessage = (ev: MessageEvent) => {\n                this._message.next(JSON.parse(ev.data));\n            };\n\n            this.socket.onclose = (ev: CloseEvent) => {\n                if (!this.errorThrown) {\n                    if (ev.code === WEB_SOCKET_PROTOCOL_CODE.NORMAL_CLOSE_CODE) {\n                        this._close.next(ev);\n                        this._message.complete();\n                    } else {\n                        this._error.next(ev);\n                    }\n                }\n            };\n\n            this.socket.onerror = (ev: ErrorEvent) => {\n                this.errorThrown = true;\n                this._error.next(ev);\n            };\n        } catch (error) {\n            this.loggerService.debug('Web EventsSocket connection error', error);\n            this._error.next(error);\n        }\n    }\n\n    close(): void {\n        if (this.socket && this.socket.readyState !== 3) {\n            this.socket.close();\n        }\n    }\n}\n","import { Protocol } from './protocol';\nimport { LoggerService } from '../logger.service';\nimport { CoreWebService } from '../core-web.service';\nimport { pluck, take } from 'rxjs/operators';\n\nexport class LongPollingProtocol extends Protocol {\n    private isClosed = false;\n    private isAlreadyOpen = false;\n    private lastCallback: number;\n\n    constructor(\n        private url: string,\n        loggerService: LoggerService,\n        private coreWebService: CoreWebService\n    ) {\n        super(loggerService);\n    }\n\n    /**\n     * Connect to a Long Polling connection\n     */\n    connect(): void {\n        this.connectLongPooling();\n    }\n\n    /**\n     * Close the connection\n     */\n    close(): void {\n        this.loggerService.info('destroying long polling');\n        this.isClosed = true;\n        this.isAlreadyOpen = false;\n        this._close.next();\n    }\n\n    private getLastCallback(data): number {\n        this.lastCallback =\n            data.length > 0 ? data[data.length - 1].creationDate + 1 : this.lastCallback;\n        return this.lastCallback;\n    }\n\n    private connectLongPooling(lastCallBack?: number): void {\n        this.isClosed = false;\n        this.loggerService.info('Starting long polling connection');\n\n        this.coreWebService\n            .requestView({\n                url: this.url,\n                params: lastCallBack ? { lastCallBack: lastCallBack } : {}\n            })\n            .pipe(pluck('entity'), take(1))\n            .subscribe(\n                (data) => {\n                    this.loggerService.debug('new Events', data);\n                    this.triggerOpen();\n\n                    if (data instanceof Array) {\n                        data.forEach((message) => {\n                            this._message.next(message);\n                        });\n                    } else {\n                        this._message.next(data);\n                    }\n\n                    if (!this.isClosed) {\n                        this.connectLongPooling(this.getLastCallback(data));\n                    }\n                },\n                (e) => {\n                    this.loggerService.info('A error occur connecting through long polling');\n                    this._error.next(e);\n                }\n            );\n    }\n\n    private triggerOpen(): void {\n        if (!this.isAlreadyOpen) {\n            this._open.next(true);\n            this.isAlreadyOpen = true;\n        }\n    }\n}\n","/**\n * Represent a url to connect with a evend end point\n *\n * @export\n */\nexport class DotEventsSocketURL {\n    constructor(private url: string, private useSSL: boolean) {}\n\n    /**\n     * Return the web socket url to connect with the Event end point\n     *\n     * @returns string\n     * @memberof DotEventsSocketURL\n     */\n    public getWebSocketURL(): string {\n        return `${this.getWebSocketProtocol()}://${this.url}`;\n    }\n\n    /**\n     * Return the long polling url to connect with the Event end point\n     *\n     * @returns string\n     * @memberof DotEventsSocketURL\n     */\n    public getLongPoolingURL(): string {\n        return `${this.getHttpProtocol()}://${this.url}`;\n    }\n\n    private getWebSocketProtocol(): string {\n        return `${this.useSSL ? 'wss' : 'ws'}`;\n    }\n\n    private getHttpProtocol(): string {\n        return `${this.useSSL ? 'https' : 'http'}`;\n    }\n}\n","import { WebSocketProtocol } from './websockets-protocol';\nimport { Protocol } from './protocol';\nimport { LoggerService } from '../logger.service';\nimport { LongPollingProtocol } from './long-polling-protocol';\nimport { CoreWebService } from '../core-web.service';\nimport { ConfigParams, DotcmsConfigService, WebSocketConfigParams } from '../dotcms-config.service';\nimport { Subject, Observable } from 'rxjs';\nimport { DotEventsSocketURL } from './models/dot-event-socket-url';\nimport { DotEventMessage } from './models/dot-event-message';\nimport { Injectable } from '@angular/core';\nimport { tap, pluck } from 'rxjs/operators';\n\nenum ConnectionStatus {\n    NONE,\n    CONNECTING,\n    RECONNECTING,\n    CONNECTED,\n    CLOSED\n}\n\n/**\n * It is a socket to receive notifications when a event is tiggered by the server, first this try to stablish a web socket\n * connection if it fail then try to a Long polling connection instead.\n *\n * If the connection is lost in any point the it try to reconnect automaticatly after a time set by configuration parameters.\n *\n * @export\n */\n@Injectable()\nexport class DotEventsSocket {\n    private protocolImpl: Protocol;\n\n    private status: ConnectionStatus = ConnectionStatus.NONE;\n    private _message: Subject<DotEventMessage> = new Subject<DotEventMessage>();\n    private _open: Subject<boolean> = new Subject<boolean>();\n    private webSocketConfigParams: WebSocketConfigParams;\n\n    /**\n     * Initializes this service with the configuration properties that are\n     * necessary for opening the Websocket with the System Events end-point.\n     *\n     * @param dotcmsConfigService - The dotCMS configuration properties that include\n     * the Websocket parameters.\n     */\n    constructor(\n        private dotEventsSocketURL: DotEventsSocketURL,\n        private dotcmsConfigService: DotcmsConfigService,\n        private loggerService: LoggerService,\n        private coreWebService: CoreWebService\n    ) {}\n\n    /**\n     * Connect to a Event socket using  Web Socket protocol,\n     * if a Web Socket connection can be stablish then try again with a Long Polling connection.\n     *\n     * @returns Observable<ConfigParams>\n     * @memberof DotEventsSocket\n     */\n    connect(): Observable<ConfigParams> {\n        return this.init().pipe(\n            tap(() => {\n                this.status = ConnectionStatus.CONNECTING;\n                this.connectProtocol();\n            })\n        );\n    }\n\n    /**\n     * Destroy the Event socket\n     *\n     * @memberof DotEventsSocket\n     */\n    destroy(): void {\n        // On logout, meaning no authenticated user lets try to close the socket\n        if (this.protocolImpl) {\n            this.loggerService.debug('Closing socket');\n            this.status = ConnectionStatus.CLOSED;\n            this.protocolImpl.close();\n        }\n    }\n\n    /**\n     * Trigger when a message is received\n     *\n     * @returns Observable<DotEventMessage>\n     * @memberof DotEventsSocket\n     */\n    messages(): Observable<DotEventMessage> {\n        return this._message.asObservable();\n    }\n\n    /**\n     * Trigger when a connect is open\n     *\n     * @returns Observable<boolean>\n     * @memberof DotEventsSocket\n     */\n    open(): Observable<boolean> {\n        return this._open.asObservable();\n    }\n\n    /**\n     * Return true if the socket is connected otherwise return false\n     *\n     * @returns boolean\n     * @memberof DotEventsSocket\n     */\n    isConnected(): boolean {\n        return this.status === ConnectionStatus.CONNECTED;\n    }\n\n    private init(): Observable<any> {\n        return this.dotcmsConfigService.getConfig().pipe(\n            pluck('websocket'),\n            tap((webSocketConfigParams: WebSocketConfigParams) => {\n                this.webSocketConfigParams = webSocketConfigParams;\n                this.protocolImpl =\n                    this.isWebSocketsBrowserSupport() && !webSocketConfigParams.disabledWebsockets\n                        ? this.getWebSocketProtocol()\n                        : this.getLongPollingProtocol();\n            })\n        );\n    }\n\n    private connectProtocol(): void {\n        this.protocolImpl.open$().subscribe(() => {\n            this.status = ConnectionStatus.CONNECTED;\n            this._open.next(true);\n        });\n\n        this.protocolImpl.error$().subscribe(() => {\n            if (this.shouldTryWithLongPooling()) {\n                this.loggerService.info(\n                    'Error connecting with Websockets, trying again with long polling'\n                );\n\n                this.protocolImpl.destroy();\n                this.protocolImpl = this.getLongPollingProtocol();\n                this.connectProtocol();\n            } else {\n                setTimeout(() => {\n                    this.status = this.getAfterErrorStatus();\n                    this.protocolImpl.connect();\n                }, this.webSocketConfigParams.websocketReconnectTime);\n            }\n        });\n\n        this.protocolImpl.close$().subscribe((_event) => {\n            this.status = ConnectionStatus.CLOSED;\n        });\n\n        this.protocolImpl.message$().subscribe(\n            (res) => this._message.next(res),\n            (e) => this.loggerService.debug('Error in the System Events service: ' + e.message),\n            () => this.loggerService.debug('Completed')\n        );\n\n        this.protocolImpl.connect();\n    }\n\n    private getAfterErrorStatus(): ConnectionStatus {\n        return this.status === ConnectionStatus.CONNECTING\n            ? ConnectionStatus.CONNECTING\n            : ConnectionStatus.RECONNECTING;\n    }\n\n    private shouldTryWithLongPooling(): boolean {\n        return (\n            this.isWebSocketProtocol() &&\n            this.status !== ConnectionStatus.CONNECTED &&\n            this.status !== ConnectionStatus.RECONNECTING\n        );\n    }\n\n    private getWebSocketProtocol(): WebSocketProtocol {\n        return new WebSocketProtocol(this.dotEventsSocketURL.getWebSocketURL(), this.loggerService);\n    }\n\n    private getLongPollingProtocol(): LongPollingProtocol {\n        return new LongPollingProtocol(\n            this.dotEventsSocketURL.getLongPoolingURL(),\n            this.loggerService,\n            this.coreWebService\n        );\n    }\n\n    private isWebSocketsBrowserSupport(): boolean {\n        return 'WebSocket' in window || 'MozWebSocket' in window;\n    }\n\n    private isWebSocketProtocol(): boolean {\n        return this.protocolImpl instanceof WebSocketProtocol;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { LoggerService } from './logger.service';\nimport { Subject } from 'rxjs';\nimport { DotEventTypeWrapper } from './models';\nimport { DotEventsSocket } from './util/dot-event-socket';\nimport { DotEventMessage } from './util/models/dot-event-message';\nimport { switchMap } from 'rxjs/operators';\n\n@Injectable()\nexport class DotcmsEventsService {\n    private subjects = [];\n    private messagesSub: Subscription;\n\n    constructor(private dotEventsSocket: DotEventsSocket, private loggerService: LoggerService) {}\n\n    /**\n     * Close the socket\n     *\n     * @memberof DotcmsEventsService\n     */\n    destroy(): void {\n        this.dotEventsSocket.destroy();\n        this.messagesSub.unsubscribe();\n    }\n\n    /**\n     * Start the socket\n     *\n     * @memberof DotcmsEventsService\n     */\n    start(): void {\n        this.loggerService.debug('start DotcmsEventsService', this.dotEventsSocket.isConnected());\n        if (!this.dotEventsSocket.isConnected()) {\n            this.loggerService.debug('Connecting with socket');\n\n            this.messagesSub = this.dotEventsSocket\n                .connect()\n                .pipe(switchMap(() => this.dotEventsSocket.messages()))\n                .subscribe(\n                    ({ event, payload }: DotEventMessage) => {\n                        if (!this.subjects[event]) {\n                            this.subjects[event] = new Subject();\n                        }\n                        this.subjects[event].next(payload.data);\n                    },\n                    (e) => {\n                        this.loggerService.debug(\n                            'Error in the System Events service: ' + e.message\n                        );\n                    },\n                    () => {\n                        this.loggerService.debug('Completed');\n                    }\n                );\n        }\n    }\n\n    /**\n     * This method will be called by clients that want to receive notifications\n     * regarding incoming system events. The events they will receive will be\n     * based on the type of event clients register for.\n     *\n     * @memberof DotcmsEventsService\n     */\n    subscribeTo<T>(clientEventType: string): Observable<T> {\n        if (!this.subjects[clientEventType]) {\n            this.subjects[clientEventType] = new Subject<T>();\n        }\n\n        return this.subjects[clientEventType].asObservable();\n    }\n\n    /**\n     * Subscribe to multiple events from the DotCMS WebSocket\n     *\n     * @memberof DotcmsEventsService\n     */\n    subscribeToEvents<T>(clientEventTypes: string[]): Observable<DotEventTypeWrapper<T>> {\n        const subject: Subject<DotEventTypeWrapper<T>> = new Subject<DotEventTypeWrapper<T>>();\n\n        clientEventTypes.forEach((eventType: string) => {\n            this.subscribeTo(eventType).subscribe((data: T) => {\n                subject.next({\n                    data: data,\n                    name: eventType\n                });\n            });\n        });\n\n        return subject.asObservable();\n    }\n\n    /**\n     * Listen  when the socket is opened\n     *\n     * @returns Observable<boolean>\n     * @memberof DotcmsEventsService\n     */\n    open(): Observable<boolean> {\n        return this.dotEventsSocket.open();\n    }\n}\n","/**\n * Created by oswaldogallango on 7/11/16.\n */\nimport { CoreWebService } from './core-web.service';\nimport { Injectable } from '@angular/core';\nimport { Observable, Subject, of } from 'rxjs';\nimport { HttpCode } from './util/http-code';\nimport { pluck, tap, map } from 'rxjs/operators';\nimport { DotcmsEventsService } from './dotcms-events.service';\nimport { HttpResponse } from '@angular/common/http';\nimport { ResponseView } from './util/response-view';\nimport { DotLoginInformation } from '@dotcms/dotcms-models';\n\nexport interface DotLoginParams {\n    login: string;\n    password: string;\n    rememberMe: boolean;\n    language: string;\n    backEndLogin: boolean;\n}\n\nexport const LOGOUT_URL = '/dotAdmin/logout';\n\n/**\n * This Service get the server configuration to display in the login component\n * and execute the login and forgot password routines\n */\n@Injectable()\nexport class LoginService {\n    private _auth$: Subject<Auth> = new Subject<Auth>();\n    private _logout$: Subject<any> = new Subject<any>();\n    private _auth: Auth;\n    private _loginAsUsersList$: Subject<User[]>;\n    private country = '';\n    private lang = '';\n    private urls: Record<string, string>;\n\n    constructor(\n        private coreWebService: CoreWebService,\n        private dotcmsEventsService: DotcmsEventsService\n    ) {\n        this._loginAsUsersList$ = <Subject<User[]>>new Subject();\n        this.urls = {\n            changePassword: 'v1/changePassword',\n            getAuth: 'v1/authentication/logInUser',\n            loginAs: 'v1/users/loginas',\n            logout: 'v1/logout',\n            logoutAs: 'v1/users/logoutas',\n            recoverPassword: 'v1/forgotpassword',\n            serverInfo: 'v1/loginform',\n            userAuth: 'v1/authentication',\n            current: '/api/v1/users/current/'\n        };\n\n        // when the session is expired/destroyed\n        dotcmsEventsService.subscribeTo('SESSION_DESTROYED').subscribe(() => this.logOutUser());\n    }\n\n    /**\n     * Get current logged in user\n     *\n     * @return {*}  {Observable<CurrentUser>}\n     * @memberof LoginService\n     */\n    getCurrentUser(): Observable<CurrentUser> {\n        return this.coreWebService\n            .request<CurrentUser>({\n                url: this.urls.current\n            })\n            .pipe(\n                map((res: HttpResponse<CurrentUser>) => res)\n            ) as unknown as Observable<CurrentUser>;\n    }\n\n    get loginAsUsersList$(): Observable<User[]> {\n        return this._loginAsUsersList$.asObservable();\n    }\n\n    get auth$(): Observable<Auth> {\n        return this._auth$.asObservable();\n    }\n\n    get logout$(): Observable<any> {\n        return this._logout$.asObservable();\n    }\n\n    get auth(): Auth {\n        return this._auth;\n    }\n\n    get isLogin$(): Observable<boolean> {\n        if (!!this.auth && !!this.auth.user) {\n            return of(true);\n        }\n\n        return this.loadAuth().pipe(map((auth) => !!auth && !!auth.user));\n    }\n\n    /**\n     * Return the login status\n     *\n     * @return {*}  {Observable<Auth>}\n     * @memberof LoginService\n     */\n    loadAuth(): Observable<Auth> {\n        return this.coreWebService\n            .requestView({\n                url: this.urls.getAuth\n            })\n            .pipe(\n                pluck('entity'),\n                tap((auth: Auth) => {\n                    if (auth.user) {\n                        this.setAuth(auth);\n                    }\n                }),\n                map((auth: Auth) => auth)\n            );\n    }\n\n    /**\n     * Change password\n     *\n     * @param {string} password\n     * @param {string} token\n     * @return {*}  {Observable<string>}\n     * @memberof LoginService\n     */\n    changePassword(password: string, token: string): Observable<string> {\n        const body = JSON.stringify({ password: password, token: token });\n\n        return this.coreWebService\n            .requestView({\n                body: body,\n                method: 'POST',\n                url: this.urls.changePassword\n            })\n            .pipe(pluck('entity'));\n    }\n\n    /**\n     * Get the server information to configure the login component\n     *\n     * @param {string} language\n     * @param {Array<string>} i18nKeys\n     * @return {*}  {Observable<DotLoginInformation>}\n     * @memberof LoginService\n     */\n    getLoginFormInfo(language: string, i18nKeys: Array<string>): Observable<DotLoginInformation> {\n        this.setLanguage(language);\n\n        return this.coreWebService\n            .requestView<DotLoginInformation>({\n                body: { messagesKey: i18nKeys, language: this.lang, country: this.country },\n                method: 'POST',\n                url: this.urls.serverInfo\n            })\n            .pipe(pluck('bodyJsonObject'));\n    }\n\n    /**\n     * Do the login as request and return an Observable.\n     *\n     * @param {{ user: User; password: string }} userData\n     * @return {*}  {Observable<boolean>}\n     * @memberof LoginService\n     */\n    loginAs(userData: { user: User; password: string }): Observable<boolean> {\n        return this.coreWebService\n            .requestView<{ loginAs: boolean }>({\n                body: {\n                    password: userData.password,\n                    userId: userData.user.userId\n                },\n                method: 'POST',\n                url: this.urls.loginAs\n            })\n            .pipe(\n                map((res) => {\n                    if (!res.entity.loginAs) {\n                        throw res.errorsMessages;\n                    }\n\n                    this.setAuth({\n                        loginAsUser: userData.user,\n                        user: this._auth.user,\n                        isLoginAs: true\n                    });\n                    return res;\n                }),\n                pluck('entity', 'loginAs')\n            );\n    }\n\n    /**\n     * Executes the call to the login rest api\n     *\n     * @param {DotLoginParams} {\n     *         login,\n     *         password,\n     *         rememberMe,\n     *         language,\n     *         backEndLogin\n     *     }\n     * @return {*}  {Observable<User>}\n     * @memberof LoginService\n     */\n    loginUser({\n        login,\n        password,\n        rememberMe,\n        language,\n        backEndLogin\n    }: DotLoginParams): Observable<User> {\n        this.setLanguage(language);\n\n        return this.coreWebService\n            .requestView<User>({\n                body: {\n                    userId: login,\n                    password: password,\n                    rememberMe: rememberMe,\n                    language: this.lang,\n                    country: this.country,\n                    backEndLogin: backEndLogin\n                },\n                method: 'POST',\n                url: this.urls.userAuth\n            })\n            .pipe(\n                map((response) => {\n                    const auth = {\n                        loginAsUser: null,\n                        user: response.entity,\n                        isLoginAs: false\n                    };\n\n                    this.setAuth(auth);\n                    this.coreWebService\n                        .subscribeToHttpError(HttpCode.UNAUTHORIZED)\n                        .subscribe(() => {\n                            this.logOutUser();\n                        });\n                    return response.entity;\n                })\n            );\n    }\n\n    /**\n     * Logout \"login as\" user\n     *\n     * @return {*}  {Observable<boolean>}\n     * @memberof LoginService\n     */\n    logoutAs(): Observable<boolean> {\n        return this.coreWebService\n            .requestView<{ logoutAs: boolean }>({\n                method: 'PUT',\n                url: `${this.urls.logoutAs}`\n            })\n            .pipe(\n                map((res) => {\n                    this.setAuth({\n                        loginAsUser: null,\n                        user: this._auth.user,\n                        isLoginAs: true\n                    });\n                    return res.entity.logoutAs;\n                })\n            );\n    }\n\n    /**\n     * Executes the call to the recover passwrod rest api\n     *\n     * @param {string} login\n     * @return {*}  {Observable<string>}\n     * @memberof LoginService\n     */\n    recoverPassword(login: string): Observable<string> {\n        return this.coreWebService\n            .requestView<string>({\n                body: { userId: login },\n                method: 'POST',\n                url: this.urls.recoverPassword\n            })\n            .pipe(pluck('entity'));\n    }\n\n    /**\n     * Subscribe to ser change and call received function on change.\n     *\n     * @param {(params?: unknown) => void} func\n     * @memberof LoginService\n     */\n    watchUser(func: (params?: unknown) => void): void {\n        if (this.auth) {\n            func(this.auth);\n        }\n\n        this.auth$.subscribe((auth) => {\n            if (auth.user) {\n                func(auth);\n            }\n        });\n    }\n\n    /**\n     * Set logged_auth and update auth Observable\n     *\n     * @param {Auth} auth\n     * @memberof LoginService\n     */\n    setAuth(auth: Auth): void {\n        this._auth = auth;\n        this._auth$.next(auth);\n\n        // When not logged user we need to fire the observable chain\n        if (!auth.user) {\n            this._logout$.next();\n        } else {\n            this.dotcmsEventsService.start();\n        }\n    }\n\n    private setLanguage(language: string): void {\n        if (language !== undefined && language !== '') {\n            const languageDesc = language.split('_');\n            this.lang = languageDesc[0];\n            this.country = languageDesc[1];\n        } else {\n            this.lang = '';\n            this.country = '';\n        }\n    }\n\n    private logOutUser(): void {\n        window.location.href = `${LOGOUT_URL}?r=${new Date().getTime()}`;\n    }\n}\n\nexport interface CurrentUser {\n    email: string;\n    givenName: string;\n    loginAs: boolean;\n    roleId: string;\n    surname: string;\n    userId: string;\n}\n\nexport interface User {\n    active?: boolean;\n    admin: boolean;\n    actualCompanyId?: string;\n    birthday?: number; // Timestamp\n    comments?: string;\n    companyId?: string;\n    createDate?: number; // Timestamp\n    deleteDate?: number; // Timestamp\n    deleteInProgress?: boolean;\n    emailAddress: string;\n    failedLoginAttempts?: number;\n    female?: boolean;\n    firstName: string;\n    fullName?: string;\n    id?: string;\n    languageId?: string;\n    lastLoginDate?: number; // Timestamp\n    lastLoginIP?: string;\n    lastName: string;\n    male?: boolean;\n    middleName?: string;\n    modificationDate?: number; // Timestamp\n    name?: string;\n    nickname?: string;\n    requestPassword?: boolean;\n    timeZoneId?: string;\n    type?: string;\n    userId: string;\n    password?: string;\n    editModeUrl?: string;\n}\n\nexport interface Auth {\n    user: User;\n    loginAsUser: User;\n    isLoginAs?: boolean;\n}\n","import { CoreWebService } from './core-web.service';\nimport { Injectable } from '@angular/core';\nimport { LoginService } from './login.service';\nimport { Observable } from 'rxjs';\nimport { DotRouterService } from './dot-router.service';\nimport { Subject } from 'rxjs';\nimport { DotcmsEventsService } from './dotcms-events.service';\n\n@Injectable()\nexport class RoutingService {\n    private _menusChange$: Subject<Menu[]> = new Subject();\n    private menus: Menu[];\n    private urlMenus: string;\n    private portlets: Map<string, string>;\n    private _currentPortletId: string;\n\n    private _portletUrlSource$ = new Subject<string>();\n    private _currentPortlet$ = new Subject<string>();\n\n    // TODO: I think we should be able to remove the routing injection\n    constructor(\n        loginService: LoginService,\n        private router: DotRouterService,\n        private coreWebService: CoreWebService,\n        dotcmsEventsService: DotcmsEventsService\n    ) {\n        this.urlMenus = 'v1/CORE_WEB/menu';\n        this.portlets = new Map();\n\n        loginService.watchUser(this.loadMenus.bind(this));\n        dotcmsEventsService\n            .subscribeTo('UPDATE_PORTLET_LAYOUTS')\n            .subscribe(this.loadMenus.bind(this));\n    }\n\n    get currentPortletId(): string {\n        return this._currentPortletId;\n    }\n\n    get currentMenu(): Menu[] {\n        return this.menus;\n    }\n\n    get menusChange$(): Observable<Menu[]> {\n        return this._menusChange$.asObservable();\n    }\n\n    get portletUrl$(): Observable<string> {\n        return this._portletUrlSource$.asObservable();\n    }\n\n    get firstPortlet(): string {\n        const porlets = this.portlets.entries().next().value;\n        return porlets ? porlets[0] : null;\n    }\n\n    public addPortletURL(portletId: string, url: string): void {\n        this.portlets.set(portletId.replace(' ', '_'), url);\n    }\n\n    public getPortletURL(portletId: string): string {\n        return this.portlets.get(portletId);\n    }\n\n    public goToPortlet(portletId: string): void {\n        this.router.gotoPortlet(portletId);\n        this._currentPortletId = portletId;\n    }\n\n    public isPortlet(url: string): boolean {\n        let id = this.getPortletId(url);\n        if (id.indexOf('?') >= 0) {\n            id = id.substr(0, id.indexOf('?'));\n        }\n\n        return this.portlets.has(id);\n    }\n\n    public setCurrentPortlet(url: string): void {\n        let id = this.getPortletId(url);\n        if (id.indexOf('?') >= 0) {\n            id = id.substr(0, id.indexOf('?'));\n        }\n        this._currentPortletId = id;\n        this._currentPortlet$.next(id);\n    }\n\n    get currentPortlet$(): Observable<string> {\n        return this._currentPortlet$;\n    }\n\n    public setMenus(menus: Menu[]): void {\n        this.menus = menus;\n\n        if (this.menus.length) {\n            this.portlets = new Map();\n\n            for (let i = 0; i < this.menus.length; i++) {\n                const menu = this.menus[i];\n\n                for (let k = 0; k < menu.menuItems.length; k++) {\n                    const subMenuItem = menu.menuItems[k];\n                    if (subMenuItem.angular) {\n                        this.portlets.set(subMenuItem.id, subMenuItem.url);\n                    } else {\n                        subMenuItem.menuLink = '/c/' + subMenuItem.id;\n                        this.portlets.set(subMenuItem.id, subMenuItem.url);\n                    }\n                }\n            }\n            this._menusChange$.next(this.menus);\n        }\n    }\n\n    /**\n     * Refresh the portlet displayed. with the\n     * @param url portlet url\n     */\n    public changeRefreshPortlet(url: string): void {\n        const portletId = this.getPortletId(url);\n        if (portletId === this.currentPortletId) {\n            this._portletUrlSource$.next(url);\n        }\n    }\n\n    private loadMenus(): void {\n        this.coreWebService\n            .requestView({\n                url: this.urlMenus\n            })\n            .subscribe(\n                (response) => {\n                    this.setMenus(response.entity);\n                },\n                (error) => this._menusChange$.error(error)\n            );\n    }\n\n    private getPortletId(url: string): string {\n        const urlSplit = url.split('/');\n        return urlSplit[urlSplit.length - 1];\n    }\n}\n\nexport interface Menu {\n    tabDescription: string;\n    tabName: string;\n    url: string;\n    menuItems: MenuItem[];\n}\n\nexport interface MenuItem {\n    ajax: boolean;\n    angular: boolean;\n    id: string;\n    name: string;\n    url: string;\n    menuLink: string;\n}\n","import { Injectable } from '@angular/core';\nimport { CoreWebService } from './core-web.service';\nimport { Observable, Subject, of, merge } from 'rxjs';\nimport { pluck, map, take } from 'rxjs/operators';\nimport { LoginService, Auth } from './login.service';\nimport { LoggerService } from './logger.service';\nimport { DotcmsEventsService } from './dotcms-events.service';\nimport { DotEventTypeWrapper } from './models/dot-events/dot-event-type-wrapper';\n\n/**\n * Provide methods and data to hable the sites.\n * @export\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class SiteService {\n    private selectedSite: Site;\n    private urls: any;\n    private events: string[] = [\n        'SAVE_SITE',\n        'PUBLISH_SITE',\n        'UPDATE_SITE_PERMISSIONS',\n        'UN_ARCHIVE_SITE',\n        'UPDATE_SITE',\n        'ARCHIVE_SITE'\n    ];\n    private _switchSite$: Subject<Site> = new Subject<Site>();\n    private _refreshSites$: Subject<Site> = new Subject<Site>();\n\n    constructor(\n        loginService: LoginService,\n        dotcmsEventsService: DotcmsEventsService,\n        private coreWebService: CoreWebService,\n        private loggerService: LoggerService\n    ) {\n        this.urls = {\n            currentSiteUrl: 'v1/site/currentSite',\n            sitesUrl: 'v1/site',\n            switchSiteUrl: 'v1/site/switch'\n        };\n\n        dotcmsEventsService\n            .subscribeToEvents<Site>(['ARCHIVE_SITE', 'UPDATE_SITE'])\n            .subscribe((event: DotEventTypeWrapper<Site>) => this.eventResponse(event));\n\n        dotcmsEventsService\n            .subscribeToEvents<Site>(this.events)\n            .subscribe(({ data }: DotEventTypeWrapper<Site>) => this.siteEventsHandler(data));\n\n        dotcmsEventsService\n            .subscribeToEvents<Site>(['SWITCH_SITE'])\n            .subscribe(({ data }: DotEventTypeWrapper<Site>) => this.setCurrentSite(data));\n\n        loginService.watchUser((auth: Auth) => {\n            if (!auth.isLoginAs) {\n                this.loadCurrentSite();\n            }\n        });\n    }\n\n    /**\n     * Manage the response when an event happen\n     *\n     * @memberof SiteService\n     */\n    eventResponse({ name, data }: DotEventTypeWrapper<Site>): void {\n        this.loggerService.debug('Capturing Site event', name, data);\n\n        const siteIdentifier = data.identifier;\n        if (siteIdentifier === this.selectedSite.identifier) {\n\n            name === 'ARCHIVE_SITE'\n                ? this.switchToDefaultSite()\n                      .pipe(take(1))\n                      .subscribe((currentSite: Site) => {\n                          this.switchSite(currentSite);\n                      })\n                : this.loadCurrentSite();\n\n        }\n    }\n\n    /**\n     * Refresh the sites list if a event happen\n     *\n     * @memberof SiteService\n     */\n    siteEventsHandler(site: Site): void {\n        this._refreshSites$.next(site);\n    }\n\n    /**\n     * Observable trigger when an site event happens\n     * @readonly\n     * @memberof SiteService\n     */\n    get refreshSites$(): Observable<Site> {\n        return this._refreshSites$.asObservable();\n    }\n\n    /**\n     * Observable tigger when the current site is changed\n     * @readonly\n     * @memberof SiteService\n     */\n    get switchSite$(): Observable<Site> {\n        return this._switchSite$.asObservable();\n    }\n\n    /**\n     * Return the current site for the login user.\n     * @readonly\n     * @memberof SiteService\n     */\n    get currentSite(): Site {\n        return this.selectedSite;\n    }\n\n    /**\n     * Switch To Default Site in the BE and returns it.\n     *\n     * @returns Observable<Site>\n     * @memberof SiteService\n     */\n    switchToDefaultSite(): Observable<Site> {\n        return this.coreWebService\n            .requestView({\n                method: 'PUT',\n                url: 'v1/site/switch'\n            })\n            .pipe(pluck('entity'));\n    }\n\n    /**\n     * Get a site by the id\n     *\n     * @param string id\n     * @returns Observable<Site>\n     * @memberof SiteService\n     */\n    getSiteById(id: string): Observable<Site> {\n        return this.coreWebService\n            .requestView({\n                url: `/api/content/render/false/query/+contentType:host%20+identifier:${id}`\n            })\n            .pipe(\n                pluck('contentlets'),\n                map((sites: Site[]) => sites[0])\n            );\n    }\n\n    /**\n     * Change the current site\n     * @param Site site\n     * @memberof SiteService\n     */\n    switchSite(site: Site): void {\n        this.loggerService.debug('Applying a Site Switch', site.identifier);\n        this.coreWebService\n            .requestView({\n                method: 'PUT',\n                url: `${this.urls.switchSiteUrl}/${site.identifier}`\n            })\n            .pipe(take(1))\n            .subscribe(() => {\n                this.setCurrentSite(site);\n            });\n    }\n\n    /**\n     * Get the current site\n     * @returns Observable<Site>\n     * @memberof SiteService\n     */\n    getCurrentSite(): Observable<Site> {\n        return merge(\n            this.selectedSite ? of(this.selectedSite) : this.requestCurrentSite(),\n            this.switchSite$\n        );\n    }\n\n    private requestCurrentSite(): Observable<Site> {\n        return this.coreWebService\n            .requestView({\n                url: this.urls.currentSiteUrl\n            })\n            .pipe(pluck('entity'));\n    }\n\n    private setCurrentSite(site: Site): void {\n        if (this.selectedSite?.identifier !== site.identifier) {\n            this.selectedSite = site;\n            this._switchSite$.next({ ...site });\n        }\n    }\n\n    private loadCurrentSite(): void {\n        this.getCurrentSite()\n            .pipe(take(1))\n            .subscribe((currentSite: Site) => {\n                this.setCurrentSite(currentSite);\n            });\n    }\n}\n\nexport interface Site {\n    hostname: string;\n    type: string;\n    identifier: string;\n    archived: boolean;\n}\n","import { Injectable } from '@angular/core';\n/**\n * Configuration class for dotcms-js. You can extend this class to overide one to many config options and inject\n * the your AppConfig in the app.module ts file of your application\n */\n@Injectable()\nexport class AppConfig {\n    public iconPath = './src/assets/images/icons';\n    public dotCMSURLKey = 'siteURLJWT';\n}\n","import { Injectable, NgModule } from '@angular/core';\n\n/**\n * LocalStoreService. Basic wraper for localStorage\n */\n@Injectable()\nexport class LocalStoreService {\n    /**\n     * Stores Value in localstorage\n     * @param key\n     * @param value\n     */\n    storeValue(key: string, value: any): void {\n        localStorage.setItem(key, value);\n        // storage.set(key, value, callback);\n    }\n\n    /**\n     * Gets a value from localstorage\n     * @param key\n     * @returns any\n     */\n    getValue(key: string): any {\n        return localStorage.getItem(key);\n        // return storage.get(key, callback);\n    }\n\n    /**\n     * Clears a value from localstorage\n     * @param key\n     */\n    clearValue(key: string): void {\n        localStorage.removeItem(key);\n    }\n\n    /**\n     * Clears all localstorage\n     */\n    clear(): void {\n        localStorage.clear();\n    }\n}\n\n@NgModule({\n    providers: [LocalStoreService]\n})\nexport class DotLocalStoreModule {}\n","import { AppConfig } from './app.config';\nimport { Inject, Injectable, NgModule } from '@angular/core';\n\n/**\n * Used by the NotificationService to set Desktop Notifications\n */\ndeclare class Notification {\n    constructor(title: string, options?: Object);\n}\n\n/**\n * NotificationService will notify using Desktop Notifications\n * https://developer.mozilla.org/en-US/docs/Web/API/notification\n * Can change icons by setting iconPath in the AppConfig if needed\n */\n@Injectable()\n@Inject('config')\nexport class NotificationService {\n    iconPath: string;\n\n    constructor(config: AppConfig) {\n        this.iconPath = config.iconPath;\n    }\n\n    /**\n     * Displays an error message\n     * @param body\n     */\n    displayErrorMessage(body: string): void {\n        this.displayMessage('Error', body, 'error');\n    }\n\n    /**\n     * Displays a success message\n     * @param body\n     */\n    displaySuccessMessage(body: string): void {\n        this.displayMessage('Success', body, 'success');\n    }\n\n    /**\n     * Displays an Info message\n     * @param body\n     */\n    displayInfoMessage(body: string): void {\n        this.displayMessage('Info', body, 'info');\n    }\n\n    /**\n     * Display message for passed in type\n     * @param title\n     * @param body\n     * @param type\n     */\n    displayMessage(_title: string, body: string, type: string): Notification {\n        let myNotification: Notification;\n        myNotification = new Notification(type, {\n            body: body,\n            icon: this.iconPath + '/' + type + '.png'\n        });\n\n        return myNotification;\n    }\n}\n\n@NgModule({\n    providers: [AppConfig, NotificationService]\n})\nexport class DotNotificationModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map, filter } from 'rxjs/operators';\nimport {\n    HttpClient,\n    HttpRequest,\n    HttpEvent,\n    HttpEventType,\n    HttpResponse,\n    HttpParams,\n    HttpHeaders\n} from '@angular/common/http';\nimport { DotCMSResponse, DotRequestOptionsArgs } from './core-web.service';\nimport { ResponseView } from './util/response-view';\n\n@Injectable()\nexport class CoreWebServiceMock {\n    constructor(private _http: HttpClient) {}\n\n    request<T = any>(options: DotRequestOptionsArgs): Observable<any> {\n        if (!options.method) {\n            options.method = 'GET';\n        }\n\n        const optionsArgs = {\n            params: new HttpParams()\n        };\n\n        if (options.params) {\n            Object.keys(options.params).forEach((key) => {\n                optionsArgs.params = optionsArgs.params.set(key, options.params[key]);\n            });\n        }\n\n        return this._http\n            .request(\n                new HttpRequest(options.method, options.url, options.body, {\n                    params: optionsArgs.params\n                })\n            )\n            .pipe(\n                filter(\n                    (event: HttpEvent<HttpResponse<DotCMSResponse<T>> | any>) =>\n                        event.type === HttpEventType.Response\n                ),\n                map((resp: HttpResponse<DotCMSResponse<T>>) => {\n                    try {\n                        return resp.body;\n                    } catch (error) {\n                        return resp;\n                    }\n                })\n            );\n    }\n\n    requestView<T = any>(options: DotRequestOptionsArgs): Observable<ResponseView<T>> {\n        if (!options.method) {\n            options.method = 'GET';\n        }\n\n        const optionsArgs = {\n            headers: new HttpHeaders(),\n            params: new HttpParams()\n        };\n\n        if (options.params) {\n            Object.keys(options.params).forEach((key: string) => {\n                optionsArgs.params = optionsArgs.params.set(key, options.params[key]);\n            });\n        }\n\n        return this._http\n            .request(\n                new HttpRequest(options.method, options.url, options.body, {\n                    params: optionsArgs.params\n                })\n            )\n            .pipe(\n                filter(\n                    (event: HttpEvent<HttpResponse<DotCMSResponse<T>> | any>) =>\n                        event.type === HttpEventType.Response\n                ),\n                map((resp: HttpResponse<DotCMSResponse<T>>) => {\n                    return new ResponseView<T>(resp);\n                })\n            );\n    }\n\n    subscribeTo(httpErrorCode: number): Observable<any> {\n        return of({\n            error: httpErrorCode\n        });\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'dot-drag-handler',\n    templateUrl: './drag-handler.component.html',\n    styleUrls: ['./drag-handler.component.scss']\n})\nexport class DragHandlerComponent {}\n","import { Component, OnInit, ElementRef, OnDestroy } from '@angular/core';\nimport { AngularNodeViewComponent } from '../../../NodeViewRenderer';\n\ninterface ImageData {\n    asset: string;\n    name: string;\n}\n\n@Component({\n    selector: 'dot-image-block',\n    templateUrl: './image-block.component.html',\n    styleUrls: ['./image-block.component.scss']\n})\nexport class ImageBlockComponent extends AngularNodeViewComponent implements OnInit, OnDestroy {\n    public data: ImageData;\n    public href: string;\n\n    constructor(private _elementRef: ElementRef) {\n        super();\n    }\n\n    ngOnInit(): void {\n        this.data = this.node.attrs.data;\n        this.editor.on('update', this.updateImageAttributes.bind(this));\n        this.updateImageAttributes();\n    }\n\n    ngOnDestroy(): void {\n        this.editor.off('update', this.updateImageAttributes.bind(this));\n    }\n\n    private updateImageAttributes(): void {\n        this._elementRef.nativeElement.style.textAlign = this.node.attrs.textAlign;\n        this.href = this.node.attrs.href;\n    }\n}\n","import { Component, ViewEncapsulation } from '@angular/core';\nimport { AngularNodeViewComponent } from '../../../NodeViewRenderer';\n\nexport const enum MessageType {\n    INFO = 'info',\n    ERROR = 'error'\n}\n\n@Component({\n    selector: 'dot-message',\n    templateUrl: './loader.component.html',\n    styleUrls: ['./loader.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class LoaderComponent extends AngularNodeViewComponent {\n    data: {\n        type: MessageType;\n        message: string;\n    };\n}\n","import { DotCMSTempFile, DotHttpErrorResponse, DotHttpRequestOptions } from '@dotcms/dotcms-models';\n\nexport const fallbackErrorMessages = {\n    500: '500 Internal Server Error',\n    400: '400 Bad Request',\n    401: '401 Unauthorized Error'\n};\n\nexport interface UploadTempFileProps<T = string | File | File[]> {\n    file: T;\n    progressCallBack?;\n    maxSize?: string;\n}\n\nconst TEMP_API_URL = '/api/v1/temp';\n\n/**\n * Will call the corresponding endpoint to upload a temporary file.\n * Return the information of tha file in the server\n * @param file\n * @param maxSize\n *\n */\nexport function uploadFile({\n    file,\n    progressCallBack,\n    maxSize\n}: UploadTempFileProps): Promise<DotCMSTempFile> {\n    if (typeof file === 'string') {\n        return uploadFileByURL(file);\n    } else {\n        return uploadBinaryFile({ file, progressCallBack, maxSize }) as Promise<DotCMSTempFile>;\n    }\n}\n\nfunction uploadFileByURL(url: string): Promise<DotCMSTempFile> {\n    const UPLOAD_FILE_FROM_URL = `${TEMP_API_URL}/byUrl`;\n\n    return fetch(UPLOAD_FILE_FROM_URL, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            Origin: window.location.hostname\n        },\n        body: JSON.stringify({\n            remoteUrl: url\n        })\n    }).then(async (response: Response) => {\n        if (response.status === 200) {\n            return (await response.json()).tempFiles[0];\n        } else {\n            throw errorHandler(await response.json(), response.status);\n        }\n    });\n}\n\n/**\n * Will call the temp resource endpoint to upload a temporary file.\n * With a callback to track the progress of the upload\n * Return the information of tha file(s) in the server\n * @param data\n * @param progressCallBack\n * @param maxSize\n *\n */\nexport function uploadBinaryFile({\n    file: data,\n    progressCallBack,\n    maxSize\n}: UploadTempFileProps<File | File[]>): Promise<DotCMSTempFile | DotCMSTempFile[]> {\n    let path = TEMP_API_URL;\n    path += maxSize ? `?maxFileLength=${maxSize}` : '';\n    const formData = new FormData();\n\n    const files = Array.isArray(data) ? data : [data];\n\n    files.forEach((file: File) => formData.append('files', file));\n\n    return dotRequest(\n        path,\n        {\n            method: 'POST',\n            headers: {},\n            body: formData\n        },\n        progressCallBack\n    )\n        .then((request: XMLHttpRequest) => {\n            if (request.status === 200) {\n                const data = JSON.parse(request.response).tempFiles;\n\n                return data.length > 1 ? data : data[0];\n            } else {\n                throw request;\n            }\n        })\n        .catch((request: XMLHttpRequest) => {\n            throw errorHandler(JSON.parse(request.response), request.status);\n        });\n}\n\nfunction dotRequest(\n    url: string,\n    opts: DotHttpRequestOptions,\n    progressCallBack: (progress: number) => {\n        /* */\n    }\n): Promise<XMLHttpRequest> {\n    return new Promise((res, rej) => {\n        const xhr = new XMLHttpRequest();\n        xhr.open(opts.method || 'get', url);\n        for (const name in opts.headers || {}) {\n            xhr.setRequestHeader(name, opts.headers[name]);\n        }\n\n        xhr.onload = () => res(xhr);\n        xhr.onerror = rej;\n        if (xhr.upload && progressCallBack) {\n            xhr.upload.onprogress = (e: ProgressEvent) => {\n                const percentComplete = (e.loaded / e.total) * 100;\n                progressCallBack(percentComplete);\n            };\n        }\n\n        xhr.send(opts.body);\n    });\n}\n\nfunction errorHandler(response: Record<string, string>, status: number): DotHttpErrorResponse {\n    let message = '';\n    try {\n        message = response.message || fallbackErrorMessages[status];\n    } catch (e) {\n        message = fallbackErrorMessages[status || 500];\n    }\n\n    return {\n        message: message,\n        status: status | 500\n    };\n}\n","import { Injectable } from '@angular/core';\nimport { uploadFile } from '@dotcms/utils';\nimport { from, Observable, throwError } from 'rxjs';\nimport { catchError, pluck, switchMap } from 'rxjs/operators';\nimport { DotCMSContentlet, DotCMSTempFile } from '@dotcms/dotcms-models';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable()\nexport class DotImageService {\n    constructor(private http: HttpClient) {}\n\n    publishContent(data: string | File | File[], maxSize?: string): Observable<DotCMSContentlet[]> {\n        return this.setTempResource(data, maxSize).pipe(\n            switchMap((response: DotCMSTempFile | DotCMSTempFile[]) => {\n                const files = Array.isArray(response) ? response : [response];\n                const contentlets = [];\n                files.forEach((file: DotCMSTempFile) => {\n                    contentlets.push({\n                        baseType: 'dotAsset',\n                        asset: file.id,\n                        hostFolder: '',\n                        indexPolicy: 'WAIT_FOR'\n                    });\n                });\n\n                return this.http\n                    .post(\n                        '/api/v1/workflow/actions/default/fire/PUBLISH',\n                        JSON.stringify({ contentlets }),\n                        {\n                            headers: {\n                                Origin: window.location.hostname,\n                                'Content-Type': 'application/json;charset=UTF-8'\n                            }\n                        }\n                    )\n                    .pipe(pluck('entity', 'results')) as Observable<DotCMSContentlet[]>;\n            }),\n            catchError((error) => throwError(error))\n        );\n    }\n\n    private setTempResource(\n        file: string | File | File[],\n        maxSize?: string\n    ): Observable<DotCMSTempFile | DotCMSTempFile[]> {\n        return from(\n            uploadFile({\n                file,\n                progressCallBack: () => {\n                    /**/\n                },\n                maxSize\n            })\n        );\n    }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { BubbleMenuItem } from '@dotcms/block-editor';\n\n@Component({\n    selector: 'dot-bubble-menu',\n    templateUrl: './bubble-menu.component.html',\n    styleUrls: ['./bubble-menu.component.scss']\n})\nexport class BubbleMenuComponent {\n    @Input() items: BubbleMenuItem[] = [];\n    @Input() selected: string;\n    @Output() command: EventEmitter<BubbleMenuItem> = new EventEmitter();\n    @Output() toggleChangeTo: EventEmitter<void> = new EventEmitter();\n\n    preventDeSelection(event: MouseEvent): void {\n        event.preventDefault();\n    }\n}\n","import { Component, Input } from '@angular/core';\n\n// Interface\nimport type { BubbleMenuItem } from '@dotcms/block-editor';\n\n@Component({\n    selector: 'dot-bubble-menu-button',\n    templateUrl: './bubble-menu-button.component.html',\n    styleUrls: ['./bubble-menu-button.component.scss']\n})\nexport class BubbleMenuButtonComponent {\n    @Input() item: BubbleMenuItem;\n    @Input() active = false;\n}\n","import { ResolvedPos } from 'prosemirror-model';\nimport { NodeTypes } from '@dotcms/block-editor';\nimport { EditorView } from 'prosemirror-view';\n\n/**\n * Get the parent node of the ResolvedPos sent\n * @param selectionStart ResolvedPos\n * @param NodesTypesToFind NodeTypes\n */\nexport const findParentNode = (\n    selectionStart: ResolvedPos,\n    NodesTypesToFind?: Array<NodeTypes>\n) => {\n    let depth = selectionStart.depth;\n    let parent;\n    do {\n        parent = selectionStart.node(depth);\n        if (parent) {\n            if (Array.isArray(NodesTypesToFind) && NodesTypesToFind.includes(parent.type.name)) {\n                break;\n            }\n\n            depth--;\n        }\n    } while (depth > 0 && parent);\n\n    return parent;\n};\n\n/**\n * This logic was made byt the creator of ProseMirror.\n * See the full comment here: https://github.com/ProseMirror/prosemirror/issues/505#issuecomment-266131409\n *\n * @param {ResolvedPos} selectionStart\n * @param {number} pos\n * @return {*}\n */\nexport const textNodeRange = (selectionStart: ResolvedPos, pos: number) => {\n    const to = pos - selectionStart?.textOffset;\n    const from =\n        selectionStart.index() < selectionStart?.parent.childCount\n            ? to + selectionStart?.parent.child(selectionStart.index()).nodeSize\n            : to;\n\n    return { to, from };\n};\n\n/**\n *\n * Get the block editor click position based on mouse event.\n * @param {EditorView} view\n * @param {MouseEvent} event\n * @return {*}\n */\nexport const getPosAtDocCoords = (view: EditorView, event: MouseEvent) => {\n    const { clientX: left, clientY: top } = event;\n    const { pos } = view.posAtCoords({ left, top });\n\n    return pos;\n};\n","import { textNodeRange } from '../.././../../utils/prosemirror.utils';\n\nexport const openFormLinkOnclik = ({ editor, view, pos }) => {\n    const selectionStart = view.state.doc?.resolve(pos);\n    const range = textNodeRange(selectionStart, pos);\n    const { from, to } = range;\n\n    if (from === to) {\n        return;\n    }\n\n    editor.chain().setTextSelection(range).openLinkForm({ openOnClick: true }).run();\n};\n","import { ComponentRef } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { Editor, posToDOMRect } from '@tiptap/core';\nimport { EditorState, Plugin, PluginKey, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport tippy, { Instance, Props } from 'tippy.js';\n\nimport {\n    BubbleMenuLinkFormComponent,\n    NodeProps\n} from '../extensions/components/bubble-menu-link-form/bubble-menu-link-form.component';\n\n// Interface\nimport { LINK_FORM_PLUGIN_KEY } from '../extensions/bubble-link-form.extension';\n\n// Utils\nimport { getPosAtDocCoords } from '../utils/prosemirror.utils';\nimport { isValidURL } from '../utils/bubble-menu.utils';\nimport { openFormLinkOnclik } from '../extensions/components/bubble-menu-link-form/utils/index';\n\nimport isEqual from 'lodash.isequal';\nimport { takeUntil } from 'rxjs/operators';\n\ninterface PluginState {\n    isOpen: boolean;\n    openOnClick: boolean;\n}\n\nexport interface BubbleLinkFormProps {\n    pluginKey: PluginKey;\n    editor: Editor;\n    element: HTMLElement;\n    tippyOptions?: Partial<Props>;\n    component?: ComponentRef<BubbleMenuLinkFormComponent>;\n}\n\nexport type BubbleLinkFormViewProps = BubbleLinkFormProps & {\n    view: EditorView;\n};\n\nexport class BubbleLinkFormView {\n    public editor: Editor;\n\n    public element: HTMLElement;\n\n    public view: EditorView;\n\n    public tippy: Instance | undefined;\n\n    public tippyOptions?: Partial<Props>;\n\n    public pluginKey: PluginKey;\n\n    public component?: ComponentRef<BubbleMenuLinkFormComponent>;\n\n    private scrollElementMap = {\n        'editor-suggestion-list': true,\n        'editor-input-link': true,\n        'editor-input-checkbox': true\n    };\n\n    private $destroy = new Subject<boolean>();\n\n    constructor({\n        editor,\n        element,\n        view,\n        tippyOptions = {},\n        pluginKey,\n        component\n    }: BubbleLinkFormViewProps) {\n        this.editor = editor;\n        this.element = element;\n        this.view = view;\n\n        this.tippyOptions = tippyOptions;\n\n        // Detaches menu content from its current parent\n        this.element.remove();\n        this.element.style.visibility = 'visible';\n        this.pluginKey = pluginKey;\n        this.component = component;\n\n        this.editor.on('focus', this.focusHandler);\n        this.setComponentEvents();\n\n        // We need to also react to page scrolling.\n        document.body.addEventListener('scroll', this.hanlderScroll.bind(this), true);\n    }\n\n    update(view: EditorView, prevState?: EditorState): void {\n        const next = this.pluginKey.getState(view.state);\n        const prev = this.pluginKey.getState(prevState);\n\n        // Check that the current plugin state is different to previous plugin state.\n        if (next.isOpen === prev.isOpen) {\n            this.detectLinkFormChanges();\n\n            return;\n        }\n\n        this.createTooltip();\n        next.isOpen ? this.show() : this.hide();\n        this.detectLinkFormChanges();\n    }\n\n    focusHandler = () => {\n        const { state } = this.editor;\n        const { to } = state.selection;\n        const { openOnClick } = LINK_FORM_PLUGIN_KEY.getState(state);\n\n        if (openOnClick) {\n            this.editor.commands.closeLinkForm();\n            requestAnimationFrame(() => this.editor.commands.setTextSelection(to));\n        } else {\n            this.editor.commands.closeLinkForm();\n        }\n    };\n\n    createTooltip() {\n        const { element: editorElement } = this.editor.options;\n        const editorIsAttached = !!editorElement.parentElement;\n\n        if (this.tippy || !editorIsAttached) {\n            return;\n        }\n\n        this.tippy = tippy(editorElement.parentElement, {\n            ...this.tippyOptions,\n            duration: 250,\n            getReferenceClientRect: () => this.setTippyPosition(),\n            content: this.element,\n            interactive: true,\n            maxWidth: 'none',\n            trigger: 'manual',\n            placement: 'bottom-start',\n            hideOnClick: 'toggle',\n            popperOptions: {\n                modifiers: [\n                    {\n                        name: 'flip',\n                        options: { fallbackPlacements: ['top-start'] }\n                    }\n                ]\n            }\n        });\n    }\n\n    show() {\n        this.tippy?.show();\n        this.component.instance.showSuggestions = false;\n        // Afther show the component set values\n        this.setInputValues();\n        this.component.instance.focusInput();\n    }\n\n    hide() {\n        this.tippy?.hide();\n        // After show the component focus editor\n        this.editor.view.focus();\n    }\n\n    setTippyPosition(): DOMRect {\n        // Get Node Position\n        const { view } = this.editor;\n        const { state } = view;\n        const { doc, selection } = state;\n        const { ranges } = selection;\n        const from = Math.min(...ranges.map((range) => range.$from.pos));\n        const to = Math.max(...ranges.map((range) => range.$to.pos));\n        const nodeClientRect = posToDOMRect(view, from, to);\n\n        // Get Editor Container Position\n        const { element: editorElement } = this.editor.options;\n        const editorClientRect = editorElement.parentElement.getBoundingClientRect();\n        const domRect =\n            document.querySelector('#bubble-menu')?.getBoundingClientRect() || nodeClientRect;\n\n        // Check for an overflow in the content\n        const isOverflow = editorClientRect.bottom < nodeClientRect.bottom;\n\n        // Check if the node is a dotImage\n        const node = doc?.nodeAt(from);\n        const isNodeImage = node?.type.name === 'dotImage';\n\n        // If there is an overflow, use bubble menu position as a reference.\n        return isOverflow || isNodeImage ? domRect : nodeClientRect;\n    }\n\n    setLinkValues({ link, blank = false }) {\n        if (link.length > 0) {\n            this.isDotImageNode()\n                ? this.editor.commands.setImageLink({ href: link })\n                : this.editor.commands.setLink({ href: link, target: blank ? '_blank' : '_top' });\n        }\n    }\n\n    removeLink() {\n        this.isDotImageNode()\n            ? this.editor.commands.unsetImageLink()\n            : this.editor.commands.unsetLink();\n        this.hide();\n    }\n\n    setInputValues() {\n        const values = this.getLinkProps();\n        this.component.instance.initialValues = values;\n        this.component.instance.setFormValue(values);\n    }\n\n    setComponentEvents() {\n        this.component.instance.hide.pipe(takeUntil(this.$destroy)).subscribe(() => this.hide());\n        this.component.instance.removeLink\n            .pipe(takeUntil(this.$destroy))\n            .subscribe(() => this.removeLink());\n        // Update tippy manually when the suggestion is open.\n        // Therefore, the tippy is not going to be cut when it does not have enough space.\n        this.component.instance.isSuggestionOpen\n            .pipe(takeUntil(this.$destroy))\n            .subscribe(() => this.tippy.popperInstance.update());\n        this.component.instance.setNodeProps\n            .pipe(takeUntil(this.$destroy))\n            .subscribe((event) => this.setLinkValues(event));\n    }\n\n    detectLinkFormChanges() {\n        this.component.changeDetectorRef.detectChanges();\n    }\n\n    getLinkProps(): NodeProps {\n        const { href = '', target } = this.editor.isActive('link')\n            ? this.editor.getAttributes('link')\n            : this.editor.getAttributes('dotImage');\n        const link = href || this.getLinkSelect();\n        const blank = target ? target === '_blank' : true;\n\n        return { link, blank };\n    }\n\n    getLinkSelect() {\n        const { state } = this.editor;\n        const { from, to } = state.selection;\n        const text = state.doc.textBetween(from, to, ' ');\n\n        return isValidURL(text) ? text : '';\n    }\n\n    isDotImageNode() {\n        const { type } = this.editor.state.doc.nodeAt(this.editor.state.selection.from) || {};\n\n        return type?.name === 'dotImage';\n    }\n\n    destroy() {\n        this.tippy?.destroy();\n        this.editor.off('focus', this.focusHandler);\n        this.$destroy.next(true);\n        this.component.destroy();\n    }\n\n    private hanlderScroll(e: Event) {\n        const element = e.target as HTMLElement;\n        const parentElement = element?.parentElement?.parentElement;\n        // If text is too long, the input fires the `scroll` event.\n        // When that happens, we do not want to hide the tippy.\n        if (this.scrollElementMap[element.id] || this.scrollElementMap[parentElement.id]) {\n            return;\n        }\n\n        this.hide();\n    }\n}\n\nexport const bubbleLinkFormPlugin = (options: BubbleLinkFormProps) => {\n    let lastNode;\n\n    return new Plugin({\n        key: options.pluginKey as PluginKey,\n        view: (view) => new BubbleLinkFormView({ view, ...options }),\n        state: {\n            init(): PluginState {\n                return {\n                    isOpen: false,\n                    openOnClick: false\n                };\n            },\n\n            apply(\n                transaction: Transaction,\n                value: PluginState,\n                oldState: EditorState\n            ): PluginState {\n                const { isOpen, openOnClick } = transaction.getMeta(LINK_FORM_PLUGIN_KEY) || {};\n                const state = LINK_FORM_PLUGIN_KEY.getState(oldState);\n\n                if (typeof isOpen === 'boolean') {\n                    return {\n                        isOpen,\n                        openOnClick\n                    };\n                }\n\n                // keep the old state in case we do not receive a new one.\n                return state || value;\n            }\n        },\n        props: {\n            handleDOMEvents: {\n                mousedown(view, event) {\n                    const editor = options.editor;\n                    const pos = getPosAtDocCoords(view, event);\n                    const { isOpen, openOnClick } = LINK_FORM_PLUGIN_KEY.getState(editor.state);\n\n                    // Prevent to open the bubble Menu\n                    // After closing the link form on click.\n                    if (isOpen && openOnClick) {\n                        editor.chain().unsetHighlight().setTextSelection(pos).run();\n                    }\n                }\n            },\n            handleClickOn(view: EditorView, pos: number, node) {\n                const editor = options.editor;\n\n                if (!editor.isActive('link') || !pos) {\n                    lastNode = node;\n\n                    return;\n                }\n\n                // If we click again in the same link node,\n                // We close the form and enable editing.\n                if (isEqual(lastNode, node)) {\n                    editor.chain().setTextSelection(pos).closeLinkForm().run();\n\n                    return;\n                }\n\n                openFormLinkOnclik({ editor, view, pos });\n                lastNode = node;\n\n                return true;\n            },\n\n            handleDoubleClickOn(view: EditorView, pos: number) {\n                const editor = options.editor;\n\n                // same node here\n                if (!editor.isActive('link')) {\n                    return;\n                }\n\n                openFormLinkOnclik({ editor, view, pos });\n\n                return true;\n            }\n        }\n    });\n};\n","import { Extension } from '@tiptap/core';\nimport { PluginKey } from 'prosemirror-state';\nimport { BubbleMenuLinkFormComponent } from './components/bubble-menu-link-form/bubble-menu-link-form.component';\nimport { ViewContainerRef } from '@angular/core';\nimport { bubbleLinkFormPlugin } from '../plugins/bubble-link-form.plugin';\nimport { Props } from 'tippy.js';\n\nexport interface BubbleLinkFormOptions {\n    pluginKey: PluginKey;\n    tippyOptions?: Partial<Props>;\n    element: HTMLElement | null;\n}\n\ndeclare module '@tiptap/core' {\n    interface Commands<ReturnType> {\n        bubbleLinkForm: {\n            openLinkForm: ({ openOnClick }) => ReturnType;\n            closeLinkForm: () => ReturnType;\n        };\n    }\n}\n\nexport const LINK_FORM_PLUGIN_KEY = new PluginKey('addLink');\n\nexport const BubbleLinkFormExtension = (viewContainerRef: ViewContainerRef) => {\n    return Extension.create<BubbleLinkFormOptions>({\n        name: 'bubbleLinkForm',\n\n        addOptions() {\n            return {\n                element: null,\n                tippyOptions: {},\n                pluginKey: LINK_FORM_PLUGIN_KEY\n            };\n        },\n\n        addCommands() {\n            return {\n                openLinkForm:\n                    ({ openOnClick }) =>\n                    ({ chain }) => {\n                        return chain()\n                            .setHighlight()\n                            .command(({ tr }) => {\n                                tr.setMeta(LINK_FORM_PLUGIN_KEY, { isOpen: true, openOnClick });\n\n                                return true;\n                            })\n                            .run();\n                    },\n                closeLinkForm:\n                    () =>\n                    ({ chain }) => {\n                        return chain()\n                            .unsetHighlight()\n                            .command(({ tr }) => {\n                                tr.setMeta(LINK_FORM_PLUGIN_KEY, {\n                                    isOpen: false,\n                                    openOnClick: false\n                                });\n\n                                return true;\n                            })\n                            .run();\n                    }\n            };\n        },\n\n        addProseMirrorPlugins() {\n            const component = viewContainerRef.createComponent(BubbleMenuLinkFormComponent);\n            component.changeDetectorRef.detectChanges();\n\n            return [\n                bubbleLinkFormPlugin({\n                    pluginKey: this.options.pluginKey,\n                    editor: this.editor,\n                    element: component.location.nativeElement,\n                    tippyOptions: this.options.tippyOptions,\n                    component: component\n                })\n            ];\n        }\n    });\n};\n","import { isTextSelection } from '@tiptap/core';\nimport { BubbleMenuItem, ShouldShowProps } from '@dotcms/block-editor';\nimport { LINK_FORM_PLUGIN_KEY } from '../extensions/bubble-link-form.extension';\n\nconst hideBubbleMenuOn = {\n    dotContent: true\n};\n\n/**\n * Determine when the bubble menu can or cannot be displayed.\n *\n * @param {ShouldShowProps} { editor, state, from, to }\n * @return {*}\n */\nexport const shouldShowBubbleMenu = ({ editor, state, from, to }: ShouldShowProps) => {\n    const { doc, selection } = state;\n    const { view } = editor;\n    const { empty } = selection;\n\n    const { isOpen, openOnClick } = LINK_FORM_PLUGIN_KEY.getState(state);\n\n    // Current selected node\n    const node = editor.state.doc.nodeAt(editor.state.selection.from);\n\n    // Sometime check for `empty` is not enough.\n    // Doubleclick an empty paragraph returns a node size of 2.\n    // So we check also for an empty text size.\n    const isEmptyTextBlock = !doc.textBetween(from, to).length && isTextSelection(state.selection);\n\n    // If it's empty or the current node is type dotContent, it will not open.\n    if (\n        !isOpen &&\n        (!view.hasFocus() || empty || isEmptyTextBlock || hideBubbleMenuOn[node?.type.name])\n    ) {\n        return false;\n    }\n\n    if (isOpen && openOnClick) {\n        return false;\n    }\n\n    return true;\n};\n\n/**\n *  Check if a text is a valid url\n *\n * @param {string} nodeText\n * @return {*}\n */\nexport const isValidURL = (nodeText: string) => {\n    const pattern = new RegExp(\n        '^(https?:\\\\/\\\\/)?' + // protocol\n            '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n            '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n            '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n            '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n            '(\\\\#[-a-z\\\\d_]*)?$',\n        'i'\n    ); // fragment locator\n\n    return !!pattern.test(nodeText);\n};\n\nexport const getNodePosition = (node: HTMLElement, type: string): DOMRect => {\n    const img = node.getElementsByTagName('img')[0];\n    // If is a dotImage Node, get the image position\n    if (type === 'dotImage' && img) {\n        return img.getBoundingClientRect();\n    }\n\n    return node.getBoundingClientRect();\n};\n\nexport const isListNode = (editor): boolean => {\n    return editor.isActive('bulletList') || editor.isActive('orderedList');\n};\n\n/* Bubble Menu Items*/\nexport const bubbleMenuItems: Array<BubbleMenuItem> = [\n    {\n        icon: 'format_bold',\n        markAction: 'bold',\n        active: false\n    },\n    {\n        icon: 'format_underlined',\n        markAction: 'underline',\n        active: false\n    },\n    {\n        icon: 'format_italic',\n        markAction: 'italic',\n        active: false\n    },\n    {\n        icon: 'strikethrough_s',\n        markAction: 'strike',\n        active: false,\n        divider: true\n    },\n    {\n        icon: 'format_align_left',\n        markAction: 'left',\n        active: false\n    },\n    {\n        icon: 'format_align_center',\n        markAction: 'center',\n        active: false\n    },\n    {\n        icon: 'format_align_right',\n        markAction: 'right',\n        active: false,\n        divider: true\n    },\n    {\n        icon: 'format_list_bulleted',\n        markAction: 'bulletList',\n        active: false\n    },\n    {\n        icon: 'format_list_numbered',\n        markAction: 'orderedList',\n        active: false\n    },\n    {\n        icon: 'format_indent_decrease',\n        markAction: 'outdent',\n        active: false\n    },\n    {\n        icon: 'format_indent_increase',\n        markAction: 'indent',\n        active: false,\n        divider: true\n    },\n    {\n        icon: 'link',\n        markAction: 'link',\n        active: false,\n        divider: true\n    },\n    {\n        icon: 'format_clear',\n        markAction: 'clearAll',\n        active: false,\n        divider: true\n    },\n    {\n        icon: 'delete',\n        markAction: 'deleteNode',\n        active: false\n    }\n];\n\nexport const bubbleMenuImageItems: Array<BubbleMenuItem> = [\n    {\n        icon: 'format_align_left',\n        markAction: 'left',\n        active: false\n    },\n    {\n        icon: 'format_align_center',\n        markAction: 'center',\n        active: false\n    },\n    {\n        icon: 'format_align_right',\n        markAction: 'right',\n        active: false,\n        divider: true\n    },\n    {\n        icon: 'link',\n        markAction: 'link',\n        active: false,\n        divider: true\n    },\n\n    {\n        icon: 'delete',\n        markAction: 'deleteNode',\n        active: false,\n        divider: false\n    }\n];\n\n// Tippy Modifiers\nexport const popperModifiers = [\n    {\n        name: 'offset',\n        options: {\n            offset: [0, 5]\n        }\n    },\n    {\n        name: 'flip',\n        options: {\n            fallbackPlacements: ['bottom-start', 'top-start']\n        }\n    },\n    {\n        name: 'preventOverflow',\n        options: {\n            altAxis: true,\n            tether: true\n        }\n    }\n];\n","import {\n    Component,\n    OnInit,\n    ViewChild,\n    ElementRef,\n    EventEmitter,\n    Output,\n    Input\n} from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { debounceTime } from 'rxjs/operators';\n\n// Components\nimport {\n    SuggestionsCommandProps,\n    SuggestionsComponent\n} from '../suggestions/suggestions.component';\n\n// Models\nimport { isValidURL } from '../../../utils/bubble-menu.utils';\n\nexport interface NodeProps {\n    link: string;\n    blank: boolean;\n}\n\n@Component({\n    selector: 'dot-bubble-menu-link-form',\n    templateUrl: './bubble-menu-link-form.component.html',\n    styleUrls: ['./bubble-menu-link-form.component.scss']\n})\nexport class BubbleMenuLinkFormComponent implements OnInit {\n    @ViewChild('input') input: ElementRef;\n    @ViewChild('suggestions', { static: false }) suggestionsComponent: SuggestionsComponent;\n\n    @Output() hide: EventEmitter<boolean> = new EventEmitter(false);\n    @Output() removeLink: EventEmitter<boolean> = new EventEmitter(false);\n    @Output() isSuggestionOpen: EventEmitter<boolean> = new EventEmitter(false);\n    @Output() setNodeProps: EventEmitter<NodeProps> = new EventEmitter();\n\n    @Input() showSuggestions = false;\n    @Input() initialValues: NodeProps = {\n        link: '',\n        blank: true\n    };\n\n    private minChars = 3;\n    loading = false;\n    form: FormGroup;\n\n    // Getters\n    get noResultsTitle() {\n        return `No resutls for <strong>${this.newLink}</strong>`;\n    }\n\n    get currentLink() {\n        return this.initialValues.link;\n    }\n\n    get newLink() {\n        return this.form.get('link').value;\n    }\n\n    constructor(private fb: FormBuilder) {\n        /* */\n    }\n\n    ngOnInit() {\n        this.form = this.fb.group({ ...this.initialValues });\n\n        this.form\n            .get('link')\n            .valueChanges.pipe(debounceTime(500))\n            .subscribe((link) => {\n                // If it's a valid url, do not search\n                if (link.length < this.minChars || isValidURL(link)) {\n                    return;\n                }\n\n                this.suggestionsComponent?.searchContentlets({ link });\n            });\n        this.form\n            .get('blank')\n            .valueChanges.subscribe((blank) =>\n                this.setNodeProps.emit({ link: this.currentLink, blank })\n            );\n    }\n\n    /**\n     * Submit node props and close link form.\n     *\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    submitForm() {\n        this.setNodeProps.emit(this.form.value);\n        this.hide.emit(true);\n    }\n\n    /**\n     *\n     *\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    setLoading() {\n        const shouldShow = this.newLink.length >= this.minChars && !isValidURL(this.newLink);\n        this.showSuggestions = shouldShow;\n        this.loading = shouldShow;\n        if (shouldShow) {\n            // Wait for the suggestions to appear in the DOM\n            requestAnimationFrame(() => this.isSuggestionOpen.emit(true));\n        }\n    }\n\n    /**\n     * Set Form values without emit `valueChanges` event.\n     *\n     * @param {NodeProps} { link, blank }\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    setFormValue({ link, blank }: NodeProps) {\n        this.form.setValue({ link, blank }, { emitEvent: false });\n    }\n\n    /**\n     * Set Focus Search Input\n     *\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    focusInput() {\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * Listen Key events on search input\n     *\n     * @param {KeyboardEvent} e\n     * @return {*}\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    onKeyDownEvent(e: KeyboardEvent) {\n        const items = this.suggestionsComponent?.items;\n\n        if (e.key === 'Escape') {\n            this.hide.emit(true);\n\n            return true;\n        }\n\n        if (!this.showSuggestions || !items?.length) {\n            return true;\n        }\n\n        switch (e.key) {\n            case 'Enter':\n                this.suggestionsComponent?.execCommand();\n                // prevent submit form\n\n                return false;\n\n            case 'ArrowUp':\n                this.suggestionsComponent?.updateSelection(e);\n                break;\n\n            case 'ArrowDown':\n                this.suggestionsComponent?.updateSelection(e);\n                break;\n        }\n    }\n\n    /**\n     * Reset form value to initials\n     *\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    resetForm() {\n        this.showSuggestions = false;\n        this.setFormValue({ ...this.initialValues });\n    }\n\n    /**\n     * Set url on selection\n     *\n     * @param {SuggestionsCommandProps} { payload: { url } }\n     * @memberof BubbleMenuLinkFormComponent\n     */\n    onSelection({ payload: { url } }: SuggestionsCommandProps) {\n        this.setFormValue({ ...this.form.value, link: url });\n        this.submitForm();\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DotCMSContentlet } from '@dotcms/dotcms-models';\n\n/**\n *\n * Get the current state of a Contentlet\n * @export\n * @class ContentletStatePipe\n * @implements {PipeTransform}\n */\n@Pipe({\n    name: 'contentletState'\n})\nexport class ContentletStatePipe implements PipeTransform {\n    transform({ live, working, deleted, hasLiveVersion }: DotCMSContentlet) {\n        return { live, working, deleted, hasLiveVersion };\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'dot-suggestion-loading-list',\n    templateUrl: './suggestion-loading-list.component.html',\n    styleUrls: ['./suggestion-loading-list.component.scss']\n})\nexport class SuggestionLoadingListComponent {\n    items = Array(4).fill(0);\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\n@Component({\n    selector: 'dot-form-actions',\n    templateUrl: './form-actions.component.html',\n    styleUrls: ['./form-actions.component.scss']\n})\nexport class FormActionsComponent {\n    @Output() remove: EventEmitter<boolean> = new EventEmitter(false);\n    @Output() hide: EventEmitter<boolean> = new EventEmitter(false);\n\n    @Input() link = '';\n\n    copy() {\n        navigator.clipboard\n            .writeText(this.link)\n            .then(() => this.hide.emit(true))\n            .catch(() => alert('Could not copy link'));\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { EditorDirective } from './editor.directive';\nimport { BubbleMenuDirective } from './bubble-menu.directive';\nimport { DraggableDirective } from './draggable.directive';\nimport { NodeViewContentDirective } from './node-view-content.directive';\n\nimport { MenuModule } from 'primeng/menu';\nimport { CheckboxModule } from 'primeng/checkbox';\nimport { ButtonModule } from 'primeng/button';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { CommonModule } from '@angular/common';\nimport { CardModule } from 'primeng/card';\nimport { ContentletBlockComponent } from './extensions/blocks/contentlet-block/contentlet-block.component';\n\nimport { SuggestionsService } from './extensions/services/suggestions/suggestions.service';\nimport { SuggestionsComponent } from './extensions/components/suggestions/suggestions.component';\nimport { SuggestionListComponent } from './extensions/components/suggestion-list/suggestion-list.component';\nimport { ActionButtonComponent } from './extensions/components/action-button/action-button.component';\nimport { SuggestionsListItemComponent } from './extensions/components/suggestions-list-item/suggestions-list-item.component';\nimport { LoggerService } from '@dotcms/dotcms-js';\nimport { StringUtils } from '@dotcms/dotcms-js';\nimport { DragHandlerComponent } from './extensions/components/drag-handler/drag-handler.component';\nimport { ImageBlockComponent } from './extensions/blocks/image-block/image-block.component';\nimport { LoaderComponent } from './extensions/components/loader/loader.component';\nimport { DotImageService } from './extensions/services/dot-image/dot-image.service';\nimport { BubbleMenuComponent } from './extensions/components/bubble-menu/bubble-menu.component';\nimport { BubbleMenuButtonComponent } from './extensions/components/bubble-menu-button/bubble-menu-button.component';\nimport { BubbleMenuLinkFormComponent } from './extensions/components/bubble-menu-link-form/bubble-menu-link-form.component';\nimport { ContentletStatePipe } from './extensions/pipes/contentlet-state/contentlet-state.pipe';\nimport { SuggestionLoadingListComponent } from './extensions/components/suggestion-loading-list/suggestion-loading-list.component';\nimport { FormActionsComponent } from './extensions/components/bubble-menu-link-form/components/form-actions/form-actions.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        CardModule,\n        MenuModule,\n        CheckboxModule,\n        ButtonModule,\n        InputTextModule\n    ],\n    declarations: [\n        EditorDirective,\n        BubbleMenuDirective,\n        DraggableDirective,\n        NodeViewContentDirective,\n        SuggestionsComponent,\n        SuggestionListComponent,\n        SuggestionsListItemComponent,\n        ContentletBlockComponent,\n        ActionButtonComponent,\n        DragHandlerComponent,\n        ImageBlockComponent,\n        LoaderComponent,\n        BubbleMenuComponent,\n        BubbleMenuButtonComponent,\n        BubbleMenuLinkFormComponent,\n        ContentletStatePipe,\n        SuggestionLoadingListComponent,\n        FormActionsComponent\n    ],\n    providers: [SuggestionsService, DotImageService, LoggerService, StringUtils],\n    exports: [\n        SuggestionsComponent,\n        EditorDirective,\n        BubbleMenuDirective,\n        DraggableDirective,\n        NodeViewContentDirective,\n        ActionButtonComponent,\n        BubbleMenuComponent,\n        BubbleMenuLinkFormComponent,\n        ReactiveFormsModule,\n        CheckboxModule,\n        ButtonModule,\n        InputTextModule\n    ]\n})\nexport class NgxTiptapModule {}\n","import { Editor, posToDOMRect, Range } from '@tiptap/core';\nimport { EditorState, Plugin, PluginKey, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport tippy, { Instance, Props } from 'tippy.js';\nimport { SuggestionsCommandProps } from '../extensions/components/suggestions/suggestions.component';\n\ninterface PluginState {\n    open: boolean;\n}\n\nexport interface FloatingActionsPluginProps {\n    editor: Editor;\n    element: HTMLElement;\n    tippyOptions?: Partial<Props>;\n    render?: () => FloatingRenderActions;\n    command: ({\n        editor,\n        range,\n        props\n    }: {\n        editor: Editor;\n        range: Range;\n        props: SuggestionsCommandProps;\n    }) => void;\n}\n\nexport type FloatingActionsViewProps = FloatingActionsPluginProps & {\n    view: EditorView;\n    key: PluginKey;\n};\n\nexport interface FloatingActionsProps {\n    range: Range;\n    editor: Editor;\n    command: (props: { editor: Editor; range: Range; props: SuggestionsCommandProps }) => void;\n    clientRect: (() => DOMRect) | null;\n}\n\nexport interface FloatingActionsKeydownProps {\n    view: EditorView;\n    event: KeyboardEvent;\n    range: Range;\n}\n\nexport interface FloatingRenderActions {\n    onStart?: (props: FloatingActionsProps) => void;\n    onExit?: (props: FloatingActionsProps) => void;\n    onKeyDown?: (props: FloatingActionsKeydownProps) => boolean;\n}\n\nexport const FLOATING_ACTIONS_MENU_KEYBOARD = 'menuFloating';\n\nexport class FloatingActionsView {\n    editor: Editor;\n    element: HTMLElement;\n    view: EditorView;\n    tippy!: Instance;\n    render: () => FloatingRenderActions;\n    command: (props: { editor: Editor; range: Range; props: SuggestionsCommandProps }) => void;\n    key: PluginKey;\n    invalidNodes = ['codeBlock', 'blockquote'];\n\n    constructor({\n        editor,\n        element,\n        view,\n        tippyOptions,\n        render,\n        command,\n        key\n    }: FloatingActionsViewProps) {\n        this.editor = editor;\n        this.element = element;\n        this.view = view;\n        this.element.addEventListener('mousedown', this.mousedownHandler, { capture: true });\n        this.editor.on('focus', () => {\n            this.tippy.unmount();\n            this.update(this.editor.view);\n        });\n        this.element.style.visibility = 'visible';\n        this.render = render;\n        this.command = command;\n        this.key = key;\n        this.createTooltip(tippyOptions);\n    }\n\n    /**\n     * Element mousedown handler to update the plugin state and open\n     *\n     * @param {MouseEvent} e\n     * @memberof FloatingActionsView\n     */\n    mousedownHandler = (e: MouseEvent): void => {\n        e.preventDefault();\n        this.editor.chain().insertContent('/').run();\n    };\n\n    /**\n     * Create the tooltip for the element\n     *\n     * @param {Partial<Props>} [options={}]\n     * @memberof FloatingActionsView\n     */\n    createTooltip(options: Partial<Props> = {}): void {\n        this.tippy = tippy(this.view.dom, {\n            duration: 0,\n            getReferenceClientRect: null,\n            content: this.element,\n            interactive: true,\n            trigger: 'manual',\n            placement: 'left',\n            hideOnClick: 'toggle',\n            ...options\n        });\n    }\n\n    /**\n     * Check the EditorState and based on that modify the DOM\n     *\n     * @param {EditorView} view\n     * @param {EditorState} prevState\n     * @return {*}  {void}\n     * @memberof FloatingActionsView\n     */\n    update(view: EditorView, prevState?: EditorState): void {\n        const { selection } = view.state;\n        const { $anchor, empty, from, to } = selection;\n        const isRootDepth = $anchor.depth === 1;\n        const isNodeEmpty =\n            !selection.$anchor.parent.isLeaf && !selection.$anchor.parent.textContent;\n        const isActive = isRootDepth && isNodeEmpty;\n        const nodeType = $anchor.parent.type.name;\n\n        const next = this.key?.getState(view.state);\n        const prev = prevState ? this.key?.getState(prevState) : null;\n\n        if (!prev?.open && (!empty || !isActive)) {\n            this.hide();\n\n            return;\n        }\n\n        // Hide is Parent node is not the editor\n        if (!prev?.open && this.invalidNodes.includes(nodeType)) {\n            this.hide();\n\n            return;\n        }\n\n        this.tippy.setProps({\n            getReferenceClientRect: () => posToDOMRect(view, from, to)\n        });\n        this.show();\n\n        if (next.open) {\n            const { from, to } = this.editor.state.selection;\n            const rect = posToDOMRect(this.view, from, to);\n\n            this.render().onStart({\n                clientRect: () => rect,\n                range: { from, to },\n                editor: this.editor,\n                command: this.command\n            });\n        } else if (prev && prev.open) {\n            this.render().onExit(null);\n        }\n    }\n\n    show() {\n        this.tippy.show();\n    }\n\n    hide() {\n        this.tippy.hide();\n    }\n\n    destroy() {\n        this.tippy.destroy();\n        this.element.removeEventListener('mousedown', this.mousedownHandler);\n    }\n}\n\nexport const FloatingActionsPluginKey = new PluginKey(FLOATING_ACTIONS_MENU_KEYBOARD);\n\nexport const FloatingActionsPlugin = (options: FloatingActionsPluginProps) => {\n    return new Plugin({\n        key: FloatingActionsPluginKey,\n        view: (view) =>\n            new FloatingActionsView({ key: FloatingActionsPluginKey, view, ...options }),\n        state: {\n            /**\n             * Init the plugin state\n             *\n             * @return {*}  {PluginState}\n             */\n            init(): PluginState {\n                return {\n                    open: false\n                };\n            },\n            /**\n             * Update the plugin state base on meta information\n             *\n             * @param {Transaction} transaction\n             * @return {*}  {PluginState}\n             */\n            apply(transaction: Transaction): PluginState {\n                const transactionMeta = transaction.getMeta(FLOATING_ACTIONS_MENU_KEYBOARD);\n\n                if (transactionMeta?.open) {\n                    return {\n                        open: transactionMeta?.open\n                    };\n                }\n\n                return {\n                    open: false\n                };\n            }\n        },\n        props: {\n            /**\n             * Catch and handle the keydown in the plugin\n             *\n             * @param {EditorView} view\n             * @param {KeyboardEvent} event\n             * @return {*}\n             */\n            handleKeyDown(view: EditorView, event: KeyboardEvent) {\n                const { open, range } = this.getState(view.state);\n                if (!open) {\n                    return false;\n                }\n\n                return options.render().onKeyDown({ event, range, view });\n            }\n        }\n    });\n};\n","/* eslint-disable max-len */\n\nexport const headerIcons = [\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuNjMyODEgMjJWMjEuMDE1Nkw3LjkwNjI1IDIwLjc5NjlWMTEuODM1OUw2LjYzMjgxIDExLjYxNzJWMTAuNjI1SDEwLjcxODhWMTEuNjE3Mkw5LjQ0NTMxIDExLjgzNTlWMTUuNzY1NkgxNC44ODI4VjExLjgzNTlMMTMuNjA5NCAxMS42MTcyVjEwLjYyNUgxNy42OTUzVjExLjYxNzJMMTYuNDIxOSAxMS44MzU5VjIwLjc5NjlMMTcuNjk1MyAyMS4wMTU2VjIySDEzLjYwOTRWMjEuMDE1NkwxNC44ODI4IDIwLjc5NjlWMTYuOTc2Nkg5LjQ0NTMxVjIwLjc5NjlMMTAuNzE4OCAyMS4wMTU2VjIySDYuNjMyODFaTTE5LjI3MzQgMjJWMjEuMDE1NkwyMS4wMzEyIDIwLjc5NjlWMTIuMjczNEwxOS4yNDIyIDEyLjMwNDdWMTEuMzQzOEwyMi41NzAzIDEwLjYyNVYyMC43OTY5TDI0LjMyMDMgMjEuMDE1NlYyMkgxOS4yNzM0WiIgZmlsbD0iIzIyMjIyMiIvPgo8L3N2Zz4K',\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTUuNjMyODEgMjJWMjEuMDE1Nkw2LjkwNjI1IDIwLjc5NjlWMTEuODM1OUw1LjYzMjgxIDExLjYxNzJWMTAuNjI1SDkuNzE4NzVWMTEuNjE3Mkw4LjQ0NTMxIDExLjgzNTlWMTUuNzY1NkgxMy44ODI4VjExLjgzNTlMMTIuNjA5NCAxMS42MTcyVjEwLjYyNUgxNi42OTUzVjExLjYxNzJMMTUuNDIxOSAxMS44MzU5VjIwLjc5NjlMMTYuNjk1MyAyMS4wMTU2VjIySDEyLjYwOTRWMjEuMDE1NkwxMy44ODI4IDIwLjc5NjlWMTYuOTc2Nkg4LjQ0NTMxVjIwLjc5NjlMOS43MTg3NSAyMS4wMTU2VjIySDUuNjMyODFaTTE4LjA4NTkgMjJWMjAuOTQ1M0wyMS44MTI1IDE2LjgwNDdDMjIuMjU1MiAxNi4zMDk5IDIyLjYwMTYgMTUuODg4IDIyLjg1MTYgMTUuNTM5MUMyMy4xMDE2IDE1LjE4NDkgMjMuMjc2IDE0Ljg2NDYgMjMuMzc1IDE0LjU3ODFDMjMuNDc0IDE0LjI5MTcgMjMuNTIzNCAxMy45OTQ4IDIzLjUyMzQgMTMuNjg3NUMyMy41MjM0IDEzLjExOTggMjMuMzUxNiAxMi42NDMyIDIzLjAwNzggMTIuMjU3OEMyMi42NjQxIDExLjg2NzIgMjIuMTcxOSAxMS42NzE5IDIxLjUzMTIgMTEuNjcxOUMyMC44NjQ2IDExLjY3MTkgMjAuMzQzOCAxMS44NzI0IDE5Ljk2ODggMTIuMjczNEMxOS41OTkgMTIuNjc0NSAxOS40MTQxIDEzLjI0MjIgMTkuNDE0MSAxMy45NzY2SDE3LjkzNzVMMTcuOTIxOSAxMy45Mjk3QzE3LjkwNjIgMTMuMjczNCAxOC4wNDQzIDEyLjY4NDkgMTguMzM1OSAxMi4xNjQxQzE4LjYyNzYgMTEuNjM4IDE5LjA0OTUgMTEuMjI0IDE5LjYwMTYgMTAuOTIxOUMyMC4xNTg5IDEwLjYxNDYgMjAuODIwMyAxMC40NjA5IDIxLjU4NTkgMTAuNDYwOUMyMi4zMDQ3IDEwLjQ2MDkgMjIuOTIxOSAxMC41OTkgMjMuNDM3NSAxMC44NzVDMjMuOTU4MyAxMS4xNDU4IDI0LjM1OTQgMTEuNTE4MiAyNC42NDA2IDExLjk5MjJDMjQuOTIxOSAxMi40NjYxIDI1LjA2MjUgMTMuMDEwNCAyNS4wNjI1IDEzLjYyNUMyNS4wNjI1IDE0LjI1IDI0Ljg3NzYgMTQuODcyNCAyNC41MDc4IDE1LjQ5MjJDMjQuMTQzMiAxNi4xMTIgMjMuNjI3NiAxNi43ODEyIDIyLjk2MDkgMTcuNUwxOS45Njg4IDIwLjc1NzhMMTkuOTg0NCAyMC43OTY5SDI0LjAyMzRMMjQuMTQ4NCAxOS40OTIySDI1LjQ1MzFWMjJIMTguMDg1OVoiIGZpbGw9IiMyMjIyMjIiLz4KPC9zdmc+Cg==',\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTUuNjMyODEgMjJWMjEuMDE1Nkw2LjkwNjI1IDIwLjc5NjlWMTEuODM1OUw1LjYzMjgxIDExLjYxNzJWMTAuNjI1SDkuNzE4NzVWMTEuNjE3Mkw4LjQ0NTMxIDExLjgzNTlWMTUuNzY1NkgxMy44ODI4VjExLjgzNTlMMTIuNjA5NCAxMS42MTcyVjEwLjYyNUgxNi42OTUzVjExLjYxNzJMMTUuNDIxOSAxMS44MzU5VjIwLjc5NjlMMTYuNjk1MyAyMS4wMTU2VjIySDEyLjYwOTRWMjEuMDE1NkwxMy44ODI4IDIwLjc5NjlWMTYuOTc2Nkg4LjQ0NTMxVjIwLjc5NjlMOS43MTg3NSAyMS4wMTU2VjIySDUuNjMyODFaTTIxLjQ2ODggMjIuMTY0MUMyMC43NzYgMjIuMTY0MSAyMC4xNTg5IDIyLjAzOTEgMTkuNjE3MiAyMS43ODkxQzE5LjA3NTUgMjEuNTMzOSAxOC42NTEgMjEuMTc0NSAxOC4zNDM4IDIwLjcxMDlDMTguMDQxNyAyMC4yNDIyIDE3Ljg5ODQgMTkuNjg3NSAxNy45MTQxIDE5LjA0NjlMMTcuOTM3NSAxOUgxOS40MDYyQzE5LjQwNjIgMTkuNTk5IDE5LjU4ODUgMjAuMDc1NSAxOS45NTMxIDIwLjQyOTdDMjAuMzIyOSAyMC43ODM5IDIwLjgyODEgMjAuOTYwOSAyMS40Njg4IDIwLjk2MDlDMjIuMTE5OCAyMC45NjA5IDIyLjYzMDIgMjAuNzgzOSAyMyAyMC40Mjk3QzIzLjM2OTggMjAuMDc1NSAyMy41NTQ3IDE5LjU1MjEgMjMuNTU0NyAxOC44NTk0QzIzLjU1NDcgMTguMTU2MiAyMy4zOTA2IDE3LjYzOCAyMy4wNjI1IDE3LjMwNDdDMjIuNzM0NCAxNi45NzE0IDIyLjIxNjEgMTYuODA0NyAyMS41MDc4IDE2LjgwNDdIMjAuMTY0MVYxNS42MDE2SDIxLjUwNzhDMjIuMTkwMSAxNS42MDE2IDIyLjY3MTkgMTUuNDMyMyAyMi45NTMxIDE1LjA5MzhDMjMuMjM5NiAxNC43NSAyMy4zODI4IDE0LjI3MzQgMjMuMzgyOCAxMy42NjQxQzIzLjM4MjggMTIuMzM1OSAyMi43NDQ4IDExLjY3MTkgMjEuNDY4OCAxMS42NzE5QzIwLjg2OTggMTEuNjcxOSAyMC4zODggMTEuODQ5IDIwLjAyMzQgMTIuMjAzMUMxOS42NjQxIDEyLjU1MjEgMTkuNDg0NCAxMy4wMTgyIDE5LjQ4NDQgMTMuNjAxNkgxOC4wMDc4TDE3Ljk5MjIgMTMuNTU0N0MxNy45NzY2IDEyLjk4MTggMTguMTEyIDEyLjQ2MDkgMTguMzk4NCAxMS45OTIyQzE4LjY5MDEgMTEuNTIzNCAxOS4wOTkgMTEuMTUxIDE5LjYyNSAxMC44NzVDMjAuMTU2MiAxMC41OTkgMjAuNzcwOCAxMC40NjA5IDIxLjQ2ODggMTAuNDYwOUMyMi41MjA4IDEwLjQ2MDkgMjMuMzU5NCAxMC43NDIyIDIzLjk4NDQgMTEuMzA0N0MyNC42MDk0IDExLjg2MiAyNC45MjE5IDEyLjY1ODkgMjQuOTIxOSAxMy42OTUzQzI0LjkyMTkgMTQuMTY0MSAyNC43Nzg2IDE0LjYzMjggMjQuNDkyMiAxNS4xMDE2QzI0LjIxMDkgMTUuNTY1MSAyMy43ODY1IDE1LjkxOTMgMjMuMjE4OCAxNi4xNjQxQzIzLjkwMSAxNi4zODggMjQuMzgyOCAxNi43Mzk2IDI0LjY2NDEgMTcuMjE4OEMyNC45NTA1IDE3LjY5NzkgMjUuMDkzOCAxOC4yMzQ0IDI1LjA5MzggMTguODI4MUMyNS4wOTM4IDE5LjUyMDggMjQuOTM3NSAyMC4xMTcyIDI0LjYyNSAyMC42MTcyQzI0LjMxNzcgMjEuMTEyIDIzLjg5MDYgMjEuNDk0OCAyMy4zNDM4IDIxLjc2NTZDMjIuNzk2OSAyMi4wMzEyIDIyLjE3MTkgMjIuMTY0MSAyMS40Njg4IDIyLjE2NDFaIiBmaWxsPSIjMjIyMjIyIi8+Cjwvc3ZnPgo='\n];\n\nexport const olIcon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuNzA4OTggMjAuNTMxMlYxOS43OTNMOC4wMjczNCAxOS42Mjg5VjEzLjIzNjNMNi42ODU1NSAxMy4yNTk4VjEyLjUzOTFMOS4xODE2NCAxMlYxOS42Mjg5TDEwLjQ5NDEgMTkuNzkzVjIwLjUzMTJINi43MDg5OFoiIGZpbGw9IiMyMjIyMjIiLz4KPHBhdGggZD0iTTExLjc5NDkgMjAuNTMxMlYxOS4zNDc3SDEyLjk0OTJWMjAuNTMxMkgxMS43OTQ5WiIgZmlsbD0iIzIyMjIyMiIvPgo8cmVjdCB4PSIxNSIgeT0iMTMiIHdpZHRoPSIxMSIgaGVpZ2h0PSIxIiBmaWxsPSIjMjIyMjIyIi8+CjxyZWN0IHg9IjE1IiB5PSIxNiIgd2lkdGg9IjExIiBoZWlnaHQ9IjEiIGZpbGw9IiMyMjIyMjIiLz4KPHJlY3QgeD0iMTUiIHk9IjE5IiB3aWR0aD0iMTEiIGhlaWdodD0iMSIgZmlsbD0iIzIyMjIyMiIvPgo8L3N2Zz4K';\n\nexport const ulIcon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMTQiIHk9IjEyIiB3aWR0aD0iMTIiIGhlaWdodD0iMSIgZmlsbD0iIzIyMjIyMiIvPgo8cmVjdCB4PSIxNCIgeT0iMTUiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxIiBmaWxsPSIjMjIyMjIyIi8+CjxyZWN0IHg9IjE0IiB5PSIxOCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEiIGZpbGw9IiMyMjIyMjIiLz4KPGNpcmNsZSBjeD0iOC41IiBjeT0iMTUuNSIgcj0iMi41IiBmaWxsPSIjMjIyMjIyIi8+Cjwvc3ZnPgo=';\n\nexport const pIcon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuNDc0NjEgMTZWMTUuMjYxN0w3LjQyOTY5IDE1LjA5NzdWOC4zNzY5NUw2LjQ3NDYxIDguMjEyODlWNy40Njg3NUgxMC4zOTQ1QzExLjMwNDcgNy40Njg3NSAxMi4wMTE3IDcuNzAzMTIgMTIuNTE1NiA4LjE3MTg4QzEzLjAyMzQgOC42NDA2MiAxMy4yNzczIDkuMjU3ODEgMTMuMjc3MyAxMC4wMjM0QzEzLjI3NzMgMTAuNzk2OSAxMy4wMjM0IDExLjQxNiAxMi41MTU2IDExLjg4MDlDMTIuMDExNyAxMi4zNDU3IDExLjMwNDcgMTIuNTc4MSAxMC4zOTQ1IDEyLjU3ODFIOC41ODM5OFYxNS4wOTc3TDkuNTM5MDYgMTUuMjYxN1YxNkg2LjQ3NDYxWk04LjU4Mzk4IDExLjY3NThIMTAuMzk0NUMxMC45NzI3IDExLjY3NTggMTEuNDA0MyAxMS41MjE1IDExLjY4OTUgMTEuMjEyOUMxMS45Nzg1IDEwLjkwMDQgMTIuMTIzIDEwLjUwNzggMTIuMTIzIDEwLjAzNTJDMTIuMTIzIDkuNTYyNSAxMS45Nzg1IDkuMTY3OTcgMTEuNjg5NSA4Ljg1MTU2QzExLjQwNDMgOC41MzUxNiAxMC45NzI3IDguMzc2OTUgMTAuMzk0NSA4LjM3Njk1SDguNTgzOThWMTEuNjc1OFoiIGZpbGw9IiMyMjIyMjIiLz4KPHJlY3QgeD0iMTUiIHk9IjE0IiB3aWR0aD0iMTEiIGhlaWdodD0iMSIgZmlsbD0iIzIyMjIyMiIvPgo8cmVjdCB4PSI2IiB5PSIxOCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjEiIGZpbGw9IiMyMjIyMjIiLz4KPHJlY3QgeD0iNiIgeT0iMjIiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxIiBmaWxsPSIjMjIyMjIyIi8+Cjwvc3ZnPgo=';\n\nexport const quoteIcon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTcuNjI1IDEzQzcuMTI1IDEzIDYuNzI1IDEyLjg1IDYuNDI1IDEyLjU1QzYuMTQxNjcgMTIuMjMzMyA2IDExLjggNiAxMS4yNUM2IDEwLjAzMzMgNi4zNzUgOC45NjY2NyA3LjEyNSA4LjA1QzcuNDU4MzMgNy42MTY2NyA3LjgzMzMzIDcuMjY2NjcgOC4yNSA3TDkgNy44NzVDOC43NjY2NyA4LjA0MTY3IDguNTMzMzMgOC4yNTgzMyA4LjMgOC41MjVDNy44NSA5LjAwODMzIDcuNjI1IDkuNSA3LjYyNSAxMEM4LjAwODMzIDEwIDguMzMzMzMgMTAuMTQxNyA4LjYgMTAuNDI1QzguODY2NjcgMTAuNzA4MyA5IDExLjA2NjcgOSAxMS41QzkgMTEuOTMzMyA4Ljg2NjY3IDEyLjI5MTcgOC42IDEyLjU3NUM4LjMzMzMzIDEyLjg1ODMgOC4wMDgzMyAxMyA3LjYyNSAxM1pNMTEuNjI1IDEzQzExLjEyNSAxMyAxMC43MjUgMTIuODUgMTAuNDI1IDEyLjU1QzEwLjE0MTcgMTIuMjMzMyAxMCAxMS44IDEwIDExLjI1QzEwIDEwLjAzMzMgMTAuMzc1IDguOTY2NjcgMTEuMTI1IDguMDVDMTEuNDU4MyA3LjYxNjY3IDExLjgzMzMgNy4yNjY2NyAxMi4yNSA3TDEzIDcuODc1QzEyLjc2NjcgOC4wNDE2NyAxMi41MzMzIDguMjU4MzMgMTIuMyA4LjUyNUMxMS44NSA5LjAwODMzIDExLjYyNSA5LjUgMTEuNjI1IDEwQzEyLjAwODMgMTAgMTIuMzMzMyAxMC4xNDE3IDEyLjYgMTAuNDI1QzEyLjg2NjcgMTAuNzA4MyAxMyAxMS4wNjY3IDEzIDExLjVDMTMgMTEuOTMzMyAxMi44NjY3IDEyLjI5MTcgMTIuNiAxMi41NzVDMTIuMzMzMyAxMi44NTgzIDEyLjAwODMgMTMgMTEuNjI1IDEzWiIgZmlsbD0iIzIyMjIyMiIvPgo8cmVjdCB4PSIxNSIgeT0iMTQiIHdpZHRoPSIxMSIgaGVpZ2h0PSIxIiBmaWxsPSIjMjIyMjIyIi8+CjxyZWN0IHg9IjYiIHk9IjE4IiB3aWR0aD0iMjAiIGhlaWdodD0iMSIgZmlsbD0iIzIyMjIyMiIvPgo8cmVjdCB4PSI2IiB5PSIyMiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjEiIGZpbGw9IiMyMjIyMjIiLz4KPC9zdmc+Cg==';\n\nexport const codeIcon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEzLjQgMjAuNkw4LjggMTZMMTMuNCAxMS40TDEyIDEwTDYgMTZMMTIgMjJMMTMuNCAyMC42Wk0xOC42IDIwLjZMMjMuMiAxNkwxOC42IDExLjRMMjAgMTBMMjYgMTZMMjAgMjJMMTguNiAyMC42WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==';\n\nexport const lineIcon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iNiIgeT0iMTUiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K';\n","import {\n    codeIcon,\n    headerIcons,\n    lineIcon,\n    olIcon,\n    pIcon,\n    quoteIcon,\n    ulIcon\n} from '../extensions/components/suggestions/suggestion-icons';\nimport { SafeUrl, ɵDomSanitizerImpl } from '@angular/platform-browser';\nimport { DotMenuItem } from '../extensions/components/suggestions/suggestions.component';\n\nconst domSanitizer = new ɵDomSanitizerImpl(document);\n\nconst headings = [...Array(3).keys()].map((level) => {\n    const size = level + 1;\n\n    return {\n        label: `Heading ${size}`,\n        icon: sanitizeUrl(headerIcons[level]),\n        id: `heading${size}`,\n        attributes: { level: size }\n    };\n});\n\nconst paragraph = [\n    {\n        label: 'Paragraph',\n        icon: sanitizeUrl(pIcon),\n        id: 'paragraph'\n    }\n];\n\nconst list = [\n    {\n        label: 'List Ordered',\n        icon: sanitizeUrl(olIcon),\n        id: 'orderedList'\n    },\n    {\n        label: 'List Unordered',\n        icon: sanitizeUrl(ulIcon),\n        id: 'bulletList'\n    }\n];\n\nconst block = [\n    {\n        label: 'Blockquote',\n        icon: sanitizeUrl(quoteIcon),\n        id: 'blockquote'\n    },\n    {\n        label: 'Code Block',\n        icon: sanitizeUrl(codeIcon),\n        id: 'codeBlock'\n    },\n    {\n        label: 'Horizontal Line',\n        icon: sanitizeUrl(lineIcon),\n        id: 'horizontalLine'\n    }\n];\n\nfunction sanitizeUrl(url: string): SafeUrl {\n    return domSanitizer.bypassSecurityTrustUrl(url);\n}\n\nexport const suggestionOptions: DotMenuItem[] = [...headings, ...paragraph, ...list, ...block];\n\nexport const SuggestionPopperModifiers = [\n    {\n        name: 'flip',\n        options: {\n            fallbackPlacements: ['top']\n        }\n    },\n    {\n        name: 'preventOverflow',\n        options: {\n            altAxis: false,\n            tether: false\n        }\n    }\n];\n\nexport const CONTENT_SUGGESTION_ID = 'contentlets';\n","import { ComponentRef, ViewContainerRef } from '@angular/core';\n\nimport { Editor, Extension, Range } from '@tiptap/core';\nimport { FloatingMenuPluginProps } from '@tiptap/extension-floating-menu';\nimport Suggestion, { SuggestionOptions, SuggestionProps } from '@tiptap/suggestion';\nimport { Level } from '@tiptap/extension-heading';\n\nimport tippy, { GetReferenceClientRect } from 'tippy.js';\n\nimport {\n    FLOATING_ACTIONS_MENU_KEYBOARD,\n    FloatingActionsKeydownProps,\n    FloatingActionsPlugin,\n    FloatingActionsProps\n} from '../plugins/floating.plugin';\nimport {\n    ItemsType,\n    SuggestionsCommandProps,\n    SuggestionsComponent\n} from './components/suggestions/suggestions.component';\nimport { ActionButtonComponent } from './components/action-button/action-button.component';\nimport { PluginKey } from 'prosemirror-state';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport {\n    CONTENT_SUGGESTION_ID,\n    suggestionOptions,\n    SuggestionPopperModifiers\n} from '../utils/suggestion.utils';\n\ndeclare module '@tiptap/core' {\n    interface Commands<ReturnType> {\n        actionsMenu: {\n            /**\n             * Add Heading\n             */\n            addHeading: (attr: {\n                range: Range;\n                type: { name: string; level?: number };\n            }) => ReturnType;\n            addContentletBlock: ({ range: Range, payload: unknown }) => ReturnType;\n        };\n    }\n}\n\nexport type FloatingMenuOptions = Omit<FloatingMenuPluginProps, 'editor' | 'element'> & {\n    element: HTMLElement | null;\n    suggestion: Omit<SuggestionOptions, 'editor'>;\n};\n\nfunction getSuggestionComponent(viewContainerRef: ViewContainerRef) {\n    const component = viewContainerRef.createComponent(SuggestionsComponent);\n    component.changeDetectorRef.detectChanges();\n\n    return component;\n}\n\nfunction getTippyInstance({\n    element,\n    content,\n    rect,\n    onHide\n}: {\n    element: Element;\n    content: Element;\n    rect: GetReferenceClientRect;\n    onHide?: () => void;\n}) {\n    return tippy(element, {\n        appendTo: document.body,\n        content: content,\n        placement: 'bottom',\n        popperOptions: {\n            modifiers: SuggestionPopperModifiers\n        },\n        getReferenceClientRect: rect,\n        showOnCreate: true,\n        interactive: true,\n        offset: [120, 10],\n        trigger: 'manual',\n        maxWidth: 'none',\n        onHide\n    });\n}\n\nfunction execCommand({\n    editor,\n    range,\n    props\n}: {\n    editor: Editor;\n    range: Range;\n    props: SuggestionsCommandProps;\n}) {\n    const whatToDo = {\n        dotContent: () => {\n            editor.chain().addContentletBlock({ range, payload: props.payload }).run();\n        },\n        heading: () => {\n            editor.chain().addHeading({ range, type: props.type }).run();\n        },\n        orderedList: () => {\n            editor.chain().deleteRange(range).toggleOrderedList().focus().run();\n        },\n        bulletList: () => {\n            editor.chain().deleteRange(range).toggleBulletList().focus().run();\n        },\n        blockquote: () => {\n            editor.chain().deleteRange(range).setBlockquote().focus().run();\n        },\n        codeBlock: () => {\n            editor.chain().deleteRange(range).setCodeBlock().focus().run();\n        },\n        horizontalLine: () => {\n            editor.chain().deleteRange(range).setHorizontalRule().focus().run();\n        }\n    };\n\n    whatToDo[props.type.name]\n        ? whatToDo[props.type.name]()\n        : editor.chain().setTextSelection(range).focus().run();\n}\n\nexport const ActionsMenu = (viewContainerRef: ViewContainerRef) => {\n    let myTippy;\n    let suggestionsComponent: ComponentRef<SuggestionsComponent>;\n    const suggestionKey = new PluginKey('suggestionPlugin');\n    const destroy$: Subject<boolean> = new Subject<boolean>();\n\n    /**\n     * Get's called on button click or suggestion char\n     *\n     * @param {(SuggestionProps | FloatingActionsProps)} { editor, range, clientRect }\n     */\n    function onStart({ editor, range, clientRect }: SuggestionProps | FloatingActionsProps): void {\n        setUpSuggestionComponent(editor, range);\n        myTippy = getTippyInstance({\n            element: editor.view.dom,\n            content: suggestionsComponent.location.nativeElement,\n            rect: clientRect,\n            onHide: () => {\n                const transaction = editor.state.tr.setMeta(FLOATING_ACTIONS_MENU_KEYBOARD, {\n                    open: false\n                });\n                editor.view.dispatch(transaction);\n            }\n        });\n    }\n\n    function setUpSuggestionComponent(editor: Editor, range: Range) {\n        const allowedBlocks: string[] = editor.storage.dotConfig.allowedBlocks;\n        suggestionsComponent = getSuggestionComponent(viewContainerRef);\n        suggestionsComponent.instance.currentLanguage = editor.storage.dotConfig.lang;\n        suggestionsComponent.instance.allowedContentTypes =\n            editor.storage.dotConfig.allowedContentTypes;\n        if (allowedBlocks.length > 1) {\n            suggestionsComponent.instance.items = suggestionOptions.filter((item) =>\n                allowedBlocks.includes(item.id)\n            );\n            if (allowedBlocks.includes(CONTENT_SUGGESTION_ID)) {\n                suggestionsComponent.instance.addCContentletItem();\n            }\n        } else {\n            suggestionsComponent.instance.addCContentletItem();\n        }\n\n        suggestionsComponent.instance.onSelection = (item) => {\n            const suggestionQuery = suggestionKey.getState(editor.view.state).query?.length || 0;\n            range.to = range.to + suggestionQuery;\n            execCommand({ editor: editor, range: range, props: item });\n        };\n\n        suggestionsComponent.instance.clearFilter.pipe(takeUntil(destroy$)).subscribe((type) => {\n            const queryRange = {\n                to: range.to + suggestionKey.getState(editor.view.state).query.length,\n                from: type === ItemsType.BLOCK ? range.from : range.from + 1\n            };\n            editor.chain().deleteRange(queryRange).run();\n        });\n    }\n\n    /**\n     * Handle the keyboard events when the suggestion are opened\n     *\n     * @param {FloatingActionsKeydownProps} { event }\n     * @return {*}  {boolean}\n     */\n    function onKeyDown({ event }: FloatingActionsKeydownProps): boolean {\n        const { key } = event;\n\n        if (key === 'Escape') {\n            myTippy.hide();\n\n            return true;\n        }\n\n        if (key === 'Enter') {\n            suggestionsComponent.instance.execCommand();\n\n            return true;\n        }\n\n        if (key === 'ArrowDown' || key === 'ArrowUp') {\n            suggestionsComponent.instance.updateSelection(event);\n\n            return true;\n        }\n\n        return false;\n    }\n\n    function onExit() {\n        myTippy?.destroy();\n        suggestionsComponent = null;\n        destroy$.next(true);\n        destroy$.complete();\n    }\n\n    return Extension.create<FloatingMenuOptions>({\n        name: 'actionsMenu',\n\n        addOptions() {\n            return {\n                pluginKey: 'actionsMenu',\n                element: null,\n                suggestion: {\n                    char: '/',\n                    pluginKey: suggestionKey,\n                    allowSpaces: true,\n                    startOfLine: true,\n                    render: () => {\n                        return {\n                            onStart,\n                            onKeyDown,\n                            onExit\n                        };\n                    },\n                    items: ({ query }) => {\n                        if (suggestionsComponent) {\n                            suggestionsComponent.instance.filterItems(query);\n                        }\n\n                        // suggestions plugin need to return something,\n                        // but we are using the angular suggestionsComponent\n                        // https://tiptap.dev/api/utilities/suggestion\n                        return [];\n                    }\n                }\n            };\n        },\n\n        addCommands() {\n            return {\n                addHeading:\n                    ({ range, type }) =>\n                    ({ chain }) => {\n                        return chain()\n                            .focus()\n                            .deleteRange(range)\n                            .toggleHeading({ level: type.level as Level })\n                            .focus()\n                            .run();\n                    },\n                addContentletBlock:\n                    ({ range, payload }) =>\n                    ({ chain }) => {\n                        return chain()\n                            .deleteRange(range)\n                            .command((data) => {\n                                const node = data.editor.schema.nodes.dotContent.create({\n                                    data: payload\n                                });\n                                data.tr.replaceSelectionWith(node);\n\n                                return true;\n                            })\n                            .focus()\n                            .run();\n                    }\n            };\n        },\n\n        addProseMirrorPlugins() {\n            const button = viewContainerRef.createComponent(ActionButtonComponent);\n\n            return [\n                FloatingActionsPlugin({\n                    command: execCommand,\n                    editor: this.editor,\n                    element: button.location.nativeElement,\n                    render: () => {\n                        return {\n                            onStart,\n                            onKeyDown,\n                            onExit\n                        };\n                    }\n                }),\n                Suggestion({\n                    editor: this.editor,\n                    ...this.options.suggestion\n                })\n            ];\n        }\n    });\n};\n","import { Node, mergeAttributes, NodeViewRenderer } from '@tiptap/core';\nimport { Injector } from '@angular/core';\nimport { DOMOutputSpec, ParseRule } from 'prosemirror-model';\nimport { ImageBlockComponent } from './image-block.component';\nimport { AngularNodeViewRenderer } from '../../../NodeViewRenderer';\n\nexport const IMAGE_BLOCK_NAME = 'dotImage';\n\ndeclare module '@tiptap/core' {\n    interface Commands<ReturnType> {\n        ImageBlock: {\n            /**\n             * Set Image Link mark\n             */\n            setImageLink: (attributes: { href: string }) => ReturnType;\n            /**\n             * Unset Image Link mark\n             */\n            unsetImageLink: () => ReturnType;\n        };\n    }\n}\n\nexport const ImageBlock = (injector: Injector): Node => {\n    return Node.create({\n        name: IMAGE_BLOCK_NAME,\n        group: 'block',\n        inline: false,\n        draggable: true,\n\n        addAttributes() {\n            return {\n                data: {\n                    default: null,\n                    parseHTML: (element) => element.getAttribute('data'),\n                    renderHTML: (attributes) => {\n                        return { data: attributes.data };\n                    }\n                },\n                href: {\n                    default: null,\n                    parseHTML: (element) => element.getAttribute('href'),\n                    renderHTML: (attributes) => {\n                        return { href: attributes.href };\n                    }\n                }\n            };\n        },\n\n        addCommands() {\n            return {\n                setImageLink:\n                    (attributes) =>\n                    ({ commands }) => {\n                        return commands.updateAttributes('dotImage', attributes);\n                    },\n                unsetImageLink:\n                    () =>\n                    ({ commands }) => {\n                        return commands.updateAttributes('dotImage', { href: '' });\n                    }\n            };\n        },\n\n        parseHTML(): ParseRule[] {\n            return [{ tag: 'dotcms-image-block' }];\n        },\n\n        renderHTML({ HTMLAttributes }): DOMOutputSpec {\n            return ['dotcms-image-block', mergeAttributes(HTMLAttributes)];\n        },\n\n        addNodeView(): NodeViewRenderer {\n            return AngularNodeViewRenderer(ImageBlockComponent, { injector });\n        }\n    });\n};\n","import { Plugin } from 'prosemirror-state';\nimport { Decoration, DecorationSet } from 'prosemirror-view';\n\nexport const PlaceholderPlugin = new Plugin({\n    state: {\n        init() {\n            return DecorationSet.empty;\n        },\n        apply(tr, set) {\n            // Adjust decoration positions to changes made by the transaction\n            set = set.map(tr.mapping, tr.doc);\n            // See if the transaction adds or removes any placeholders\n            const action = tr.getMeta(this);\n            if (action && action.add) {\n                const id = action.add.id;\n                const deco = Decoration.widget(action.add.pos, action.add.element, {\n                    key: id\n                });\n                set = set.add(tr.doc, [deco]);\n            } else if (action && action.remove) {\n                set = set.remove(set.find(null, null, (spec) => spec.id == action.remove.id));\n            }\n\n            return set;\n        }\n    },\n    props: {\n        decorations(state) {\n            return this.getState(state);\n        }\n    }\n});\n","import { Plugin, PluginKey } from 'prosemirror-state';\nimport { ComponentRef, Injector, ViewContainerRef } from '@angular/core';\nimport { Extension } from '@tiptap/core';\nimport { DotImageService } from './services/dot-image/dot-image.service';\nimport { EditorView } from 'prosemirror-view';\nimport { LoaderComponent, MessageType } from './components/loader/loader.component';\nimport { PlaceholderPlugin } from '../plugins/placeholder.plugin';\nimport { take } from 'rxjs/operators';\nimport { DotCMSContentlet } from '@dotcms/dotcms-models';\nimport { IMAGE_BLOCK_NAME } from './blocks/image-block/image-block.extention';\n\nexport const ImageUpload = (injector: Injector, viewContainerRef: ViewContainerRef) => {\n    return Extension.create({\n        name: 'imageUpload',\n\n        addProseMirrorPlugins() {\n            const dotImageService = injector.get(DotImageService);\n            const editor = this.editor;\n            function areImageFiles(event: ClipboardEvent | DragEvent): boolean {\n                let files: FileList;\n                if (event.type === 'drop') {\n                    files = (event as DragEvent).dataTransfer.files;\n                } else {\n                    //paste\n                    files = (event as ClipboardEvent).clipboardData.files;\n                }\n\n                if (files.length > 0) {\n                    for (let i = 0; i < files.length; i++) {\n                        if (!files[i].type.startsWith('image/')) {\n                            return false;\n                        }\n                    }\n                }\n\n                return !!files.length;\n            }\n\n            function isImageBlockAllowed(): boolean {\n                const allowedBlocks: string[] = editor.storage.dotConfig.allowedBlocks;\n\n                return allowedBlocks.length > 1 ? allowedBlocks.includes(IMAGE_BLOCK_NAME) : true;\n            }\n\n            function setPlaceHolder(view: EditorView, position: number, id: string) {\n                const loadingBlock: ComponentRef<LoaderComponent> =\n                    viewContainerRef.createComponent(LoaderComponent);\n                const tr = view.state.tr;\n                loadingBlock.instance.data = {\n                    message: 'Uploading...',\n                    type: MessageType.INFO\n                };\n                loadingBlock.changeDetectorRef.detectChanges();\n\n                tr.setMeta(PlaceholderPlugin, {\n                    add: {\n                        id: id,\n                        pos: position,\n                        element: loadingBlock.location.nativeElement\n                    }\n                });\n\n                view.dispatch(tr);\n            }\n\n            function uploadImages(view: EditorView, files: File[], position: number) {\n                const placeHolderName = files[0].name;\n                setPlaceHolder(view, position, placeHolderName);\n                dotImageService\n                    .publishContent(files)\n                    .pipe(take(1))\n                    .subscribe(\n                        (dotAssets: DotCMSContentlet[]) => {\n                            const data = dotAssets[0][Object.keys(dotAssets[0])[0]];\n                            const node = {\n                                attrs: {\n                                    data\n                                },\n                                type: 'dotImage'\n                            };\n                            editor.commands.insertContentAt(position, node);\n                        },\n                        (error) => alert(error.message),\n                        () => removePlaceHolder(placeHolderName)\n                    );\n            }\n\n            function removePlaceHolder(id: string) {\n                const { view } = editor;\n                const { state } = view;\n                view.dispatch(\n                    state.tr.setMeta(PlaceholderPlugin, {\n                        remove: { id }\n                    })\n                );\n            }\n\n            /**\n             * Get position from cursor current position when pasting an image\n             *\n             * @param {EditorView} view\n             * @return {*}  {{ from: number; to: number }}\n             */\n            function getPositionFromCursor(view: EditorView): { from: number; to: number } {\n                const { state } = view;\n                const { selection } = state;\n                const { ranges } = selection;\n                const from = Math.min(...ranges.map((range) => range.$from.pos));\n                const to = Math.max(...ranges.map((range) => range.$to.pos));\n\n                return { from, to };\n            }\n\n            return [\n                PlaceholderPlugin,\n                new Plugin({\n                    key: new PluginKey('imageUpload'),\n                    props: {\n                        handleDOMEvents: {\n                            paste(view, event: ClipboardEvent) {\n                                if (isImageBlockAllowed() && areImageFiles(event)) {\n                                    if (event.clipboardData.files.length !== 1) {\n                                        alert('Can paste just one image at a time');\n\n                                        return false;\n                                    }\n\n                                    const { from } = getPositionFromCursor(view);\n                                    const files = Array.from(event.clipboardData.files);\n                                    uploadImages(view, files, from);\n                                }\n\n                                return false;\n                            },\n\n                            drop(view, event: DragEvent) {\n                                if (isImageBlockAllowed() && areImageFiles(event)) {\n                                    event.preventDefault();\n                                    if (event.dataTransfer.files.length !== 1) {\n                                        alert('Can drop just one image at a time');\n\n                                        return false;\n                                    }\n\n                                    const { pos: position } = view.posAtCoords({\n                                        left: event.clientX,\n                                        top: event.clientY\n                                    });\n\n                                    const files = Array.from(event.dataTransfer.files);\n                                    uploadImages(view, files, position);\n                                }\n\n                                return false;\n                            }\n                        }\n                    }\n                })\n            ];\n        }\n    });\n};\n","import { Extension } from '@tiptap/core';\nimport { NodeSelection, Plugin, PluginKey } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { ViewContainerRef } from '@angular/core';\nimport { DragHandlerComponent } from './components/drag-handler/drag-handler.component';\nexport const DragHandler = (viewContainerRef: ViewContainerRef) => {\n    return Extension.create({\n        name: 'dragHandler',\n\n        addProseMirrorPlugins() {\n            let nodeToBeDragged = null;\n            const HANDLER_LEFT_OFFSET = 25;\n            const HANDLER_GAP = 50;\n            const dragHandler =\n                viewContainerRef.createComponent(DragHandlerComponent).location.nativeElement;\n\n            function getPositon(container, node) {\n                const top =\n                    node.getBoundingClientRect().top - container.getBoundingClientRect().top;\n                const left =\n                    node.getBoundingClientRect().left - container.getBoundingClientRect().left;\n\n                return { top, left };\n            }\n\n            function removeNode(node) {\n                if (node && node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            }\n\n            function blockPosAtCoords(coords, view) {\n                const pos = view.posAtCoords(coords);\n                if (pos) {\n                    const node = getDirectChild(view.nodeDOM(pos.inside));\n                    if (node && node.nodeType === 1) {\n                        const desc = view.docView.nearestDesc(node, true);\n                        if (!(!desc || desc === view.docView)) {\n                            return desc.posBefore;\n                        }\n                    }\n                }\n\n                return null;\n            }\n\n            function dragStart(e, view: EditorView) {\n                if (!e.dataTransfer) return;\n                const coords = { left: e.clientX + HANDLER_GAP, top: e.clientY };\n                const pos = blockPosAtCoords(coords, view);\n                if (pos != null) {\n                    view.dispatch(\n                        view.state.tr.setSelection(NodeSelection.create(view.state.doc, pos))\n                    );\n                    const slice = view.state.selection.content();\n                    e.dataTransfer.clearData();\n                    e.dataTransfer.setDragImage(nodeToBeDragged, 10, 10);\n                    view.dragging = { slice, move: true };\n                }\n            }\n\n            // Get the direct child of the Editor. To cover cases when the user is hovering nested nodes.\n            function getDirectChild(node) {\n                while (node && node.parentNode) {\n                    if (\n                        node.classList?.contains('ProseMirror') ||\n                        node.parentNode.classList?.contains('ProseMirror')\n                    ) {\n                        break;\n                    }\n\n                    node = node.parentNode;\n                }\n\n                return node;\n            }\n\n            // Check if node has content and is not an empty <p>. To show the handler.\n            function nodeHasContent(view: EditorView, positon: number): boolean {\n                const node = view.nodeDOM(positon);\n\n                return (\n                    !!node?.hasChildNodes() &&\n                    !(node.childNodes.length === 1 && node.childNodes[0].nodeName == 'BR')\n                );\n            }\n\n            function bindEventsToDragHandler(editorView: EditorView) {\n                dragHandler.setAttribute('draggable', 'true');\n                dragHandler.addEventListener('dragstart', (e) => dragStart(e, editorView));\n                dragHandler.classList.remove('visible');\n                editorView.dom.parentElement.appendChild(dragHandler);\n            }\n\n            function hanlderScroll() {\n                dragHandler.classList.remove('visible');\n            }\n\n            function canDragNode(node): boolean {\n                return (\n                    node &&\n                    !node.classList?.contains('ProseMirror') && // is not root node.\n                    !node.innerText.startsWith('/') // The suggestion is not open.\n                );\n            }\n\n            return [\n                new Plugin({\n                    key: new PluginKey('dragHandler'),\n                    view: (editorView) => {\n                        // Called before the browser performs the next repaint\n                        requestAnimationFrame(() => bindEventsToDragHandler(editorView));\n                        // We need to also react to page scrolling.\n                        document.body.addEventListener('scroll', hanlderScroll, true);\n\n                        return {\n                            destroy() {\n                                removeNode(dragHandler);\n                                document.body.removeEventListener('scroll', hanlderScroll, true);\n                            }\n                        };\n                    },\n                    props: {\n                        handleDOMEvents: {\n                            drop() {\n                                setTimeout(() => {\n                                    const node = document.querySelector(\n                                        '.ProseMirror-hideselection'\n                                    );\n                                    if (node) {\n                                        node.classList.remove('ProseMirror-hideselection');\n                                    }\n\n                                    dragHandler.classList.remove('visible');\n                                });\n\n                                return false;\n                            },\n                            mousemove(view, event: MouseEvent) {\n                                const coords = {\n                                    left: event.clientX + HANDLER_GAP,\n                                    top: event.clientY\n                                };\n                                const position = view.posAtCoords(coords);\n                                if (position && nodeHasContent(view, position.inside)) {\n                                    nodeToBeDragged = getDirectChild(view.nodeDOM(position.inside));\n                                    if (canDragNode(nodeToBeDragged)) {\n                                        const { top, left } = getPositon(\n                                            view.dom.parentElement,\n                                            nodeToBeDragged\n                                        );\n\n                                        dragHandler.style.left = left - HANDLER_LEFT_OFFSET + 'px';\n                                        dragHandler.style.top = top < 0 ? 0 : top + 'px';\n                                        dragHandler.classList.add('visible');\n                                    } else {\n                                        dragHandler.classList.remove('visible');\n                                    }\n                                } else {\n                                    nodeToBeDragged = null;\n                                    dragHandler.classList.remove('visible');\n                                }\n\n                                return false;\n                            }\n                        }\n                    }\n                })\n            ];\n        }\n    });\n};\n","import { EditorView } from 'prosemirror-view';\nimport { isNodeSelection, posToDOMRect } from '@tiptap/core';\nimport { EditorState, Plugin, PluginKey } from 'prosemirror-state';\nimport { BubbleMenuView } from '@tiptap/extension-bubble-menu';\nimport tippy, { Instance } from 'tippy.js';\n\n// Utils\n// Model\nimport {\n    BubbleMenuComponentProps,\n    BubbleMenuItem,\n    CustomNodeTypes,\n    DotBubbleMenuPluginProps,\n    DotBubbleMenuViewProps,\n    getNodePosition,\n    NodeTypes,\n    suggestionOptions\n} from '@dotcms/block-editor';\nimport { ComponentRef } from '@angular/core';\nimport { SuggestionsComponent } from '../extensions/components/suggestions/suggestions.component';\nimport {\n    bubbleMenuImageItems,\n    bubbleMenuItems,\n    isListNode,\n    popperModifiers\n} from '../utils/bubble-menu.utils';\nimport { findParentNode } from '../utils/prosemirror.utils';\nimport { LINK_FORM_PLUGIN_KEY } from '../extensions/bubble-link-form.extension';\n\nexport const DotBubbleMenuPlugin = (options: DotBubbleMenuPluginProps) => {\n    const component = options.component.instance;\n    const changeTo = options.changeToComponent.instance;\n\n    return new Plugin<DotBubbleMenuPluginProps>({\n        key:\n            typeof options.pluginKey === 'string'\n                ? new PluginKey(options.pluginKey)\n                : options.pluginKey,\n        view: (view) => new DotBubbleMenuPluginView({ view, ...options }),\n        props: {\n            /**\n             * Catch and handle the keydown in the plugin\n             *\n             * @param {EditorView} view\n             * @param {KeyboardEvent} event\n             * @return {*}\n             */\n            handleKeyDown(view: EditorView, event: KeyboardEvent) {\n                const { key } = event;\n                if (changeTo.isOpen) {\n                    if (key === 'Escape') {\n                        component.toggleChangeTo.emit();\n\n                        return true;\n                    }\n\n                    if (key === 'Enter') {\n                        changeTo.execCommand();\n\n                        return true;\n                    }\n\n                    if (key === 'ArrowDown' || key === 'ArrowUp') {\n                        changeTo.updateSelection(event);\n\n                        return true;\n                    }\n                }\n\n                return false;\n            }\n        }\n    });\n};\n\nexport class DotBubbleMenuPluginView extends BubbleMenuView {\n    component: ComponentRef<BubbleMenuComponentProps>;\n    changeTo: ComponentRef<SuggestionsComponent>;\n    changeToElement: HTMLElement;\n    tippyChangeTo: Instance | undefined;\n\n    private shouldShowProp = false;\n\n    private selectionRange;\n    private selectionNodesCount;\n    private selectionNode;\n\n    /* @Overrrider */\n    constructor(props: DotBubbleMenuViewProps) {\n        // Inherit the parent class\n        super(props);\n\n        const { component, changeToComponent } = props;\n\n        // New Properties\n        this.component = component;\n        this.changeTo = changeToComponent;\n        this.changeToElement = this.changeTo.location.nativeElement;\n\n        // Subscriptions\n        this.component.instance.command.subscribe(this.exeCommand.bind(this));\n        this.component.instance.toggleChangeTo.subscribe(this.toggleChangeTo.bind(this));\n\n        // Load ChangeTo Options\n        this.changeTo.instance.items = this.setChangeToOptions();\n        this.changeTo.instance.title = 'Change To';\n        this.changeToElement.remove();\n        this.changeTo.changeDetectorRef.detectChanges();\n\n        // We need to also react to page scrolling.\n        document.body.addEventListener('scroll', this.hanlderScroll.bind(this), true);\n        document.body.addEventListener('mouseup', this.showMenu.bind(this), true);\n        document.body.addEventListener('keyup', this.showMenu.bind(this), true);\n\n        this.editor.off('blur', this.blurHandler);\n    }\n\n    showMenu() {\n        if (this.shouldShowProp) {\n            this.tippyChangeTo?.setProps({\n                getReferenceClientRect: () => this.tippy?.popper.getBoundingClientRect()\n            });\n            this.show();\n        }\n    }\n\n    /* @Overrrider */\n    update(view: EditorView, oldState?: EditorState) {\n        const { state, composing } = view;\n        const { doc, selection } = state;\n\n        const isSame = oldState && oldState.doc.eq(doc) && oldState.selection.eq(selection);\n\n        if (composing || isSame) {\n            return;\n        }\n\n        this.createTooltip();\n        this.createChangeToTooltip();\n\n        // support for CellSelections\n        const { ranges } = selection;\n        this.selectionRange = ranges[0];\n        this.selectionNodesCount = 0;\n\n        doc.nodesBetween(this.selectionRange.$from.pos, this.selectionRange.$to.pos, (node) => {\n            if (node.isBlock) {\n                this.selectionNodesCount++;\n            }\n        });\n\n        const from = Math.min(...ranges.map((range) => range.$from.pos));\n        const to = Math.max(...ranges.map((range) => range.$to.pos));\n\n        this.shouldShowProp = this.shouldShow?.({\n            editor: this.editor,\n            view,\n            state,\n            oldState,\n            from,\n            to\n        });\n\n        if (!this.shouldShowProp) {\n            this.hide();\n            this.tippyChangeTo?.hide();\n\n            return;\n        }\n\n        this.tippy?.setProps({\n            getReferenceClientRect: () => {\n                if (isNodeSelection(selection)) {\n                    const node = view.nodeDOM(from) as HTMLElement;\n\n                    if (node) {\n                        const type = doc.nodeAt(from).type.name;\n\n                        return getNodePosition(node, type);\n                    }\n                }\n\n                return posToDOMRect(view, from, to);\n            }\n        });\n\n        this.updateComponent();\n        this.setMenuItems(doc, from);\n        this.show();\n    }\n\n    /* @Overrrider */\n    destroy() {\n        this.tippy?.destroy();\n        this.tippyChangeTo?.destroy();\n\n        this.element.removeEventListener('mousedown', this.mousedownHandler, { capture: true });\n        this.view.dom.removeEventListener('dragstart', this.dragstartHandler);\n\n        this.component.instance.command.unsubscribe();\n        this.component.instance.toggleChangeTo.unsubscribe();\n\n        this.component.destroy();\n        this.changeTo.destroy();\n\n        document.body.removeEventListener('scroll', this.hanlderScroll.bind(this), true);\n        document.body.removeEventListener('mouseup', this.showMenu.bind(this), true);\n        document.body.removeEventListener('keyup', this.showMenu.bind(this), true);\n    }\n\n    /* Update Component */\n    updateComponent() {\n        const { items } = this.component.instance;\n        const aligment: string[] = ['left', 'center', 'right'];\n        const activeMarks = this.setActiveMarks(aligment);\n        this.setSelectedNodeItem();\n        this.component.instance.items = this.updateActiveItems(items, activeMarks);\n        this.component.changeDetectorRef.detectChanges();\n    }\n\n    updateActiveItems = (items: BubbleMenuItem[] = [], activeMarks: string[]): BubbleMenuItem[] => {\n        return items.map((item) => {\n            item.active = activeMarks.includes(item.markAction);\n\n            return item;\n        });\n    };\n\n    enabledMarks = (): string[] => {\n        return [...Object.keys(this.editor.schema.marks), ...Object.keys(this.editor.schema.nodes)];\n    };\n\n    setActiveMarks = (aligment = []): string[] => {\n        return [\n            ...this.enabledMarks().filter((mark) => this.editor.isActive(mark)),\n            ...aligment.filter((alignment) => this.editor.isActive({ textAlign: alignment }))\n        ];\n    };\n\n    setMenuItems(doc, from) {\n        const node = doc.nodeAt(from);\n        const isDotImage = node?.type.name == 'dotImage';\n\n        this.selectionNode = node;\n\n        this.component.instance.items = isDotImage ? bubbleMenuImageItems : bubbleMenuItems;\n    }\n\n    /* Run commands */\n    exeCommand(item: BubbleMenuItem) {\n        const { markAction: action, active } = item;\n        switch (action) {\n            case 'bold':\n                this.editor.commands.toggleBold();\n                break;\n\n            case 'italic':\n                this.editor.commands.toggleItalic();\n                break;\n\n            case 'strike':\n                this.editor.commands.toggleStrike();\n                break;\n\n            case 'underline':\n                this.editor.commands.toggleUnderline();\n                break;\n\n            case 'left':\n                this.toggleTextAlign(action, active);\n                break;\n\n            case 'center':\n                this.toggleTextAlign(action, active);\n                break;\n\n            case 'right':\n                this.toggleTextAlign(action, active);\n                break;\n\n            case 'bulletList':\n                this.editor.commands.toggleBulletList();\n                break;\n\n            case 'orderedList':\n                this.editor.commands.toggleOrderedList();\n                break;\n\n            case 'indent':\n                if (isListNode(this.editor)) {\n                    this.editor.commands.sinkListItem('listItem');\n                }\n\n                break;\n\n            case 'outdent':\n                if (isListNode(this.editor)) {\n                    this.editor.commands.liftListItem('listItem');\n                }\n\n                break;\n\n            case 'link':\n                // eslint-disable-next-line\n                const { isOpen } = LINK_FORM_PLUGIN_KEY.getState(this.editor.state);\n                isOpen\n                    ? this.editor.view.focus()\n                    : this.editor.commands.openLinkForm({ openOnClick: false });\n                break;\n\n            case 'deleteNode':\n                if (this.selectionNodesCount > 1) {\n                    this.deleteByRange();\n                } else {\n                    this.deleteByNode();\n                }\n\n                break;\n\n            case 'clearAll':\n                this.editor.commands.unsetAllMarks();\n                this.editor.commands.clearNodes();\n                break;\n        }\n    }\n\n    toggleTextAlign(alignment, active) {\n        if (active) {\n            this.editor.commands.unsetTextAlign();\n        } else {\n            this.editor.commands.setTextAlign(alignment);\n        }\n    }\n\n    setChangeToOptions() {\n        const allowedBlocks: string[] = this.editor.storage.dotConfig.allowedBlocks;\n\n        const changeToOptions =\n            allowedBlocks.length > 1\n                ? suggestionOptions.filter((item) => allowedBlocks.includes(item.id))\n                : suggestionOptions.filter((item) => item.id != 'horizontalLine');\n        const changeTopCommands = {\n            heading1: () => {\n                this.editor.chain().focus().clearNodes().setHeading({ level: 1 }).run();\n            },\n            heading2: () => {\n                this.editor.chain().focus().clearNodes().setHeading({ level: 2 }).run();\n            },\n            heading3: () => {\n                this.editor.chain().focus().clearNodes().setHeading({ level: 3 }).run();\n            },\n            paragraph: () => {\n                this.editor.chain().focus().clearNodes().setParagraph().run();\n            },\n            orderedList: () => {\n                this.editor.chain().focus().clearNodes().toggleOrderedList().run();\n            },\n            bulletList: () => {\n                this.editor.chain().focus().clearNodes().toggleBulletList().run();\n            },\n            blockquote: () => {\n                this.editor.chain().focus().clearNodes().toggleBlockquote().run();\n            },\n            codeBlock: () => {\n                this.editor.chain().focus().clearNodes().toggleCodeBlock().run();\n            }\n        };\n\n        changeToOptions.forEach((option) => {\n            option.isActive = () => {\n                return option.id.includes('heading')\n                    ? this.editor.isActive('heading', option.attributes)\n                    : this.editor.isActive(option.id);\n            };\n\n            option.command = () => {\n                changeTopCommands[option.id]();\n                this.tippyChangeTo.hide();\n                this.setSelectedNodeItem();\n            };\n        });\n\n        return changeToOptions;\n    }\n\n    setSelectedNodeItem() {\n        const items = this.changeTo.instance.items;\n        const activeMarks = items.filter((option) => option?.isActive());\n        // Needed because in some scenarios, paragraph and other mark (ex: blockquote)\n        // can be active at the same time\n        const activeNode = activeMarks.length > 1 ? activeMarks[1] : activeMarks[0];\n        // Set Active on Change To List\n        this.changeTo.instance.updateActiveItem(items.findIndex((item) => item === activeNode));\n        // Set button label on Bubble Menu\n        this.component.instance.selected = activeNode?.label || '';\n    }\n\n    // Tippy Change To\n    createChangeToTooltip() {\n        const { element: editorElement } = this.editor.options;\n\n        if (this.tippyChangeTo) {\n            return;\n        }\n\n        this.tippyChangeTo = tippy(editorElement, {\n            ...this.tippyOptions,\n            appendTo: document.body,\n            getReferenceClientRect: null,\n            content: this.changeToElement,\n            placement: 'bottom-start',\n            duration: 0,\n            hideOnClick: false,\n            popperOptions: {\n                modifiers: popperModifiers\n            },\n            onHide: () => {\n                this.changeTo.instance.isOpen = false;\n            },\n            onShow: () => {\n                this.changeTo.instance.isOpen = true;\n                this.setSelectedNodeItem();\n            }\n        });\n    }\n\n    toggleChangeTo() {\n        if (this.tippyChangeTo.state.isVisible) {\n            this.tippyChangeTo?.hide();\n        } else {\n            this.tippyChangeTo?.show();\n        }\n    }\n\n    hanlderScroll() {\n        if (this.tippyChangeTo?.state.isVisible) {\n            this.tippyChangeTo?.hide();\n        }\n    }\n\n    private deleteByNode() {\n        if (CustomNodeTypes.includes(this.selectionNode.type.name)) {\n            this.deleteSelectedCustomNodeType();\n        } else {\n            this.deleteSelectionNode();\n        }\n    }\n\n    private deleteByRange() {\n        const from = this.selectionRange.$from.pos;\n        const to = this.selectionRange.$to.pos + 1;\n        this.editor.chain().deleteRange({ from, to }).blur().run();\n    }\n\n    private deleteSelectedCustomNodeType() {\n        const from = this.selectionRange.$from.pos;\n        const to = from + 1;\n\n        // TODO: Try to make the `deleteNode` command works with custom nodes.\n        this.editor.chain().deleteRange({ from, to }).blur().run();\n    }\n\n    private deleteSelectionNode() {\n        const selectionParentNode = findParentNode(this.selectionRange.$from);\n        const nodeSelectionNodeType: NodeTypes = selectionParentNode.type.name;\n\n        const closestOrderedOrBulletNode = findParentNode(this.selectionRange.$from, [\n            NodeTypes.ORDERED_LIST,\n            NodeTypes.BULLET_LIST\n        ]);\n\n        const { childCount } = closestOrderedOrBulletNode;\n\n        switch (nodeSelectionNodeType) {\n            case NodeTypes.ORDERED_LIST:\n\n            // eslint-disable-next-line no-fallthrough\n            case NodeTypes.BULLET_LIST:\n                if (childCount > 1) {\n                    //delete only the list item selected\n                    this.editor.chain().deleteNode(NodeTypes.LIST_ITEM).blur().run();\n                } else {\n                    // delete the order/bullet node\n                    this.editor.chain().deleteNode(closestOrderedOrBulletNode.type).blur().run();\n                }\n\n                break;\n\n            default:\n                this.editor.chain().deleteNode(selectionParentNode.type).blur().run();\n                break;\n        }\n    }\n}\n","import { ViewContainerRef } from '@angular/core';\nimport BubbleMenu, { BubbleMenuOptions } from '@tiptap/extension-bubble-menu';\nimport { Props } from 'tippy.js';\nimport { DotBubbleMenuPlugin } from '../plugins/dot-bubble-menu.plugin';\nimport { shouldShowBubbleMenu } from '../utils/bubble-menu.utils';\nimport { BubbleMenuComponent, SuggestionsComponent } from '@dotcms/block-editor';\n\nconst defaultTippyOptions: Partial<Props> = {\n    duration: 500,\n    maxWidth: 'none',\n    placement: 'top-start',\n    trigger: 'manual',\n    interactive: true\n};\n\nexport function DotBubbleMenuExtension(viewContainerRef: ViewContainerRef) {\n    // Create Instance Component\n    const bubbleMenuComponent = viewContainerRef.createComponent(BubbleMenuComponent);\n    const bubbleMenuElement = bubbleMenuComponent.location.nativeElement;\n\n    // Create ChangeTo Component Instance\n    const changeToComponent = viewContainerRef.createComponent(SuggestionsComponent);\n    const changeToElement = changeToComponent.location.nativeElement;\n\n    return BubbleMenu.extend<BubbleMenuOptions>({\n        // Default Options\n        addOptions(): BubbleMenuOptions {\n            return {\n                element: null,\n                tippyOptions: defaultTippyOptions,\n                pluginKey: 'bubbleMenu',\n                shouldShow: shouldShowBubbleMenu\n            };\n        },\n\n        addProseMirrorPlugins() {\n            if (!bubbleMenuElement) {\n                return [];\n            }\n\n            return [\n                DotBubbleMenuPlugin({\n                    component: bubbleMenuComponent,\n                    changeToComponent: changeToComponent,\n                    pluginKey: this.options.pluginKey,\n                    editor: this.editor,\n                    element: bubbleMenuElement,\n                    changeToElement: changeToElement,\n                    tippyOptions: this.options.tippyOptions,\n                    shouldShow: this.options.shouldShow\n                })\n            ];\n        }\n    });\n}\n","import { Component, Injector, Input, OnInit, ViewContainerRef } from '@angular/core';\nimport { AnyExtension, Editor } from '@tiptap/core';\nimport { HeadingOptions, Level } from '@tiptap/extension-heading';\nimport StarterKit, { StarterKitOptions } from '@tiptap/starter-kit';\nimport Placeholder from '@tiptap/extension-placeholder';\n\nimport {\n    ActionsMenu,\n    BubbleLinkFormExtension,\n    ContentletBlock,\n    DEFAULT_LANG_ID,\n    DotBubbleMenuExtension,\n    DragHandler,\n    ImageBlock,\n    ImageUpload,\n    DotConfigExtension\n} from '@dotcms/block-editor';\n\n// Marks Extensions\nimport { Highlight } from '@tiptap/extension-highlight';\nimport { Link } from '@tiptap/extension-link';\nimport { TextAlign } from '@tiptap/extension-text-align';\nimport { Underline } from '@tiptap/extension-underline';\n\nfunction toTitleCase(str) {\n    return str.replace(/\\p{L}+('\\p{L}+)?/gu, function (txt) {\n        return txt.charAt(0).toUpperCase() + txt.slice(1);\n    });\n}\n\n@Component({\n    selector: 'dotcms-block-editor',\n    templateUrl: './dot-block-editor.component.html',\n    styleUrls: ['./dot-block-editor.component.scss']\n})\nexport class DotBlockEditorComponent implements OnInit {\n    @Input() lang = DEFAULT_LANG_ID;\n    @Input() allowedContentTypes = '';\n    @Input() customStyles = '';\n\n    @Input() set allowedBlocks(blocks: string) {\n        this._allowedBlocks = ['paragraph', ...blocks.replace(/ /g, '').split(',').filter(Boolean)];\n    }\n\n    _allowedBlocks = [];\n    editor: Editor;\n\n    value = ''; // can be HTML or JSON, see https://www.tiptap.dev/api/editor#content\n\n    constructor(private injector: Injector, public viewContainerRef: ViewContainerRef) {}\n\n    ngOnInit() {\n        this.editor = new Editor({\n            extensions: this.setEditorExtensions()\n        });\n    }\n\n    private setEditorExtensions(): AnyExtension[] {\n        const defaultExtensions: AnyExtension[] = [\n            DotConfigExtension({\n                lang: this.lang,\n                allowedContentTypes: this.allowedContentTypes,\n                allowedBlocks: this._allowedBlocks\n            }),\n            ActionsMenu(this.viewContainerRef),\n            DragHandler(this.viewContainerRef),\n            ImageUpload(this.injector, this.viewContainerRef),\n            BubbleLinkFormExtension(this.viewContainerRef),\n            DotBubbleMenuExtension(this.viewContainerRef),\n            // Marks Extensions\n            Underline,\n            TextAlign.configure({ types: ['heading', 'paragraph', 'listItem', 'dotImage'] }),\n            Highlight.configure({ HTMLAttributes: { style: 'background: #accef7;' } }),\n            Link.configure({ openOnClick: false }),\n            Placeholder.configure({\n                placeholder: ({ node }) => {\n                    if (node.type.name === 'heading') {\n                        return `${toTitleCase(node.type.name)} ${node.attrs.level}`;\n                    }\n\n                    return 'Type \"/\" for commmands';\n                }\n            })\n        ];\n        const customExtensions: Map<string, AnyExtension> = new Map([\n            ['contentlets', ContentletBlock(this.injector)],\n            ['dotImage', ImageBlock(this.injector)]\n        ]);\n\n        return [\n            ...defaultExtensions,\n            ...(this.allowedBlocks\n                ? [\n                      StarterKit.configure(this.setStarterKitOptions()),\n                      ...this.setCustomExtensions(customExtensions)\n                  ]\n                : [StarterKit, ...customExtensions.values()])\n        ];\n    }\n\n    /**\n     *\n     * Check if the starter kit keys are part of the _allowedBlocks,\n     * ONLY if is not present will add an attribute with false to disable it. ex. {orderedList: false}.\n     * Exception, headings fill the HeadingOptions or false.\n     */\n    private setStarterKitOptions(): Partial<StarterKitOptions> {\n        // These are the keys that meter for the starter kit.\n        const staterKitOptions = [\n            'orderedList',\n            'bulletList',\n            'blockquote',\n            'codeBlock',\n            'horizontalRule'\n        ];\n        const headingOptions: HeadingOptions = { levels: [], HTMLAttributes: {} };\n\n        //Heading types supported by default in the editor.\n        ['heading1', 'heading2', 'heading3', 'heading4', 'heading5', 'heading6'].forEach(\n            (heading) => {\n                if (this._allowedBlocks[heading]) {\n                    headingOptions.levels.push(+heading.slice(-1) as Level);\n                }\n            }\n        );\n\n        return {\n            heading: headingOptions.levels.length ? headingOptions : false,\n            ...staterKitOptions.reduce(\n                (object, item) => ({\n                    ...object,\n                    ...(this._allowedBlocks[item] ? {} : { [item]: false })\n                }),\n                {}\n            )\n        };\n    }\n\n    private setCustomExtensions(customExtensions: Map<string, AnyExtension>): AnyExtension[] {\n        return [\n            ...(this._allowedBlocks['contentlets'] ? [customExtensions['contentlets']] : []),\n            ...(this._allowedBlocks['dotImage'] ? [customExtensions['dotImage']] : [])\n        ];\n    }\n}\n","import { Extension } from '@tiptap/core';\nimport { DotConfigModel } from '../models/dot-config.model';\n\n// Storage configuration in the editor under the name space dotConfig\n// access through editor.storage.dotConfig\nexport const DotConfigExtension = (data: DotConfigModel) => {\n    return Extension.create<unknown, DotConfigModel>({\n        name: 'dotConfig',\n\n        addStorage() {\n            return {\n                ...data\n            };\n        }\n    });\n};\n","import { Node, mergeAttributes, NodeViewRenderer } from '@tiptap/core';\nimport { DOMOutputSpec, ParseRule } from 'prosemirror-model';\nimport { Injector } from '@angular/core';\n\nimport { ContentletBlockComponent } from '../contentlet-block/contentlet-block.component';\nimport { AngularNodeViewRenderer } from '../../../NodeViewRenderer';\n\nexport type ContentletBlockOptions = {\n    HTMLAttributes: Record<string, unknown>;\n};\n\nexport const ContentletBlock = (injector: Injector): Node<ContentletBlockOptions> => {\n    return Node.create({\n        name: 'dotContent',\n        group: 'block',\n        inline: false,\n        draggable: true,\n\n        // ...configuration\n        addAttributes() {\n            return {\n                data: {\n                    default: null,\n                    parseHTML: (element) => ({\n                        data: element.getAttribute('data')\n                    }),\n                    renderHTML: (attributes) => {\n                        return { data: attributes.data };\n                    }\n                }\n            };\n        },\n\n        parseHTML(): ParseRule[] {\n            return [{ tag: 'dotcms-contentlet-block' }];\n        },\n\n        renderHTML({ HTMLAttributes }): DOMOutputSpec {\n            return ['dotcms-contentlet-block', mergeAttributes(HTMLAttributes)];\n        },\n\n        addNodeView(): NodeViewRenderer {\n            return AngularNodeViewRenderer(ContentletBlockComponent, { injector });\n        }\n    });\n};\n","import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { of } from 'rxjs';\n\nimport { ListboxModule } from 'primeng/listbox';\nimport { OrderListModule } from 'primeng/orderlist';\nimport { MenuModule } from 'primeng/menu';\n\nimport { debounceTime, delay } from 'rxjs/operators';\nimport { DotBlockEditorComponent } from './dot-block-editor.component';\nimport { BubbleMenuLinkFormComponent } from '@dotcms/block-editor';\nimport {\n    ActionButtonComponent,\n    ContentletBlockComponent,\n    NgxTiptapModule,\n    SuggestionsComponent,\n    SuggestionsService,\n    ImageBlockComponent,\n    DragHandlerComponent,\n    LoaderComponent,\n    DotImageService,\n    DotLanguageService\n} from '@dotcms/block-editor';\n\nexport default {\n    title: 'Block Editor'\n};\n\nconst contentletsMock = [\n    {\n        name: 'Empty Content',\n        icon: 'hourglass_disabled',\n        url: '/empty/empty-content',\n        path: '/empty/empty-content',\n        title: 'Cras ornare tristique elit.',\n        inode: '1213',\n        image: 'https://images.unsplash.com/photo-1433883669848-fa8a7ce070b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2988&q=80',\n        languageId: 2,\n        modDate: '2021-10-20 14:56:53.052',\n        baseType: 'CONTENT',\n        archived: false,\n        working: true,\n        locked: false,\n        live: true,\n        identifier: 'f1d378c9-b784-45d0-a43c-9790af678f13',\n        titleImage: 'image',\n        hasLiveVersion: true,\n        folder: 'SYSTEM_FOLDER',\n        hasTitleImage: true,\n        __icon__: 'contentIcon',\n        contentTypeIcon: 'file_copy',\n        contentType: 'Blog'\n    },\n    {\n        name: 'Blog',\n        icon: 'article',\n        url: '/blog/Blog',\n        variable: 'blog',\n        title: 'Cras ornare tristique elit.',\n        inode: '1213',\n        image: 'https://images.unsplash.com/photo-1433883669848-fa8a7ce070b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2988&q=80',\n        languageId: 2,\n        modDate: '2021-10-20 14:56:53.052',\n        baseType: 'CONTENT',\n        archived: false,\n        working: true,\n        locked: false,\n        live: true,\n        identifier: 'f1d378c9-b784-45d0-a43c-9790af678f13',\n        titleImage: 'image',\n        hasLiveVersion: true,\n        folder: 'SYSTEM_FOLDER',\n        hasTitleImage: true,\n        __icon__: 'contentIcon',\n        contentTypeIcon: 'file_copy',\n        contentType: 'Blog'\n    },\n    {\n        name: 'Persona',\n        icon: 'face',\n        url: '/persona/persona',\n        path: '/persona/persona',\n        variable: 'persona',\n        title: 'Cras ornare tristique elit.',\n        inode: '1213',\n        image: 'https://images.unsplash.com/photo-1433883669848-fa8a7ce070b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2988&q=80',\n        languageId: 2,\n        modDate: '2021-10-20 14:56:53.052',\n        baseType: 'CONTENT',\n        archived: false,\n        working: true,\n        locked: false,\n        live: true,\n        identifier: 'f1d378c9-b784-45d0-a43c-9790af678f13',\n        titleImage: 'image',\n        hasLiveVersion: true,\n        folder: 'SYSTEM_FOLDER',\n        hasTitleImage: true,\n        __icon__: 'contentIcon',\n        contentTypeIcon: 'file_copy',\n        contentType: 'Blog'\n    },\n    {\n        name: 'News Item',\n        icon: 'mic',\n        url: '/news_item/news-item',\n        path: '/news_item/news-item',\n        variable: 'news_item',\n        title: 'Cras ornare tristique elit.',\n        inode: '1213',\n        image: 'https://images.unsplash.com/photo-1433883669848-fa8a7ce070b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2988&q=80',\n        languageId: 2,\n        modDate: '2021-10-20 14:56:53.052',\n        baseType: 'CONTENT',\n        archived: false,\n        working: true,\n        locked: false,\n        live: true,\n        identifier: 'f1d378c9-b784-45d0-a43c-9790af678f13',\n        titleImage: 'image',\n        hasLiveVersion: true,\n        folder: 'SYSTEM_FOLDER',\n        hasTitleImage: true,\n        __icon__: 'contentIcon',\n        contentTypeIcon: 'file_copy',\n        contentType: 'Blog'\n    },\n    {\n        name: 'Banner',\n        icon: 'view_carousel',\n        url: '/banner/banner',\n        path: '/banner/banner',\n        variable: 'banner',\n        title: 'Cras ornare tristique elit.',\n        inode: '1213',\n        image: 'https://images.unsplash.com/photo-1433883669848-fa8a7ce070b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2988&q=80',\n        languageId: 2,\n        modDate: '2021-10-20 14:56:53.052',\n        baseType: 'CONTENT',\n        archived: false,\n        working: true,\n        locked: false,\n        live: true,\n        identifier: 'f1d378c9-b784-45d0-a43c-9790af678f13',\n        titleImage: 'image',\n        hasLiveVersion: true,\n        folder: 'SYSTEM_FOLDER',\n        hasTitleImage: true,\n        __icon__: 'contentIcon',\n        contentTypeIcon: 'file_copy',\n        contentType: 'Blog'\n    },\n    {\n        name: 'Product in the store',\n        icon: 'inventory_2',\n        url: '/inventory/product-in-the-store',\n        path: '/inventory/product-in-the-store',\n        variable: 'inventory',\n        title: 'Cras ornare tristique elit.',\n        inode: '1213',\n        image: 'https://images.unsplash.com/photo-1433883669848-fa8a7ce070b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2988&q=80',\n        languageId: 2,\n        modDate: '2021-10-20 14:56:53.052',\n        baseType: 'CONTENT',\n        archived: false,\n        working: true,\n        locked: false,\n        live: true,\n        identifier: 'f1d378c9-b784-45d0-a43c-9790af678f13',\n        titleImage: 'image',\n        hasLiveVersion: true,\n        folder: 'SYSTEM_FOLDER',\n        hasTitleImage: true,\n        __icon__: 'contentIcon',\n        contentTypeIcon: 'file_copy',\n        contentType: 'Blog'\n    },\n    {\n        name: 'Reatil information',\n        icon: 'storefront',\n        url: '/retail/reatil-information',\n        path: '/retail/reatil-information',\n        variable: 'retail',\n        title: 'Cras ornare tristique elit.',\n        inode: '1213',\n        image: 'https://images.unsplash.com/photo-1433883669848-fa8a7ce070b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2988&q=80',\n        languageId: 2,\n        modDate: '2021-10-20 14:56:53.052',\n        baseType: 'CONTENT',\n        archived: false,\n        working: true,\n        locked: false,\n        live: true,\n        identifier: 'f1d378c9-b784-45d0-a43c-9790af678f13',\n        titleImage: 'image',\n        hasLiveVersion: true,\n        folder: 'SYSTEM_FOLDER',\n        hasTitleImage: true,\n        __icon__: 'contentIcon',\n        contentTypeIcon: 'file_copy',\n        contentType: 'Blog'\n    }\n];\n\nexport const primary = () => ({\n    moduleMetadata: {\n        imports: [\n            MenuModule,\n            CommonModule,\n            FormsModule,\n            NgxTiptapModule,\n            OrderListModule,\n            ListboxModule,\n            BrowserAnimationsModule\n        ],\n        providers: [\n            {\n                provide: DotImageService,\n                useValue: {\n                    publishContent() {\n                        return of([\n                            {\n                                cd769844de530f7b5d3434b1b5cfdd62: {\n                                    asset: 'https://media.istockphoto.com/vectors/costa-rica-vector-id652225694?s=170667a',\n                                    mimeType: 'image/png',\n                                    name: 'costarica.png'\n                                }\n                            }\n                        ]).pipe(delay(800));\n                    }\n                }\n            },\n            {\n                provide: SuggestionsService,\n                useValue: {\n                    getContentTypes(filter = '') {\n                        return of(\n                            filter\n                                ? contentletsMock.filter((item) =>\n                                      item.name.match(new RegExp(filter, 'i'))\n                                  )\n                                : contentletsMock\n                        );\n                    },\n                    getContentlets(type, filter = '') {\n                        if (type === 'empty') {\n                            return of([]).pipe(delay(800));\n                        }\n\n                        return of(\n                            filter\n                                ? contentletsMock.filter((item) =>\n                                      item.title.match(new RegExp(filter, 'i'))\n                                  )\n                                : contentletsMock\n                        );\n                    },\n                    getContentletsUrlMap({ filter }) {\n                        return of(\n                            contentletsMock.filter((item) =>\n                                item.url.match(new RegExp(filter, 'i'))\n                            )\n                        ).pipe(debounceTime(400));\n                    }\n                }\n            },\n            {\n                provide: DotLanguageService,\n                useValue: {\n                    getLanguages() {\n                        return of({\n                            1: {\n                                country: 'United States',\n                                countryCode: 'US',\n                                defaultLanguage: true,\n                                id: 1,\n                                language: 'English',\n                                languageCode: 'en'\n                            },\n                            2: {\n                                country: 'Espana',\n                                countryCode: 'ES',\n                                defaultLanguage: false,\n                                id: 2,\n                                language: 'Espanol',\n                                languageCode: 'es'\n                            }\n                        });\n                    }\n                }\n            }\n        ],\n        // We need these here because they are dynamically rendered\n        entryComponents: [\n            SuggestionsComponent,\n            ContentletBlockComponent,\n            ActionButtonComponent,\n            DragHandlerComponent,\n            ImageBlockComponent,\n            LoaderComponent,\n            BubbleMenuLinkFormComponent\n        ]\n    },\n    component: DotBlockEditorComponent\n});\n","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable import/no-unresolved */\nimport { addDecorator, addParameters, addLoader, addArgs, addArgTypes, addArgsEnhancer, addArgTypesEnhancer, setGlobalRender } from '/home/runner/work/core/core/core-web/node_modules/@storybook/client-api';\nimport * as config from '/home/runner/work/core/core/core-web/apps/dotcms-block-editor/.storybook/preview.js';\nObject.keys(config).forEach(function (key) {\n  var value = config[key];\n\n  switch (key) {\n    case 'args':\n      {\n        return addArgs(value);\n      }\n\n    case 'argTypes':\n      {\n        return addArgTypes(value);\n      }\n\n    case 'decorators':\n      {\n        return value.forEach(function (decorator) {\n          return addDecorator(decorator, false);\n        });\n      }\n\n    case 'loaders':\n      {\n        return value.forEach(function (loader) {\n          return addLoader(loader, false);\n        });\n      }\n\n    case 'parameters':\n      {\n        return addParameters(_objectSpread({}, value), false);\n      }\n\n    case 'argTypesEnhancers':\n      {\n        return value.forEach(function (enhancer) {\n          return addArgTypesEnhancer(enhancer);\n        });\n      }\n\n    case 'argsEnhancers':\n      {\n        return value.forEach(function (enhancer) {\n          return addArgsEnhancer(enhancer);\n        });\n      }\n\n    case 'render':\n      {\n        return setGlobalRender(value);\n      }\n\n    case 'globals':\n    case 'globalTypes':\n      {\n        var v = {};\n        v[key] = value;\n        return addParameters(v, false);\n      }\n\n    case '__namedExportsOrder':\n    case 'decorateStory':\n    case 'renderToDOM':\n      {\n        return null; // This key is not handled directly in v6 mode.\n      }\n\n    default:\n      {\n        // eslint-disable-next-line prefer-template\n        return console.log(key + ' was not supported :( !');\n      }\n  }\n});","\n(function(){if(\"undefined\"!==typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var a=HTMLElement;window.HTMLElement=function(){return Reflect.construct(a,[],this.constructor)};HTMLElement.prototype=a.prototype;HTMLElement.prototype.constructor=HTMLElement;Object.setPrototypeOf(HTMLElement,a)}})();\nexport * from '../dist/esm/polyfills/index.js';\nexport * from '../dist/esm/loader.js';\n","import { p as promiseResolve, b as bootstrapLazy } from './index-27076004.js';\n\n/*\n Stencil Client Patch Esm v2.17.1 | MIT Licensed | https://stenciljs.com\n */\nconst patchEsm = () => {\n    return promiseResolve();\n};\n\nconst defineCustomElements = (win, options) => {\n  if (typeof window === 'undefined') return Promise.resolve();\n  return patchEsm().then(() => {\n  return bootstrapLazy([[\"dot-card-view\",[[1,\"dot-card-view\",{\"items\":[16],\"value\":[1537],\"getValue\":[64],\"clearValue\":[64]}]]],[\"dot-label\",[[4,\"dot-label\",{\"name\":[513],\"label\":[513],\"required\":[516]}]]],[\"dot-binary-file\",[[0,\"dot-binary-file\",{\"name\":[513],\"label\":[513],\"placeholder\":[1537],\"hint\":[513],\"required\":[516],\"requiredMessage\":[1,\"required-message\"],\"validationMessage\":[1,\"validation-message\"],\"URLValidationMessage\":[1,\"u-r-l-validation-message\"],\"fileSizeValidationMessage\":[1,\"file-size-validation-message\"],\"disabled\":[516],\"accept\":[1537],\"maxFileLength\":[1537,\"max-file-length\"],\"buttonLabel\":[513,\"button-label\"],\"errorMessage\":[1537,\"error-message\"],\"previewImageName\":[1537,\"preview-image-name\"],\"previewImageUrl\":[1537,\"preview-image-url\"],\"status\":[32],\"reset\":[64],\"clearValue\":[64]},[[0,\"fileChange\",\"fileChangeHandler\"],[0,\"dragover\",\"HandleDragover\"],[0,\"dragleave\",\"HandleDragleave\"],[0,\"drop\",\"HandleDrop\"],[0,\"delete\",\"handleDelete\"]]]]],[\"dot-form\",[[0,\"dot-form\",{\"fieldsToShow\":[1,\"fields-to-show\"],\"resetLabel\":[513,\"reset-label\"],\"submitLabel\":[513,\"submit-label\"],\"layout\":[16],\"variable\":[513],\"status\":[32],\"errorMessage\":[32],\"uploadFileInProgress\":[32]},[[0,\"dotValueChange\",\"onValueChange\"],[0,\"dotStatusChange\",\"onStatusChange\"]]]]],[\"dot-key-value\",[[0,\"dot-key-value\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"required\":[516],\"requiredMessage\":[513,\"required-message\"],\"duplicatedKeyMessage\":[513,\"duplicated-key-message\"],\"disabled\":[516],\"uniqueKeys\":[516,\"unique-keys\"],\"formKeyPlaceholder\":[513,\"form-key-placeholder\"],\"formValuePlaceholder\":[513,\"form-value-placeholder\"],\"formKeyLabel\":[513,\"form-key-label\"],\"formValueLabel\":[513,\"form-value-label\"],\"formAddButtonLabel\":[513,\"form-add-button-label\"],\"listDeleteLabel\":[513,\"list-delete-label\"],\"whiteListEmptyOptionLabel\":[513,\"white-list-empty-option-label\"],\"whiteList\":[513,\"white-list\"],\"errorExistingKey\":[32],\"status\":[32],\"items\":[32],\"reset\":[64]},[[0,\"delete\",\"deleteItemHandler\"],[0,\"reorder\",\"reorderItemsHandler\"],[0,\"add\",\"addItemHandler\"],[0,\"keyChanged\",\"keyChangedHandler\"]]]]],[\"dot-tags\",[[0,\"dot-tags\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"placeholder\":[513],\"required\":[516],\"requiredMessage\":[513,\"required-message\"],\"disabled\":[516],\"threshold\":[514],\"debounce\":[514],\"data\":[16],\"status\":[32],\"reset\":[64]}]]],[\"dot-date\",[[0,\"dot-date\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"required\":[1540],\"requiredMessage\":[513,\"required-message\"],\"validationMessage\":[513,\"validation-message\"],\"disabled\":[1540],\"min\":[1537],\"max\":[1537],\"step\":[1537],\"classNames\":[32],\"errorMessageElement\":[32],\"reset\":[64]},[[0,\"_dotValueChange\",\"emitValueChange\"],[0,\"_dotStatusChange\",\"emitStatusChange\"]]]]],[\"dot-date-time\",[[0,\"dot-date-time\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"required\":[516],\"requiredMessage\":[513,\"required-message\"],\"validationMessage\":[513,\"validation-message\"],\"disabled\":[516],\"min\":[1537],\"max\":[1537],\"step\":[1537],\"dateLabel\":[513,\"date-label\"],\"timeLabel\":[513,\"time-label\"],\"classNames\":[32],\"errorMessageElement\":[32],\"reset\":[64]},[[0,\"_dotValueChange\",\"emitValueChange\"],[0,\"_dotStatusChange\",\"emitStatusChange\"]]]]],[\"dot-time\",[[0,\"dot-time\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"required\":[516],\"requiredMessage\":[513,\"required-message\"],\"validationMessage\":[513,\"validation-message\"],\"disabled\":[516],\"min\":[1537],\"max\":[1537],\"step\":[513],\"classNames\":[32],\"errorMessageElement\":[32],\"reset\":[64]},[[0,\"_dotValueChange\",\"emitValueChange\"],[0,\"_dotStatusChange\",\"emitStatusChange\"]]]]],[\"dot-asset-drop-zone\",[[4,\"dot-asset-drop-zone\",{\"dotAssetsURL\":[1,\"dot-assets-u-r-l\"],\"maxFileSize\":[1,\"max-file-size\"],\"folder\":[1],\"dropFilesText\":[1,\"drop-files-text\"],\"uploadFileText\":[1,\"upload-file-text\"],\"dialogLabels\":[16],\"displayIndicator\":[4,\"display-indicator\"],\"createAssetsText\":[1,\"create-assets-text\"],\"multiMaxSizeErrorLabel\":[1,\"multi-max-size-error-label\"],\"singeMaxSizeErrorLabel\":[1,\"singe-max-size-error-label\"],\"uploadErrorLabel\":[1,\"upload-error-label\"],\"acceptTypes\":[16],\"typesErrorLabel\":[1,\"types-error-label\"],\"customUploadFiles\":[16],\"dropState\":[32],\"progressIndicator\":[32],\"progressBarText\":[32]}]]],[\"dot-checkbox\",[[0,\"dot-checkbox\",{\"name\":[513],\"label\":[513],\"hint\":[513],\"options\":[513],\"required\":[516],\"disabled\":[1540],\"requiredMessage\":[513,\"required-message\"],\"value\":[1537],\"_options\":[32],\"status\":[32],\"reset\":[64]}]]],[\"dot-data-view-button\",[[0,\"dot-data-view-button\",{\"value\":[1]}]]],[\"dot-date-range\",[[0,\"dot-date-range\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"max\":[513],\"min\":[513],\"required\":[516],\"requiredMessage\":[513,\"required-message\"],\"disabled\":[516],\"displayFormat\":[513,\"display-format\"],\"presets\":[1040],\"presetLabel\":[513,\"preset-label\"],\"status\":[32],\"reset\":[64]}]]],[\"dot-multi-select\",[[0,\"dot-multi-select\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"options\":[513],\"required\":[516],\"requiredMessage\":[513,\"required-message\"],\"disabled\":[516],\"size\":[513],\"_options\":[32],\"status\":[32],\"reset\":[64]}]]],[\"dot-radio\",[[0,\"dot-radio\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"required\":[516],\"disabled\":[1540],\"requiredMessage\":[513,\"required-message\"],\"options\":[513],\"_options\":[32],\"status\":[32],\"reset\":[64]}]]],[\"dot-select\",[[0,\"dot-select\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"options\":[513],\"required\":[516],\"requiredMessage\":[513,\"required-message\"],\"disabled\":[516],\"_options\":[32],\"status\":[32],\"reset\":[64]}]]],[\"dot-textarea\",[[0,\"dot-textarea\",{\"value\":[1537],\"name\":[513],\"label\":[513],\"hint\":[513],\"required\":[1540],\"requiredMessage\":[513,\"required-message\"],\"validationMessage\":[513,\"validation-message\"],\"disabled\":[1540],\"regexCheck\":[1537,\"regex-check\"],\"status\":[32],\"reset\":[64]}]]],[\"dot-textfield\",[[0,\"dot-textfield\",{\"value\":[1025],\"name\":[1],\"label\":[513],\"placeholder\":[1537],\"hint\":[513],\"required\":[1540],\"requiredMessage\":[1,\"required-message\"],\"validationMessage\":[1,\"validation-message\"],\"disabled\":[1540],\"regexCheck\":[1537,\"regex-check\"],\"type\":[1537],\"status\":[32],\"reset\":[64]}]]],[\"dot-html-to-image\",[[0,\"dot-html-to-image\",{\"value\":[1],\"height\":[1025],\"width\":[1025],\"previewImg\":[32]}]]],[\"dot-material-icon-picker\",[[0,\"dot-material-icon-picker\",{\"placeholder\":[513],\"name\":[513],\"value\":[1537],\"size\":[1537],\"showColor\":[1537,\"show-color\"],\"colorValue\":[1537,\"color-value\"],\"colorLabel\":[1537,\"color-label\"],\"suggestionlist\":[16],\"showSuggestions\":[32],\"suggestionArr\":[32],\"selectedSuggestionIndex\":[32]},[[8,\"click\",\"handleWindowClick\"]]]]],[\"dot-progress-bar\",[[0,\"dot-progress-bar\",{\"text\":[1],\"progress\":[2]}]]],[\"dot-select-button\",[[1,\"dot-select-button\",{\"value\":[513],\"options\":[16]}]]],[\"dot-error-message_2\",[[0,\"dot-form-row\",{\"row\":[16],\"fieldsToShow\":[513,\"fields-to-show\"]}],[4,\"dot-error-message\"]]],[\"dot-autocomplete_2\",[[0,\"dot-autocomplete\",{\"disabled\":[516],\"placeholder\":[513],\"threshold\":[514],\"maxResults\":[514,\"max-results\"],\"debounce\":[514],\"data\":[16]}],[0,\"dot-chip\",{\"label\":[513],\"deleteLabel\":[513,\"delete-label\"],\"disabled\":[516]}]]],[\"key-value-form_2\",[[0,\"key-value-form\",{\"disabled\":[516],\"addButtonLabel\":[513,\"add-button-label\"],\"keyPlaceholder\":[513,\"key-placeholder\"],\"valuePlaceholder\":[513,\"value-placeholder\"],\"keyLabel\":[513,\"key-label\"],\"valueLabel\":[513,\"value-label\"],\"emptyDropdownOptionLabel\":[513,\"empty-dropdown-option-label\"],\"whiteList\":[513,\"white-list\"],\"inputs\":[32],\"selectedWhiteListKey\":[32]}],[0,\"key-value-table\",{\"items\":[16],\"disabled\":[516],\"buttonLabel\":[513,\"button-label\"],\"emptyMessage\":[513,\"empty-message\"]}]]],[\"dot-form-column\",[[0,\"dot-form-column\",{\"column\":[16],\"fieldsToShow\":[513,\"fields-to-show\"]}]]],[\"dot-binary-file-preview_3\",[[0,\"dot-binary-file-preview\",{\"fileName\":[1537,\"file-name\"],\"previewUrl\":[1537,\"preview-url\"],\"deleteLabel\":[513,\"delete-label\"]}],[0,\"dot-binary-text-field\",{\"value\":[1544],\"hint\":[513],\"placeholder\":[513],\"required\":[516],\"accept\":[513],\"disabled\":[516],\"status\":[32]}],[0,\"dot-binary-upload-button\",{\"name\":[513],\"required\":[516],\"accept\":[513],\"disabled\":[516],\"maxFileLength\":[513,\"max-file-length\"],\"buttonLabel\":[513,\"button-label\"]}]]],[\"dot-input-calendar\",[[0,\"dot-input-calendar\",{\"value\":[1537],\"name\":[513],\"required\":[516],\"disabled\":[516],\"min\":[513],\"max\":[513],\"step\":[513],\"type\":[513],\"status\":[32],\"reset\":[64]}]]],[\"dot-badge_9\",[[1,\"dot-card-contentlet\",{\"item\":[16],\"thumbnailSize\":[1,\"thumbnail-size\"],\"iconSize\":[1,\"icon-size\"],\"checked\":[1540],\"showMenu\":[64],\"hideMenu\":[64]}],[0,\"dot-contentlet-thumbnail\",{\"height\":[513],\"width\":[513],\"alt\":[513],\"iconSize\":[513,\"icon-size\"],\"contentlet\":[16],\"renderImage\":[32]}],[1,\"dot-state-icon\",{\"state\":[16],\"size\":[513],\"labels\":[16]}],[1,\"dot-badge\",{\"bgColor\":[1,\"bg-color\"],\"color\":[1],\"size\":[1],\"bordered\":[4]}],[1,\"dot-card\"],[1,\"dot-contentlet-lock-icon\",{\"locked\":[4],\"size\":[1]}],[1,\"dot-context-menu\",{\"options\":[16],\"fontSize\":[1,\"font-size\"],\"state\":[32],\"hide\":[64],\"show\":[64]}],[1,\"dot-contentlet-icon\",{\"icon\":[513],\"size\":[513]}],[1,\"dot-tooltip\",{\"content\":[1],\"for\":[1],\"delay\":[2],\"position\":[1]}]]]], options);\n  });\n};\n\nexport { defineCustomElements };\n","import { defineCustomElements } from '@dotcms/dotcms-webcomponents/loader';\n\ndefineCustomElements();","const NAMESPACE = 'dotcms-webcomponents';\n\nlet scopeId;\nlet contentRef;\nlet hostTagName;\nlet useNativeShadowDom = false;\nlet checkSlotFallbackVisibility = false;\nlet checkSlotRelocate = false;\nlet isSvgMode = false;\nlet queuePending = false;\nconst win = typeof window !== 'undefined' ? window : {};\nconst doc = win.document || { head: {} };\nconst plt = {\n    $flags$: 0,\n    $resourcesUrl$: '',\n    jmp: (h) => h(),\n    raf: (h) => requestAnimationFrame(h),\n    ael: (el, eventName, listener, opts) => el.addEventListener(eventName, listener, opts),\n    rel: (el, eventName, listener, opts) => el.removeEventListener(eventName, listener, opts),\n    ce: (eventName, opts) => new CustomEvent(eventName, opts),\n};\nconst promiseResolve = (v) => Promise.resolve(v);\nconst supportsConstructableStylesheets = /*@__PURE__*/ (() => {\n        try {\n            new CSSStyleSheet();\n            return typeof new CSSStyleSheet().replaceSync === 'function';\n        }\n        catch (e) { }\n        return false;\n    })()\n    ;\nconst addHostEventListeners = (elm, hostRef, listeners, attachParentListeners) => {\n    if (listeners) {\n        listeners.map(([flags, name, method]) => {\n            const target = getHostListenerTarget(elm, flags) ;\n            const handler = hostListenerProxy(hostRef, method);\n            const opts = hostListenerOpts(flags);\n            plt.ael(target, name, handler, opts);\n            (hostRef.$rmListeners$ = hostRef.$rmListeners$ || []).push(() => plt.rel(target, name, handler, opts));\n        });\n    }\n};\nconst hostListenerProxy = (hostRef, methodName) => (ev) => {\n    try {\n        {\n            if (hostRef.$flags$ & 256 /* isListenReady */) {\n                // instance is ready, let's call it's member method for this event\n                hostRef.$lazyInstance$[methodName](ev);\n            }\n            else {\n                (hostRef.$queuedListeners$ = hostRef.$queuedListeners$ || []).push([methodName, ev]);\n            }\n        }\n    }\n    catch (e) {\n        consoleError(e);\n    }\n};\nconst getHostListenerTarget = (elm, flags) => {\n    if (flags & 8 /* TargetWindow */)\n        return win;\n    return elm;\n};\n// prettier-ignore\nconst hostListenerOpts = (flags) => (flags & 2 /* Capture */) !== 0;\nconst HYDRATED_CSS = '{visibility:hidden}.hydrated{visibility:inherit}';\nconst createTime = (fnName, tagName = '') => {\n    {\n        return () => {\n            return;\n        };\n    }\n};\nconst uniqueTime = (key, measureText) => {\n    {\n        return () => {\n            return;\n        };\n    }\n};\nconst rootAppliedStyles = new WeakMap();\nconst registerStyle = (scopeId, cssText, allowCS) => {\n    let style = styles.get(scopeId);\n    if (supportsConstructableStylesheets && allowCS) {\n        style = (style || new CSSStyleSheet());\n        if (typeof style === 'string') {\n            style = cssText;\n        }\n        else {\n            style.replaceSync(cssText);\n        }\n    }\n    else {\n        style = cssText;\n    }\n    styles.set(scopeId, style);\n};\nconst addStyle = (styleContainerNode, cmpMeta, mode, hostElm) => {\n    let scopeId = getScopeId(cmpMeta);\n    const style = styles.get(scopeId);\n    // if an element is NOT connected then getRootNode() will return the wrong root node\n    // so the fallback is to always use the document for the root node in those cases\n    styleContainerNode = styleContainerNode.nodeType === 11 /* DocumentFragment */ ? styleContainerNode : doc;\n    if (style) {\n        if (typeof style === 'string') {\n            styleContainerNode = styleContainerNode.head || styleContainerNode;\n            let appliedStyles = rootAppliedStyles.get(styleContainerNode);\n            let styleElm;\n            if (!appliedStyles) {\n                rootAppliedStyles.set(styleContainerNode, (appliedStyles = new Set()));\n            }\n            if (!appliedStyles.has(scopeId)) {\n                {\n                    {\n                        styleElm = doc.createElement('style');\n                        styleElm.innerHTML = style;\n                    }\n                    styleContainerNode.insertBefore(styleElm, styleContainerNode.querySelector('link'));\n                }\n                if (appliedStyles) {\n                    appliedStyles.add(scopeId);\n                }\n            }\n        }\n        else if (!styleContainerNode.adoptedStyleSheets.includes(style)) {\n            styleContainerNode.adoptedStyleSheets = [...styleContainerNode.adoptedStyleSheets, style];\n        }\n    }\n    return scopeId;\n};\nconst attachStyles = (hostRef) => {\n    const cmpMeta = hostRef.$cmpMeta$;\n    const elm = hostRef.$hostElement$;\n    const flags = cmpMeta.$flags$;\n    const endAttachStyles = createTime('attachStyles', cmpMeta.$tagName$);\n    const scopeId = addStyle(elm.shadowRoot ? elm.shadowRoot : elm.getRootNode(), cmpMeta);\n    if (flags & 10 /* needsScopedEncapsulation */) {\n        // only required when we're NOT using native shadow dom (slot)\n        // or this browser doesn't support native shadow dom\n        // and this host element was NOT created with SSR\n        // let's pick out the inner content for slot projection\n        // create a node to represent where the original\n        // content was first placed, which is useful later on\n        // DOM WRITE!!\n        elm['s-sc'] = scopeId;\n        elm.classList.add(scopeId + '-h');\n    }\n    endAttachStyles();\n};\nconst getScopeId = (cmp, mode) => 'sc-' + (cmp.$tagName$);\n/**\n * Default style mode id\n */\n/**\n * Reusable empty obj/array\n * Don't add values to these!!\n */\nconst EMPTY_OBJ = {};\nconst isDef = (v) => v != null;\nconst isComplexType = (o) => {\n    // https://jsperf.com/typeof-fn-object/5\n    o = typeof o;\n    return o === 'object' || o === 'function';\n};\n/**\n * Production h() function based on Preact by\n * Jason Miller (@developit)\n * Licensed under the MIT License\n * https://github.com/developit/preact/blob/master/LICENSE\n *\n * Modified for Stencil's compiler and vdom\n */\n// const stack: any[] = [];\n// export function h(nodeName: string | d.FunctionalComponent, vnodeData: d.PropsType, child?: d.ChildType): d.VNode;\n// export function h(nodeName: string | d.FunctionalComponent, vnodeData: d.PropsType, ...children: d.ChildType[]): d.VNode;\nconst h = (nodeName, vnodeData, ...children) => {\n    let child = null;\n    let key = null;\n    let slotName = null;\n    let simple = false;\n    let lastSimple = false;\n    const vNodeChildren = [];\n    const walk = (c) => {\n        for (let i = 0; i < c.length; i++) {\n            child = c[i];\n            if (Array.isArray(child)) {\n                walk(child);\n            }\n            else if (child != null && typeof child !== 'boolean') {\n                if ((simple = typeof nodeName !== 'function' && !isComplexType(child))) {\n                    child = String(child);\n                }\n                if (simple && lastSimple) {\n                    // If the previous child was simple (string), we merge both\n                    vNodeChildren[vNodeChildren.length - 1].$text$ += child;\n                }\n                else {\n                    // Append a new vNode, if it's text, we create a text vNode\n                    vNodeChildren.push(simple ? newVNode(null, child) : child);\n                }\n                lastSimple = simple;\n            }\n        }\n    };\n    walk(children);\n    if (vnodeData) {\n        // normalize class / classname attributes\n        if (vnodeData.key) {\n            key = vnodeData.key;\n        }\n        if (vnodeData.name) {\n            slotName = vnodeData.name;\n        }\n        {\n            const classData = vnodeData.className || vnodeData.class;\n            if (classData) {\n                vnodeData.class =\n                    typeof classData !== 'object'\n                        ? classData\n                        : Object.keys(classData)\n                            .filter((k) => classData[k])\n                            .join(' ');\n            }\n        }\n    }\n    const vnode = newVNode(nodeName, null);\n    vnode.$attrs$ = vnodeData;\n    if (vNodeChildren.length > 0) {\n        vnode.$children$ = vNodeChildren;\n    }\n    {\n        vnode.$key$ = key;\n    }\n    {\n        vnode.$name$ = slotName;\n    }\n    return vnode;\n};\nconst newVNode = (tag, text) => {\n    const vnode = {\n        $flags$: 0,\n        $tag$: tag,\n        $text$: text,\n        $elm$: null,\n        $children$: null,\n    };\n    {\n        vnode.$attrs$ = null;\n    }\n    {\n        vnode.$key$ = null;\n    }\n    {\n        vnode.$name$ = null;\n    }\n    return vnode;\n};\nconst Host = {};\nconst isHost = (node) => node && node.$tag$ === Host;\n/**\n * Production setAccessor() function based on Preact by\n * Jason Miller (@developit)\n * Licensed under the MIT License\n * https://github.com/developit/preact/blob/master/LICENSE\n *\n * Modified for Stencil's compiler and vdom\n */\nconst setAccessor = (elm, memberName, oldValue, newValue, isSvg, flags) => {\n    if (oldValue !== newValue) {\n        let isProp = isMemberInElement(elm, memberName);\n        let ln = memberName.toLowerCase();\n        if (memberName === 'class') {\n            const classList = elm.classList;\n            const oldClasses = parseClassList(oldValue);\n            const newClasses = parseClassList(newValue);\n            classList.remove(...oldClasses.filter((c) => c && !newClasses.includes(c)));\n            classList.add(...newClasses.filter((c) => c && !oldClasses.includes(c)));\n        }\n        else if (memberName === 'style') {\n            // update style attribute, css properties and values\n            {\n                for (const prop in oldValue) {\n                    if (!newValue || newValue[prop] == null) {\n                        if (prop.includes('-')) {\n                            elm.style.removeProperty(prop);\n                        }\n                        else {\n                            elm.style[prop] = '';\n                        }\n                    }\n                }\n            }\n            for (const prop in newValue) {\n                if (!oldValue || newValue[prop] !== oldValue[prop]) {\n                    if (prop.includes('-')) {\n                        elm.style.setProperty(prop, newValue[prop]);\n                    }\n                    else {\n                        elm.style[prop] = newValue[prop];\n                    }\n                }\n            }\n        }\n        else if (memberName === 'key')\n            ;\n        else if ((!isProp ) &&\n            memberName[0] === 'o' &&\n            memberName[1] === 'n') {\n            // Event Handlers\n            // so if the member name starts with \"on\" and the 3rd characters is\n            // a capital letter, and it's not already a member on the element,\n            // then we're assuming it's an event listener\n            if (memberName[2] === '-') {\n                // on- prefixed events\n                // allows to be explicit about the dom event to listen without any magic\n                // under the hood:\n                // <my-cmp on-click> // listens for \"click\"\n                // <my-cmp on-Click> // listens for \"Click\"\n                // <my-cmp on-ionChange> // listens for \"ionChange\"\n                // <my-cmp on-EVENTS> // listens for \"EVENTS\"\n                memberName = memberName.slice(3);\n            }\n            else if (isMemberInElement(win, ln)) {\n                // standard event\n                // the JSX attribute could have been \"onMouseOver\" and the\n                // member name \"onmouseover\" is on the window's prototype\n                // so let's add the listener \"mouseover\", which is all lowercased\n                memberName = ln.slice(2);\n            }\n            else {\n                // custom event\n                // the JSX attribute could have been \"onMyCustomEvent\"\n                // so let's trim off the \"on\" prefix and lowercase the first character\n                // and add the listener \"myCustomEvent\"\n                // except for the first character, we keep the event name case\n                memberName = ln[2] + memberName.slice(3);\n            }\n            if (oldValue) {\n                plt.rel(elm, memberName, oldValue, false);\n            }\n            if (newValue) {\n                plt.ael(elm, memberName, newValue, false);\n            }\n        }\n        else {\n            // Set property if it exists and it's not a SVG\n            const isComplex = isComplexType(newValue);\n            if ((isProp || (isComplex && newValue !== null)) && !isSvg) {\n                try {\n                    if (!elm.tagName.includes('-')) {\n                        const n = newValue == null ? '' : newValue;\n                        // Workaround for Safari, moving the <input> caret when re-assigning the same valued\n                        if (memberName === 'list') {\n                            isProp = false;\n                        }\n                        else if (oldValue == null || elm[memberName] != n) {\n                            elm[memberName] = n;\n                        }\n                    }\n                    else {\n                        elm[memberName] = newValue;\n                    }\n                }\n                catch (e) { }\n            }\n            if (newValue == null || newValue === false) {\n                if (newValue !== false || elm.getAttribute(memberName) === '') {\n                    {\n                        elm.removeAttribute(memberName);\n                    }\n                }\n            }\n            else if ((!isProp || flags & 4 /* isHost */ || isSvg) && !isComplex) {\n                newValue = newValue === true ? '' : newValue;\n                {\n                    elm.setAttribute(memberName, newValue);\n                }\n            }\n        }\n    }\n};\nconst parseClassListRegex = /\\s/;\nconst parseClassList = (value) => (!value ? [] : value.split(parseClassListRegex));\nconst updateElement = (oldVnode, newVnode, isSvgMode, memberName) => {\n    // if the element passed in is a shadow root, which is a document fragment\n    // then we want to be adding attrs/props to the shadow root's \"host\" element\n    // if it's not a shadow root, then we add attrs/props to the same element\n    const elm = newVnode.$elm$.nodeType === 11 /* DocumentFragment */ && newVnode.$elm$.host\n        ? newVnode.$elm$.host\n        : newVnode.$elm$;\n    const oldVnodeAttrs = (oldVnode && oldVnode.$attrs$) || EMPTY_OBJ;\n    const newVnodeAttrs = newVnode.$attrs$ || EMPTY_OBJ;\n    {\n        // remove attributes no longer present on the vnode by setting them to undefined\n        for (memberName in oldVnodeAttrs) {\n            if (!(memberName in newVnodeAttrs)) {\n                setAccessor(elm, memberName, oldVnodeAttrs[memberName], undefined, isSvgMode, newVnode.$flags$);\n            }\n        }\n    }\n    // add new & update changed attributes\n    for (memberName in newVnodeAttrs) {\n        setAccessor(elm, memberName, oldVnodeAttrs[memberName], newVnodeAttrs[memberName], isSvgMode, newVnode.$flags$);\n    }\n};\nconst createElm = (oldParentVNode, newParentVNode, childIndex, parentElm) => {\n    // tslint:disable-next-line: prefer-const\n    const newVNode = newParentVNode.$children$[childIndex];\n    let i = 0;\n    let elm;\n    let childNode;\n    let oldVNode;\n    if (!useNativeShadowDom) {\n        // remember for later we need to check to relocate nodes\n        checkSlotRelocate = true;\n        if (newVNode.$tag$ === 'slot') {\n            if (scopeId) {\n                // scoped css needs to add its scoped id to the parent element\n                parentElm.classList.add(scopeId + '-s');\n            }\n            newVNode.$flags$ |= newVNode.$children$\n                ? // slot element has fallback content\n                    2 /* isSlotFallback */\n                : // slot element does not have fallback content\n                    1 /* isSlotReference */;\n        }\n    }\n    if (newVNode.$text$ !== null) {\n        // create text node\n        elm = newVNode.$elm$ = doc.createTextNode(newVNode.$text$);\n    }\n    else if (newVNode.$flags$ & 1 /* isSlotReference */) {\n        // create a slot reference node\n        elm = newVNode.$elm$ =\n            doc.createTextNode('');\n    }\n    else {\n        // create element\n        elm = newVNode.$elm$ = (doc.createElement(newVNode.$flags$ & 2 /* isSlotFallback */\n                ? 'slot-fb'\n                : newVNode.$tag$));\n        // add css classes, attrs, props, listeners, etc.\n        {\n            updateElement(null, newVNode, isSvgMode);\n        }\n        if (isDef(scopeId) && elm['s-si'] !== scopeId) {\n            // if there is a scopeId and this is the initial render\n            // then let's add the scopeId as a css class\n            elm.classList.add((elm['s-si'] = scopeId));\n        }\n        if (newVNode.$children$) {\n            for (i = 0; i < newVNode.$children$.length; ++i) {\n                // create the node\n                childNode = createElm(oldParentVNode, newVNode, i, elm);\n                // return node could have been null\n                if (childNode) {\n                    // append our new node\n                    elm.appendChild(childNode);\n                }\n            }\n        }\n    }\n    {\n        elm['s-hn'] = hostTagName;\n        if (newVNode.$flags$ & (2 /* isSlotFallback */ | 1 /* isSlotReference */)) {\n            // remember the content reference comment\n            elm['s-sr'] = true;\n            // remember the content reference comment\n            elm['s-cr'] = contentRef;\n            // remember the slot name, or empty string for default slot\n            elm['s-sn'] = newVNode.$name$ || '';\n            // check if we've got an old vnode for this slot\n            oldVNode = oldParentVNode && oldParentVNode.$children$ && oldParentVNode.$children$[childIndex];\n            if (oldVNode && oldVNode.$tag$ === newVNode.$tag$ && oldParentVNode.$elm$) {\n                // we've got an old slot vnode and the wrapper is being replaced\n                // so let's move the old slot content back to it's original location\n                putBackInOriginalLocation(oldParentVNode.$elm$, false);\n            }\n        }\n    }\n    return elm;\n};\nconst putBackInOriginalLocation = (parentElm, recursive) => {\n    plt.$flags$ |= 1 /* isTmpDisconnected */;\n    const oldSlotChildNodes = parentElm.childNodes;\n    for (let i = oldSlotChildNodes.length - 1; i >= 0; i--) {\n        const childNode = oldSlotChildNodes[i];\n        if (childNode['s-hn'] !== hostTagName && childNode['s-ol']) {\n            // // this child node in the old element is from another component\n            // // remove this node from the old slot's parent\n            // childNode.remove();\n            // and relocate it back to it's original location\n            parentReferenceNode(childNode).insertBefore(childNode, referenceNode(childNode));\n            // remove the old original location comment entirely\n            // later on the patch function will know what to do\n            // and move this to the correct spot in need be\n            childNode['s-ol'].remove();\n            childNode['s-ol'] = undefined;\n            checkSlotRelocate = true;\n        }\n        if (recursive) {\n            putBackInOriginalLocation(childNode, recursive);\n        }\n    }\n    plt.$flags$ &= ~1 /* isTmpDisconnected */;\n};\nconst addVnodes = (parentElm, before, parentVNode, vnodes, startIdx, endIdx) => {\n    let containerElm = ((parentElm['s-cr'] && parentElm['s-cr'].parentNode) || parentElm);\n    let childNode;\n    if (containerElm.shadowRoot && containerElm.tagName === hostTagName) {\n        containerElm = containerElm.shadowRoot;\n    }\n    for (; startIdx <= endIdx; ++startIdx) {\n        if (vnodes[startIdx]) {\n            childNode = createElm(null, parentVNode, startIdx, parentElm);\n            if (childNode) {\n                vnodes[startIdx].$elm$ = childNode;\n                containerElm.insertBefore(childNode, referenceNode(before) );\n            }\n        }\n    }\n};\nconst removeVnodes = (vnodes, startIdx, endIdx, vnode, elm) => {\n    for (; startIdx <= endIdx; ++startIdx) {\n        if ((vnode = vnodes[startIdx])) {\n            elm = vnode.$elm$;\n            {\n                // we're removing this element\n                // so it's possible we need to show slot fallback content now\n                checkSlotFallbackVisibility = true;\n                if (elm['s-ol']) {\n                    // remove the original location comment\n                    elm['s-ol'].remove();\n                }\n                else {\n                    // it's possible that child nodes of the node\n                    // that's being removed are slot nodes\n                    putBackInOriginalLocation(elm, true);\n                }\n            }\n            // remove the vnode's element from the dom\n            elm.remove();\n        }\n    }\n};\nconst updateChildren = (parentElm, oldCh, newVNode, newCh) => {\n    let oldStartIdx = 0;\n    let newStartIdx = 0;\n    let idxInOld = 0;\n    let i = 0;\n    let oldEndIdx = oldCh.length - 1;\n    let oldStartVnode = oldCh[0];\n    let oldEndVnode = oldCh[oldEndIdx];\n    let newEndIdx = newCh.length - 1;\n    let newStartVnode = newCh[0];\n    let newEndVnode = newCh[newEndIdx];\n    let node;\n    let elmToMove;\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        if (oldStartVnode == null) {\n            // Vnode might have been moved left\n            oldStartVnode = oldCh[++oldStartIdx];\n        }\n        else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx];\n        }\n        else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (isSameVnode(oldStartVnode, newStartVnode)) {\n            patch(oldStartVnode, newStartVnode);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (isSameVnode(oldEndVnode, newEndVnode)) {\n            patch(oldEndVnode, newEndVnode);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (isSameVnode(oldStartVnode, newEndVnode)) {\n            // Vnode moved right\n            if ((oldStartVnode.$tag$ === 'slot' || newEndVnode.$tag$ === 'slot')) {\n                putBackInOriginalLocation(oldStartVnode.$elm$.parentNode, false);\n            }\n            patch(oldStartVnode, newEndVnode);\n            parentElm.insertBefore(oldStartVnode.$elm$, oldEndVnode.$elm$.nextSibling);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (isSameVnode(oldEndVnode, newStartVnode)) {\n            // Vnode moved left\n            if ((oldStartVnode.$tag$ === 'slot' || newEndVnode.$tag$ === 'slot')) {\n                putBackInOriginalLocation(oldEndVnode.$elm$.parentNode, false);\n            }\n            patch(oldEndVnode, newStartVnode);\n            parentElm.insertBefore(oldEndVnode.$elm$, oldStartVnode.$elm$);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else {\n            // createKeyToOldIdx\n            idxInOld = -1;\n            {\n                for (i = oldStartIdx; i <= oldEndIdx; ++i) {\n                    if (oldCh[i] && oldCh[i].$key$ !== null && oldCh[i].$key$ === newStartVnode.$key$) {\n                        idxInOld = i;\n                        break;\n                    }\n                }\n            }\n            if (idxInOld >= 0) {\n                elmToMove = oldCh[idxInOld];\n                if (elmToMove.$tag$ !== newStartVnode.$tag$) {\n                    node = createElm(oldCh && oldCh[newStartIdx], newVNode, idxInOld, parentElm);\n                }\n                else {\n                    patch(elmToMove, newStartVnode);\n                    oldCh[idxInOld] = undefined;\n                    node = elmToMove.$elm$;\n                }\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else {\n                // new element\n                node = createElm(oldCh && oldCh[newStartIdx], newVNode, newStartIdx, parentElm);\n                newStartVnode = newCh[++newStartIdx];\n            }\n            if (node) {\n                {\n                    parentReferenceNode(oldStartVnode.$elm$).insertBefore(node, referenceNode(oldStartVnode.$elm$));\n                }\n            }\n        }\n    }\n    if (oldStartIdx > oldEndIdx) {\n        addVnodes(parentElm, newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].$elm$, newVNode, newCh, newStartIdx, newEndIdx);\n    }\n    else if (newStartIdx > newEndIdx) {\n        removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n    }\n};\nconst isSameVnode = (vnode1, vnode2) => {\n    // compare if two vnode to see if they're \"technically\" the same\n    // need to have the same element tag, and same key to be the same\n    if (vnode1.$tag$ === vnode2.$tag$) {\n        if (vnode1.$tag$ === 'slot') {\n            return vnode1.$name$ === vnode2.$name$;\n        }\n        {\n            return vnode1.$key$ === vnode2.$key$;\n        }\n    }\n    return false;\n};\nconst referenceNode = (node) => {\n    // this node was relocated to a new location in the dom\n    // because of some other component's slot\n    // but we still have an html comment in place of where\n    // it's original location was according to it's original vdom\n    return (node && node['s-ol']) || node;\n};\nconst parentReferenceNode = (node) => (node['s-ol'] ? node['s-ol'] : node).parentNode;\nconst patch = (oldVNode, newVNode) => {\n    const elm = (newVNode.$elm$ = oldVNode.$elm$);\n    const oldChildren = oldVNode.$children$;\n    const newChildren = newVNode.$children$;\n    const tag = newVNode.$tag$;\n    const text = newVNode.$text$;\n    let defaultHolder;\n    if (text === null) {\n        // element node\n        {\n            if (tag === 'slot')\n                ;\n            else {\n                // either this is the first render of an element OR it's an update\n                // AND we already know it's possible it could have changed\n                // this updates the element's css classes, attrs, props, listeners, etc.\n                updateElement(oldVNode, newVNode, isSvgMode);\n            }\n        }\n        if (oldChildren !== null && newChildren !== null) {\n            // looks like there's child vnodes for both the old and new vnodes\n            updateChildren(elm, oldChildren, newVNode, newChildren);\n        }\n        else if (newChildren !== null) {\n            // no old child vnodes, but there are new child vnodes to add\n            if (oldVNode.$text$ !== null) {\n                // the old vnode was text, so be sure to clear it out\n                elm.textContent = '';\n            }\n            // add the new vnode children\n            addVnodes(elm, null, newVNode, newChildren, 0, newChildren.length - 1);\n        }\n        else if (oldChildren !== null) {\n            // no new child vnodes, but there are old child vnodes to remove\n            removeVnodes(oldChildren, 0, oldChildren.length - 1);\n        }\n    }\n    else if ((defaultHolder = elm['s-cr'])) {\n        // this element has slotted content\n        defaultHolder.parentNode.textContent = text;\n    }\n    else if (oldVNode.$text$ !== text) {\n        // update the text content for the text only vnode\n        // and also only if the text is different than before\n        elm.data = text;\n    }\n};\nconst updateFallbackSlotVisibility = (elm) => {\n    // tslint:disable-next-line: prefer-const\n    const childNodes = elm.childNodes;\n    let childNode;\n    let i;\n    let ilen;\n    let j;\n    let slotNameAttr;\n    let nodeType;\n    for (i = 0, ilen = childNodes.length; i < ilen; i++) {\n        childNode = childNodes[i];\n        if (childNode.nodeType === 1 /* ElementNode */) {\n            if (childNode['s-sr']) {\n                // this is a slot fallback node\n                // get the slot name for this slot reference node\n                slotNameAttr = childNode['s-sn'];\n                // by default always show a fallback slot node\n                // then hide it if there are other slots in the light dom\n                childNode.hidden = false;\n                for (j = 0; j < ilen; j++) {\n                    nodeType = childNodes[j].nodeType;\n                    if (childNodes[j]['s-hn'] !== childNode['s-hn'] || slotNameAttr !== '') {\n                        // this sibling node is from a different component OR is a named fallback slot node\n                        if (nodeType === 1 /* ElementNode */ && slotNameAttr === childNodes[j].getAttribute('slot')) {\n                            childNode.hidden = true;\n                            break;\n                        }\n                    }\n                    else {\n                        // this is a default fallback slot node\n                        // any element or text node (with content)\n                        // should hide the default fallback slot node\n                        if (nodeType === 1 /* ElementNode */ ||\n                            (nodeType === 3 /* TextNode */ && childNodes[j].textContent.trim() !== '')) {\n                            childNode.hidden = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            // keep drilling down\n            updateFallbackSlotVisibility(childNode);\n        }\n    }\n};\nconst relocateNodes = [];\nconst relocateSlotContent = (elm) => {\n    // tslint:disable-next-line: prefer-const\n    let childNode;\n    let node;\n    let hostContentNodes;\n    let slotNameAttr;\n    let relocateNodeData;\n    let j;\n    let i = 0;\n    const childNodes = elm.childNodes;\n    const ilen = childNodes.length;\n    for (; i < ilen; i++) {\n        childNode = childNodes[i];\n        if (childNode['s-sr'] && (node = childNode['s-cr']) && node.parentNode) {\n            // first got the content reference comment node\n            // then we got it's parent, which is where all the host content is in now\n            hostContentNodes = node.parentNode.childNodes;\n            slotNameAttr = childNode['s-sn'];\n            for (j = hostContentNodes.length - 1; j >= 0; j--) {\n                node = hostContentNodes[j];\n                if (!node['s-cn'] && !node['s-nr'] && node['s-hn'] !== childNode['s-hn']) {\n                    // let's do some relocating to its new home\n                    // but never relocate a content reference node\n                    // that is suppose to always represent the original content location\n                    if (isNodeLocatedInSlot(node, slotNameAttr)) {\n                        // it's possible we've already decided to relocate this node\n                        relocateNodeData = relocateNodes.find((r) => r.$nodeToRelocate$ === node);\n                        // made some changes to slots\n                        // let's make sure we also double check\n                        // fallbacks are correctly hidden or shown\n                        checkSlotFallbackVisibility = true;\n                        node['s-sn'] = node['s-sn'] || slotNameAttr;\n                        if (relocateNodeData) {\n                            // previously we never found a slot home for this node\n                            // but turns out we did, so let's remember it now\n                            relocateNodeData.$slotRefNode$ = childNode;\n                        }\n                        else {\n                            // add to our list of nodes to relocate\n                            relocateNodes.push({\n                                $slotRefNode$: childNode,\n                                $nodeToRelocate$: node,\n                            });\n                        }\n                        if (node['s-sr']) {\n                            relocateNodes.map((relocateNode) => {\n                                if (isNodeLocatedInSlot(relocateNode.$nodeToRelocate$, node['s-sn'])) {\n                                    relocateNodeData = relocateNodes.find((r) => r.$nodeToRelocate$ === node);\n                                    if (relocateNodeData && !relocateNode.$slotRefNode$) {\n                                        relocateNode.$slotRefNode$ = relocateNodeData.$slotRefNode$;\n                                    }\n                                }\n                            });\n                        }\n                    }\n                    else if (!relocateNodes.some((r) => r.$nodeToRelocate$ === node)) {\n                        // so far this element does not have a slot home, not setting slotRefNode on purpose\n                        // if we never find a home for this element then we'll need to hide it\n                        relocateNodes.push({\n                            $nodeToRelocate$: node,\n                        });\n                    }\n                }\n            }\n        }\n        if (childNode.nodeType === 1 /* ElementNode */) {\n            relocateSlotContent(childNode);\n        }\n    }\n};\nconst isNodeLocatedInSlot = (nodeToRelocate, slotNameAttr) => {\n    if (nodeToRelocate.nodeType === 1 /* ElementNode */) {\n        if (nodeToRelocate.getAttribute('slot') === null && slotNameAttr === '') {\n            return true;\n        }\n        if (nodeToRelocate.getAttribute('slot') === slotNameAttr) {\n            return true;\n        }\n        return false;\n    }\n    if (nodeToRelocate['s-sn'] === slotNameAttr) {\n        return true;\n    }\n    return slotNameAttr === '';\n};\nconst renderVdom = (hostRef, renderFnResults) => {\n    const hostElm = hostRef.$hostElement$;\n    const cmpMeta = hostRef.$cmpMeta$;\n    const oldVNode = hostRef.$vnode$ || newVNode(null, null);\n    const rootVnode = isHost(renderFnResults) ? renderFnResults : h(null, null, renderFnResults);\n    hostTagName = hostElm.tagName;\n    if (cmpMeta.$attrsToReflect$) {\n        rootVnode.$attrs$ = rootVnode.$attrs$ || {};\n        cmpMeta.$attrsToReflect$.map(([propName, attribute]) => (rootVnode.$attrs$[attribute] = hostElm[propName]));\n    }\n    rootVnode.$tag$ = null;\n    rootVnode.$flags$ |= 4 /* isHost */;\n    hostRef.$vnode$ = rootVnode;\n    rootVnode.$elm$ = oldVNode.$elm$ = (hostElm.shadowRoot || hostElm );\n    {\n        scopeId = hostElm['s-sc'];\n    }\n    {\n        contentRef = hostElm['s-cr'];\n        useNativeShadowDom = (cmpMeta.$flags$ & 1 /* shadowDomEncapsulation */) !== 0;\n        // always reset\n        checkSlotFallbackVisibility = false;\n    }\n    // synchronous patch\n    patch(oldVNode, rootVnode);\n    {\n        // while we're moving nodes around existing nodes, temporarily disable\n        // the disconnectCallback from working\n        plt.$flags$ |= 1 /* isTmpDisconnected */;\n        if (checkSlotRelocate) {\n            relocateSlotContent(rootVnode.$elm$);\n            let relocateData;\n            let nodeToRelocate;\n            let orgLocationNode;\n            let parentNodeRef;\n            let insertBeforeNode;\n            let refNode;\n            let i = 0;\n            for (; i < relocateNodes.length; i++) {\n                relocateData = relocateNodes[i];\n                nodeToRelocate = relocateData.$nodeToRelocate$;\n                if (!nodeToRelocate['s-ol']) {\n                    // add a reference node marking this node's original location\n                    // keep a reference to this node for later lookups\n                    orgLocationNode =\n                        doc.createTextNode('');\n                    orgLocationNode['s-nr'] = nodeToRelocate;\n                    nodeToRelocate.parentNode.insertBefore((nodeToRelocate['s-ol'] = orgLocationNode), nodeToRelocate);\n                }\n            }\n            for (i = 0; i < relocateNodes.length; i++) {\n                relocateData = relocateNodes[i];\n                nodeToRelocate = relocateData.$nodeToRelocate$;\n                if (relocateData.$slotRefNode$) {\n                    // by default we're just going to insert it directly\n                    // after the slot reference node\n                    parentNodeRef = relocateData.$slotRefNode$.parentNode;\n                    insertBeforeNode = relocateData.$slotRefNode$.nextSibling;\n                    orgLocationNode = nodeToRelocate['s-ol'];\n                    while ((orgLocationNode = orgLocationNode.previousSibling)) {\n                        refNode = orgLocationNode['s-nr'];\n                        if (refNode && refNode['s-sn'] === nodeToRelocate['s-sn'] && parentNodeRef === refNode.parentNode) {\n                            refNode = refNode.nextSibling;\n                            if (!refNode || !refNode['s-nr']) {\n                                insertBeforeNode = refNode;\n                                break;\n                            }\n                        }\n                    }\n                    if ((!insertBeforeNode && parentNodeRef !== nodeToRelocate.parentNode) ||\n                        nodeToRelocate.nextSibling !== insertBeforeNode) {\n                        // we've checked that it's worth while to relocate\n                        // since that the node to relocate\n                        // has a different next sibling or parent relocated\n                        if (nodeToRelocate !== insertBeforeNode) {\n                            if (!nodeToRelocate['s-hn'] && nodeToRelocate['s-ol']) {\n                                // probably a component in the index.html that doesn't have it's hostname set\n                                nodeToRelocate['s-hn'] = nodeToRelocate['s-ol'].parentNode.nodeName;\n                            }\n                            // add it back to the dom but in its new home\n                            parentNodeRef.insertBefore(nodeToRelocate, insertBeforeNode);\n                        }\n                    }\n                }\n                else {\n                    // this node doesn't have a slot home to go to, so let's hide it\n                    if (nodeToRelocate.nodeType === 1 /* ElementNode */) {\n                        nodeToRelocate.hidden = true;\n                    }\n                }\n            }\n        }\n        if (checkSlotFallbackVisibility) {\n            updateFallbackSlotVisibility(rootVnode.$elm$);\n        }\n        // done moving nodes around\n        // allow the disconnect callback to work again\n        plt.$flags$ &= ~1 /* isTmpDisconnected */;\n        // always reset\n        relocateNodes.length = 0;\n    }\n};\nconst getElement = (ref) => (getHostRef(ref).$hostElement$ );\nconst createEvent = (ref, name, flags) => {\n    const elm = getElement(ref);\n    return {\n        emit: (detail) => {\n            return emitEvent(elm, name, {\n                bubbles: !!(flags & 4 /* Bubbles */),\n                composed: !!(flags & 2 /* Composed */),\n                cancelable: !!(flags & 1 /* Cancellable */),\n                detail,\n            });\n        },\n    };\n};\n/**\n * Helper function to create & dispatch a custom Event on a provided target\n * @param elm the target of the Event\n * @param name the name to give the custom Event\n * @param opts options for configuring a custom Event\n * @returns the custom Event\n */\nconst emitEvent = (elm, name, opts) => {\n    const ev = plt.ce(name, opts);\n    elm.dispatchEvent(ev);\n    return ev;\n};\nconst attachToAncestor = (hostRef, ancestorComponent) => {\n    if (ancestorComponent && !hostRef.$onRenderResolve$ && ancestorComponent['s-p']) {\n        ancestorComponent['s-p'].push(new Promise((r) => (hostRef.$onRenderResolve$ = r)));\n    }\n};\nconst scheduleUpdate = (hostRef, isInitialLoad) => {\n    {\n        hostRef.$flags$ |= 16 /* isQueuedForUpdate */;\n    }\n    if (hostRef.$flags$ & 4 /* isWaitingForChildren */) {\n        hostRef.$flags$ |= 512 /* needsRerender */;\n        return;\n    }\n    attachToAncestor(hostRef, hostRef.$ancestorComponent$);\n    // there is no ancestor component or the ancestor component\n    // has already fired off its lifecycle update then\n    // fire off the initial update\n    const dispatch = () => dispatchHooks(hostRef, isInitialLoad);\n    return writeTask(dispatch) ;\n};\nconst dispatchHooks = (hostRef, isInitialLoad) => {\n    const endSchedule = createTime('scheduleUpdate', hostRef.$cmpMeta$.$tagName$);\n    const instance = hostRef.$lazyInstance$ ;\n    let promise;\n    if (isInitialLoad) {\n        {\n            hostRef.$flags$ |= 256 /* isListenReady */;\n            if (hostRef.$queuedListeners$) {\n                hostRef.$queuedListeners$.map(([methodName, event]) => safeCall(instance, methodName, event));\n                hostRef.$queuedListeners$ = null;\n            }\n        }\n        {\n            promise = safeCall(instance, 'componentWillLoad');\n        }\n    }\n    {\n        promise = then(promise, () => safeCall(instance, 'componentWillRender'));\n    }\n    endSchedule();\n    return then(promise, () => updateComponent(hostRef, instance, isInitialLoad));\n};\nconst updateComponent = async (hostRef, instance, isInitialLoad) => {\n    // updateComponent\n    const elm = hostRef.$hostElement$;\n    const endUpdate = createTime('update', hostRef.$cmpMeta$.$tagName$);\n    const rc = elm['s-rc'];\n    if (isInitialLoad) {\n        // DOM WRITE!\n        attachStyles(hostRef);\n    }\n    const endRender = createTime('render', hostRef.$cmpMeta$.$tagName$);\n    {\n        callRender(hostRef, instance);\n    }\n    if (rc) {\n        // ok, so turns out there are some child host elements\n        // waiting on this parent element to load\n        // let's fire off all update callbacks waiting\n        rc.map((cb) => cb());\n        elm['s-rc'] = undefined;\n    }\n    endRender();\n    endUpdate();\n    {\n        const childrenPromises = elm['s-p'];\n        const postUpdate = () => postUpdateComponent(hostRef);\n        if (childrenPromises.length === 0) {\n            postUpdate();\n        }\n        else {\n            Promise.all(childrenPromises).then(postUpdate);\n            hostRef.$flags$ |= 4 /* isWaitingForChildren */;\n            childrenPromises.length = 0;\n        }\n    }\n};\nconst callRender = (hostRef, instance, elm) => {\n    try {\n        instance = instance.render() ;\n        {\n            hostRef.$flags$ &= ~16 /* isQueuedForUpdate */;\n        }\n        {\n            hostRef.$flags$ |= 2 /* hasRendered */;\n        }\n        {\n            {\n                // looks like we've got child nodes to render into this host element\n                // or we need to update the css class/attrs on the host element\n                // DOM WRITE!\n                {\n                    renderVdom(hostRef, instance);\n                }\n            }\n        }\n    }\n    catch (e) {\n        consoleError(e, hostRef.$hostElement$);\n    }\n    return null;\n};\nconst postUpdateComponent = (hostRef) => {\n    const tagName = hostRef.$cmpMeta$.$tagName$;\n    const elm = hostRef.$hostElement$;\n    const endPostUpdate = createTime('postUpdate', tagName);\n    const instance = hostRef.$lazyInstance$ ;\n    const ancestorComponent = hostRef.$ancestorComponent$;\n    if (!(hostRef.$flags$ & 64 /* hasLoadedComponent */)) {\n        hostRef.$flags$ |= 64 /* hasLoadedComponent */;\n        {\n            // DOM WRITE!\n            addHydratedFlag(elm);\n        }\n        {\n            safeCall(instance, 'componentDidLoad');\n        }\n        endPostUpdate();\n        {\n            hostRef.$onReadyResolve$(elm);\n            if (!ancestorComponent) {\n                appDidLoad();\n            }\n        }\n    }\n    else {\n        {\n            safeCall(instance, 'componentDidUpdate');\n        }\n        endPostUpdate();\n    }\n    {\n        hostRef.$onInstanceResolve$(elm);\n    }\n    // load events fire from bottom to top\n    // the deepest elements load first then bubbles up\n    {\n        if (hostRef.$onRenderResolve$) {\n            hostRef.$onRenderResolve$();\n            hostRef.$onRenderResolve$ = undefined;\n        }\n        if (hostRef.$flags$ & 512 /* needsRerender */) {\n            nextTick(() => scheduleUpdate(hostRef, false));\n        }\n        hostRef.$flags$ &= ~(4 /* isWaitingForChildren */ | 512 /* needsRerender */);\n    }\n    // ( •_•)\n    // ( •_•)>⌐■-■\n    // (⌐■_■)\n};\nconst appDidLoad = (who) => {\n    // on appload\n    // we have finish the first big initial render\n    {\n        addHydratedFlag(doc.documentElement);\n    }\n    nextTick(() => emitEvent(win, 'appload', { detail: { namespace: NAMESPACE } }));\n};\nconst safeCall = (instance, method, arg) => {\n    if (instance && instance[method]) {\n        try {\n            return instance[method](arg);\n        }\n        catch (e) {\n            consoleError(e);\n        }\n    }\n    return undefined;\n};\nconst then = (promise, thenFn) => {\n    return promise && promise.then ? promise.then(thenFn) : thenFn();\n};\nconst addHydratedFlag = (elm) => elm.classList.add('hydrated')\n    ;\n/**\n * Parse a new property value for a given property type.\n *\n * While the prop value can reasonably be expected to be of `any` type as far as TypeScript's type checker is concerned,\n * it is not safe to assume that the string returned by evaluating `typeof propValue` matches:\n *   1. `any`, the type given to `propValue` in the function signature\n *   2. the type stored from `propType`.\n *\n * This function provides the capability to parse/coerce a property's value to potentially any other JavaScript type.\n *\n * Property values represented in TSX preserve their type information. In the example below, the number 0 is passed to\n * a component. This `propValue` will preserve its type information (`typeof propValue === 'number'`). Note that is\n * based on the type of the value being passed in, not the type declared of the class member decorated with `@Prop`.\n * ```tsx\n * <my-cmp prop-val={0}></my-cmp>\n * ```\n *\n * HTML prop values on the other hand, will always a string\n *\n * @param propValue the new value to coerce to some type\n * @param propType the type of the prop, expressed as a binary number\n * @returns the parsed/coerced value\n */\nconst parsePropertyValue = (propValue, propType) => {\n    // ensure this value is of the correct prop type\n    if (propValue != null && !isComplexType(propValue)) {\n        if (propType & 4 /* Boolean */) {\n            // per the HTML spec, any string value means it is a boolean true value\n            // but we'll cheat here and say that the string \"false\" is the boolean false\n            return propValue === 'false' ? false : propValue === '' || !!propValue;\n        }\n        if (propType & 2 /* Number */) {\n            // force it to be a number\n            return parseFloat(propValue);\n        }\n        if (propType & 1 /* String */) {\n            // could have been passed as a number or boolean\n            // but we still want it as a string\n            return String(propValue);\n        }\n        // redundant return here for better minification\n        return propValue;\n    }\n    // not sure exactly what type we want\n    // so no need to change to a different type\n    return propValue;\n};\nconst getValue = (ref, propName) => getHostRef(ref).$instanceValues$.get(propName);\nconst setValue = (ref, propName, newVal, cmpMeta) => {\n    // check our new property value against our internal value\n    const hostRef = getHostRef(ref);\n    const elm = hostRef.$hostElement$ ;\n    const oldVal = hostRef.$instanceValues$.get(propName);\n    const flags = hostRef.$flags$;\n    const instance = hostRef.$lazyInstance$ ;\n    newVal = parsePropertyValue(newVal, cmpMeta.$members$[propName][0]);\n    // explicitly check for NaN on both sides, as `NaN === NaN` is always false\n    const areBothNaN = Number.isNaN(oldVal) && Number.isNaN(newVal);\n    const didValueChange = newVal !== oldVal && !areBothNaN;\n    if ((!(flags & 8 /* isConstructingInstance */) || oldVal === undefined) && didValueChange) {\n        // gadzooks! the property's value has changed!!\n        // set our new value!\n        hostRef.$instanceValues$.set(propName, newVal);\n        if (instance) {\n            // get an array of method names of watch functions to call\n            if (cmpMeta.$watchers$ && flags & 128 /* isWatchReady */) {\n                const watchMethods = cmpMeta.$watchers$[propName];\n                if (watchMethods) {\n                    // this instance is watching for when this property changed\n                    watchMethods.map((watchMethodName) => {\n                        try {\n                            // fire off each of the watch methods that are watching this property\n                            instance[watchMethodName](newVal, oldVal, propName);\n                        }\n                        catch (e) {\n                            consoleError(e, elm);\n                        }\n                    });\n                }\n            }\n            if ((flags & (2 /* hasRendered */ | 16 /* isQueuedForUpdate */)) === 2 /* hasRendered */) {\n                // looks like this value actually changed, so we've got work to do!\n                // but only if we've already rendered, otherwise just chill out\n                // queue that we need to do an update, but don't worry about queuing\n                // up millions cuz this function ensures it only runs once\n                scheduleUpdate(hostRef, false);\n            }\n        }\n    }\n};\nconst proxyComponent = (Cstr, cmpMeta, flags) => {\n    if (cmpMeta.$members$) {\n        if (Cstr.watchers) {\n            cmpMeta.$watchers$ = Cstr.watchers;\n        }\n        // It's better to have a const than two Object.entries()\n        const members = Object.entries(cmpMeta.$members$);\n        const prototype = Cstr.prototype;\n        members.map(([memberName, [memberFlags]]) => {\n            if ((memberFlags & 31 /* Prop */ ||\n                    ((flags & 2 /* proxyState */) && memberFlags & 32 /* State */))) {\n                // proxyComponent - prop\n                Object.defineProperty(prototype, memberName, {\n                    get() {\n                        // proxyComponent, get value\n                        return getValue(this, memberName);\n                    },\n                    set(newValue) {\n                        // proxyComponent, set value\n                        setValue(this, memberName, newValue, cmpMeta);\n                    },\n                    configurable: true,\n                    enumerable: true,\n                });\n            }\n            else if (flags & 1 /* isElementConstructor */ &&\n                memberFlags & 64 /* Method */) {\n                // proxyComponent - method\n                Object.defineProperty(prototype, memberName, {\n                    value(...args) {\n                        const ref = getHostRef(this);\n                        return ref.$onInstancePromise$.then(() => ref.$lazyInstance$[memberName](...args));\n                    },\n                });\n            }\n        });\n        if ((flags & 1 /* isElementConstructor */)) {\n            const attrNameToPropName = new Map();\n            prototype.attributeChangedCallback = function (attrName, _oldValue, newValue) {\n                plt.jmp(() => {\n                    const propName = attrNameToPropName.get(attrName);\n                    //  In a web component lifecycle the attributeChangedCallback runs prior to connectedCallback\n                    //  in the case where an attribute was set inline.\n                    //  ```html\n                    //    <my-component some-attribute=\"some-value\"></my-component>\n                    //  ```\n                    //\n                    //  There is an edge case where a developer sets the attribute inline on a custom element and then\n                    //  programmatically changes it before it has been upgraded as shown below:\n                    //\n                    //  ```html\n                    //    <!-- this component has _not_ been upgraded yet -->\n                    //    <my-component id=\"test\" some-attribute=\"some-value\"></my-component>\n                    //    <script>\n                    //      // grab non-upgraded component\n                    //      el = document.querySelector(\"#test\");\n                    //      el.someAttribute = \"another-value\";\n                    //      // upgrade component\n                    //      customElements.define('my-component', MyComponent);\n                    //    </script>\n                    //  ```\n                    //  In this case if we do not unshadow here and use the value of the shadowing property, attributeChangedCallback\n                    //  will be called with `newValue = \"some-value\"` and will set the shadowed property (this.someAttribute = \"another-value\")\n                    //  to the value that was set inline i.e. \"some-value\" from above example. When\n                    //  the connectedCallback attempts to unshadow it will use \"some-value\" as the initial value rather than \"another-value\"\n                    //\n                    //  The case where the attribute was NOT set inline but was not set programmatically shall be handled/unshadowed\n                    //  by connectedCallback as this attributeChangedCallback will not fire.\n                    //\n                    //  https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n                    //\n                    //  TODO(STENCIL-16) we should think about whether or not we actually want to be reflecting the attributes to\n                    //  properties here given that this goes against best practices outlined here\n                    //  https://developers.google.com/web/fundamentals/web-components/best-practices#avoid-reentrancy\n                    if (this.hasOwnProperty(propName)) {\n                        newValue = this[propName];\n                        delete this[propName];\n                    }\n                    else if (prototype.hasOwnProperty(propName) &&\n                        typeof this[propName] === 'number' &&\n                        this[propName] == newValue) {\n                        // if the propName exists on the prototype of `Cstr`, this update may be a result of Stencil using native\n                        // APIs to reflect props as attributes. Calls to `setAttribute(someElement, propName)` will result in\n                        // `propName` to be converted to a `DOMString`, which may not be what we want for other primitive props.\n                        return;\n                    }\n                    this[propName] = newValue === null && typeof this[propName] === 'boolean' ? false : newValue;\n                });\n            };\n            // create an array of attributes to observe\n            // and also create a map of html attribute name to js property name\n            Cstr.observedAttributes = members\n                .filter(([_, m]) => m[0] & 15 /* HasAttribute */) // filter to only keep props that should match attributes\n                .map(([propName, m]) => {\n                const attrName = m[1] || propName;\n                attrNameToPropName.set(attrName, propName);\n                if (m[0] & 512 /* ReflectAttr */) {\n                    cmpMeta.$attrsToReflect$.push([propName, attrName]);\n                }\n                return attrName;\n            });\n        }\n    }\n    return Cstr;\n};\nconst initializeComponent = async (elm, hostRef, cmpMeta, hmrVersionId, Cstr) => {\n    // initializeComponent\n    if ((hostRef.$flags$ & 32 /* hasInitializedComponent */) === 0) {\n        {\n            // we haven't initialized this element yet\n            hostRef.$flags$ |= 32 /* hasInitializedComponent */;\n            // lazy loaded components\n            // request the component's implementation to be\n            // wired up with the host element\n            Cstr = loadModule(cmpMeta);\n            if (Cstr.then) {\n                // Await creates a micro-task avoid if possible\n                const endLoad = uniqueTime();\n                Cstr = await Cstr;\n                endLoad();\n            }\n            if (!Cstr.isProxied) {\n                // we've never proxied this Constructor before\n                // let's add the getters/setters to its prototype before\n                // the first time we create an instance of the implementation\n                {\n                    cmpMeta.$watchers$ = Cstr.watchers;\n                }\n                proxyComponent(Cstr, cmpMeta, 2 /* proxyState */);\n                Cstr.isProxied = true;\n            }\n            const endNewInstance = createTime('createInstance', cmpMeta.$tagName$);\n            // ok, time to construct the instance\n            // but let's keep track of when we start and stop\n            // so that the getters/setters don't incorrectly step on data\n            {\n                hostRef.$flags$ |= 8 /* isConstructingInstance */;\n            }\n            // construct the lazy-loaded component implementation\n            // passing the hostRef is very important during\n            // construction in order to directly wire together the\n            // host element and the lazy-loaded instance\n            try {\n                new Cstr(hostRef);\n            }\n            catch (e) {\n                consoleError(e);\n            }\n            {\n                hostRef.$flags$ &= ~8 /* isConstructingInstance */;\n            }\n            {\n                hostRef.$flags$ |= 128 /* isWatchReady */;\n            }\n            endNewInstance();\n            fireConnectedCallback(hostRef.$lazyInstance$);\n        }\n        if (Cstr.style) {\n            // this component has styles but we haven't registered them yet\n            let style = Cstr.style;\n            const scopeId = getScopeId(cmpMeta);\n            if (!styles.has(scopeId)) {\n                const endRegisterStyles = createTime('registerStyles', cmpMeta.$tagName$);\n                registerStyle(scopeId, style, !!(cmpMeta.$flags$ & 1 /* shadowDomEncapsulation */));\n                endRegisterStyles();\n            }\n        }\n    }\n    // we've successfully created a lazy instance\n    const ancestorComponent = hostRef.$ancestorComponent$;\n    const schedule = () => scheduleUpdate(hostRef, true);\n    if (ancestorComponent && ancestorComponent['s-rc']) {\n        // this is the initial load and this component it has an ancestor component\n        // but the ancestor component has NOT fired its will update lifecycle yet\n        // so let's just cool our jets and wait for the ancestor to continue first\n        // this will get fired off when the ancestor component\n        // finally gets around to rendering its lazy self\n        // fire off the initial update\n        ancestorComponent['s-rc'].push(schedule);\n    }\n    else {\n        schedule();\n    }\n};\nconst fireConnectedCallback = (instance) => {\n    {\n        safeCall(instance, 'connectedCallback');\n    }\n};\nconst connectedCallback = (elm) => {\n    if ((plt.$flags$ & 1 /* isTmpDisconnected */) === 0) {\n        const hostRef = getHostRef(elm);\n        const cmpMeta = hostRef.$cmpMeta$;\n        const endConnected = createTime('connectedCallback', cmpMeta.$tagName$);\n        if (!(hostRef.$flags$ & 1 /* hasConnected */)) {\n            // first time this component has connected\n            hostRef.$flags$ |= 1 /* hasConnected */;\n            {\n                // initUpdate\n                // if the slot polyfill is required we'll need to put some nodes\n                // in here to act as original content anchors as we move nodes around\n                // host element has been connected to the DOM\n                if ((cmpMeta.$flags$ & (4 /* hasSlotRelocation */ | 8 /* needsShadowDomShim */))) {\n                    setContentReference(elm);\n                }\n            }\n            {\n                // find the first ancestor component (if there is one) and register\n                // this component as one of the actively loading child components for its ancestor\n                let ancestorComponent = elm;\n                while ((ancestorComponent = ancestorComponent.parentNode || ancestorComponent.host)) {\n                    // climb up the ancestors looking for the first\n                    // component that hasn't finished its lifecycle update yet\n                    if (ancestorComponent['s-p']) {\n                        // we found this components first ancestor component\n                        // keep a reference to this component's ancestor component\n                        attachToAncestor(hostRef, (hostRef.$ancestorComponent$ = ancestorComponent));\n                        break;\n                    }\n                }\n            }\n            // Lazy properties\n            // https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n            if (cmpMeta.$members$) {\n                Object.entries(cmpMeta.$members$).map(([memberName, [memberFlags]]) => {\n                    if (memberFlags & 31 /* Prop */ && elm.hasOwnProperty(memberName)) {\n                        const value = elm[memberName];\n                        delete elm[memberName];\n                        elm[memberName] = value;\n                    }\n                });\n            }\n            {\n                initializeComponent(elm, hostRef, cmpMeta);\n            }\n        }\n        else {\n            // not the first time this has connected\n            // reattach any event listeners to the host\n            // since they would have been removed when disconnected\n            addHostEventListeners(elm, hostRef, cmpMeta.$listeners$);\n            // fire off connectedCallback() on component instance\n            fireConnectedCallback(hostRef.$lazyInstance$);\n        }\n        endConnected();\n    }\n};\nconst setContentReference = (elm) => {\n    // only required when we're NOT using native shadow dom (slot)\n    // or this browser doesn't support native shadow dom\n    // and this host element was NOT created with SSR\n    // let's pick out the inner content for slot projection\n    // create a node to represent where the original\n    // content was first placed, which is useful later on\n    const contentRefElm = (elm['s-cr'] = doc.createComment(''));\n    contentRefElm['s-cn'] = true;\n    elm.insertBefore(contentRefElm, elm.firstChild);\n};\nconst disconnectedCallback = (elm) => {\n    if ((plt.$flags$ & 1 /* isTmpDisconnected */) === 0) {\n        const hostRef = getHostRef(elm);\n        const instance = hostRef.$lazyInstance$ ;\n        {\n            if (hostRef.$rmListeners$) {\n                hostRef.$rmListeners$.map((rmListener) => rmListener());\n                hostRef.$rmListeners$ = undefined;\n            }\n        }\n        {\n            safeCall(instance, 'disconnectedCallback');\n        }\n    }\n};\nconst bootstrapLazy = (lazyBundles, options = {}) => {\n    const endBootstrap = createTime();\n    const cmpTags = [];\n    const exclude = options.exclude || [];\n    const customElements = win.customElements;\n    const head = doc.head;\n    const metaCharset = /*@__PURE__*/ head.querySelector('meta[charset]');\n    const visibilityStyle = /*@__PURE__*/ doc.createElement('style');\n    const deferredConnectedCallbacks = [];\n    let appLoadFallback;\n    let isBootstrapping = true;\n    Object.assign(plt, options);\n    plt.$resourcesUrl$ = new URL(options.resourcesUrl || './', doc.baseURI).href;\n    lazyBundles.map((lazyBundle) => {\n        lazyBundle[1].map((compactMeta) => {\n            const cmpMeta = {\n                $flags$: compactMeta[0],\n                $tagName$: compactMeta[1],\n                $members$: compactMeta[2],\n                $listeners$: compactMeta[3],\n            };\n            {\n                cmpMeta.$members$ = compactMeta[2];\n            }\n            {\n                cmpMeta.$listeners$ = compactMeta[3];\n            }\n            {\n                cmpMeta.$attrsToReflect$ = [];\n            }\n            {\n                cmpMeta.$watchers$ = {};\n            }\n            const tagName = cmpMeta.$tagName$;\n            const HostElement = class extends HTMLElement {\n                // StencilLazyHost\n                constructor(self) {\n                    // @ts-ignore\n                    super(self);\n                    self = this;\n                    registerHost(self, cmpMeta);\n                    if (cmpMeta.$flags$ & 1 /* shadowDomEncapsulation */) {\n                        // this component is using shadow dom\n                        // and this browser supports shadow dom\n                        // add the read-only property \"shadowRoot\" to the host element\n                        // adding the shadow root build conditionals to minimize runtime\n                        {\n                            {\n                                self.attachShadow({ mode: 'open' });\n                            }\n                        }\n                    }\n                }\n                connectedCallback() {\n                    if (appLoadFallback) {\n                        clearTimeout(appLoadFallback);\n                        appLoadFallback = null;\n                    }\n                    if (isBootstrapping) {\n                        // connectedCallback will be processed once all components have been registered\n                        deferredConnectedCallbacks.push(this);\n                    }\n                    else {\n                        plt.jmp(() => connectedCallback(this));\n                    }\n                }\n                disconnectedCallback() {\n                    plt.jmp(() => disconnectedCallback(this));\n                }\n                componentOnReady() {\n                    return getHostRef(this).$onReadyPromise$;\n                }\n            };\n            cmpMeta.$lazyBundleId$ = lazyBundle[0];\n            if (!exclude.includes(tagName) && !customElements.get(tagName)) {\n                cmpTags.push(tagName);\n                customElements.define(tagName, proxyComponent(HostElement, cmpMeta, 1 /* isElementConstructor */));\n            }\n        });\n    });\n    {\n        visibilityStyle.innerHTML = cmpTags + HYDRATED_CSS;\n        visibilityStyle.setAttribute('data-styles', '');\n        head.insertBefore(visibilityStyle, metaCharset ? metaCharset.nextSibling : head.firstChild);\n    }\n    // Process deferred connectedCallbacks now all components have been registered\n    isBootstrapping = false;\n    if (deferredConnectedCallbacks.length) {\n        deferredConnectedCallbacks.map((host) => host.connectedCallback());\n    }\n    else {\n        {\n            plt.jmp(() => (appLoadFallback = setTimeout(appDidLoad, 30)));\n        }\n    }\n    // Fallback appLoad event\n    endBootstrap();\n};\nconst hostRefs = new WeakMap();\nconst getHostRef = (ref) => hostRefs.get(ref);\nconst registerInstance = (lazyInstance, hostRef) => hostRefs.set((hostRef.$lazyInstance$ = lazyInstance), hostRef);\nconst registerHost = (elm, cmpMeta) => {\n    const hostRef = {\n        $flags$: 0,\n        $hostElement$: elm,\n        $cmpMeta$: cmpMeta,\n        $instanceValues$: new Map(),\n    };\n    {\n        hostRef.$onInstancePromise$ = new Promise((r) => (hostRef.$onInstanceResolve$ = r));\n    }\n    {\n        hostRef.$onReadyPromise$ = new Promise((r) => (hostRef.$onReadyResolve$ = r));\n        elm['s-p'] = [];\n        elm['s-rc'] = [];\n    }\n    addHostEventListeners(elm, hostRef, cmpMeta.$listeners$);\n    return hostRefs.set(elm, hostRef);\n};\nconst isMemberInElement = (elm, memberName) => memberName in elm;\nconst consoleError = (e, el) => (0, console.error)(e, el);\nconst cmpModules = /*@__PURE__*/ new Map();\nconst loadModule = (cmpMeta, hostRef, hmrVersionId) => {\n    // loadModuleImport\n    const exportName = cmpMeta.$tagName$.replace(/-/g, '_');\n    const bundleId = cmpMeta.$lazyBundleId$;\n    const module = cmpModules.get(bundleId) ;\n    if (module) {\n        return module[exportName];\n    }\n    /*!__STENCIL_STATIC_IMPORT_SWITCH__*/\n    return import(\n    /* @vite-ignore */\n    /* webpackInclude: /\\.entry\\.js$/ */\n    /* webpackExclude: /\\.system\\.entry\\.js$/ */\n    /* webpackMode: \"lazy\" */\n    `./${bundleId}.entry.js${''}`).then((importedModule) => {\n        {\n            cmpModules.set(bundleId, importedModule);\n        }\n        return importedModule[exportName];\n    }, consoleError);\n};\nconst styles = new Map();\nconst queueDomReads = [];\nconst queueDomWrites = [];\nconst queueTask = (queue, write) => (cb) => {\n    queue.push(cb);\n    if (!queuePending) {\n        queuePending = true;\n        if (write && plt.$flags$ & 4 /* queueSync */) {\n            nextTick(flush);\n        }\n        else {\n            plt.raf(flush);\n        }\n    }\n};\nconst consume = (queue) => {\n    for (let i = 0; i < queue.length; i++) {\n        try {\n            queue[i](performance.now());\n        }\n        catch (e) {\n            consoleError(e);\n        }\n    }\n    queue.length = 0;\n};\nconst flush = () => {\n    // always force a bunch of medium callbacks to run, but still have\n    // a throttle on how many can run in a certain time\n    // DOM READS!!!\n    consume(queueDomReads);\n    // DOM WRITES!!!\n    {\n        consume(queueDomWrites);\n        if ((queuePending = queueDomReads.length > 0)) {\n            // still more to do yet, but we've run out of time\n            // let's let this thing cool off and try again in the next tick\n            plt.raf(flush);\n        }\n    }\n};\nconst nextTick = /*@__PURE__*/ (cb) => promiseResolve().then(cb);\nconst writeTask = /*@__PURE__*/ queueTask(queueDomWrites, true);\n\nexport { Host as H, bootstrapLazy as b, createEvent as c, getElement as g, h, promiseResolve as p, registerInstance as r };\n","\"use strict\";\n\nvar _frameworkImportPath = require(\"@storybook/angular\");\n\n/* eslint-disable import/no-unresolved */\n(0, _frameworkImportPath.configure)([require.context('./apps/dotcms-block-editor/src/app', true, /^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$/),require.context('./apps/dotcms-block-editor/src/app', true, /^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$/)], module, false);"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","webpackContextKeys","Object","resolve","module","exports","webpackEmptyContext","webpackAsyncContext","Promise","then","ids","all","slice","EditorDirective","constructor","el","_renderer","outputFormat","onChange","onTouched","handleChange","transaction","docChanged","this","editor","getJSON","getHTML","writeValue","value","chain","setContent","run","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","setEditable","setProperty","nativeElement","ngOnInit","innerHTML","appendChild","options","element","firstChild","setOptions","on","ngOnDestroy","destroy","ElementRef","Renderer2","Input","Directive","selector","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","FloatingMenuDirective","_el","pluginKey","tippyOptions","shouldShow","registerPlugin","unregisterPlugin","BubbleMenuDirective","DraggableDirective","draggable","handle","HostBinding","NodeViewContentDirective","AngularRenderer","component","injector","props","applicationRef","get","ApplicationRef","factory","ComponentFactoryResolver","resolveComponentFactory","componentRef","create","updateProps","attachView","hostView","instance","elementRef","dom","entries","forEach","key","detectChanges","changeDetectorRef","detachView","AngularNodeViewComponent","Component","template","AngularNodeView","mount","node","decorations","selected","extension","getPos","updateAttributes","attributes","deleteNode","renderer","config","ondragstart","onDragStart","contentDOMElement","isLeaf","document","createElement","isInline","style","whiteSpace","contentDOM","maybeMoveContentDOM","contentElement","querySelector","contains","update","type","selectNode","deselectNode","AngularNodeViewRenderer","ContentletBlockComponent","data","attrs","encapsulation","ViewEncapsulation","NodeTypes","CustomNodeTypes","DOT_IMAGE","DOT_CONTENT","SuggestionsService","http","defaultHeaders","headers","set","getContentTypes","filter","allowedTypes","post","types","query","orderBy","direction","perPage","pipe","pluck","getContentlets","contentType","currentLanguage","sort","offset","limit","getContentletsUrlMap","Injectable","DotLanguageService","getLanguages","languages","of","lang","dotLang","getDotLanguageObject","reduce","obj","assign","providedIn","SuggestionsListItemComponent","role","tabindex","label","url","urlItem","icon","split","length","getLabel","innerText","focus","unfocus","scrollIntoView","isIntoView","child","parent","parentElement","top","containerTop","containerBot","height","containerHeight","getBoundingClientRect","scrollTop","scrollBot","bottom","alignToTop","containerRect","SuggestionListComponent","ngAfterContentInit","keyManager","items","withWrap","updateSelection","event","activeItem","onKeydown","execCommand","command","setFirstItemActive","resetKeyManager","setTimeout","updateActiveItem","index","setActiveItem","ItemsType","ContentChildren","SuggestionsComponent","suggestionsService","dotLanguageService","cd","title","noResultsMessage","isOpen","allowedContentTypes","loading","clearFilter","EventEmitter","goBack","mouseMove","isFilterActive","onMousemove","suggestionOptions","item","emit","BLOCK","includes","onSelection","name","initialItems","itemsLoaded","take","subscribe","dotLangs","ngAfterViewInit","addCContentletItem","CONTENTTYPE","loadContentTypes","list","handleBackButton","MouseEvent","onMouseDownHandler","preventDefault","onMouseEnter","Number","target","dataset","onMouseDown","stopPropagation","CONTENT","filterItems","toLowerCase","trim","loadContentlets","selectedContentType","searchContentlets","link","contentlets","contentlet","language","getContentletLanguage","languageId","payload","requestAnimationFrame","variable","languageCode","countryCode","ChangeDetectorRef","ViewChild","static","Output","HostListener","ActionButtonComponent","StringUtils","getLine","text","indexLine","line","lines","camelize","str","replace","letter","toUpperCase","titleCase","charAt","toLocaleUpperCase","environment","HttpRequestUtils","getQueryParams","window","location","search","substring","Map","param","paramSplit","getQueryStringParam","results","RegExp","exec","href","decodeURIComponent","LoggerService","stringUtils","showLogs","httpRequestUtils","shouldShowLogs","console","info","message","optionalParams","wrapMessage","error","warn","debug","devMode","getCaller","caller","cleanCaller","stack","substr","UserModel","loggerService","localeId","suppressAlerts","locale","checkQueryForUrl","locationQuery","q","token","idx","indexOf","end","Inject","LOCALE_ID","ApiRoot","authUser","siteId","hideFireOn","hideRulePushOptions","hash","parseQueryParam","configureUser","result","user","BrowserUtil","isIE11","navigator","appName","appVersion","HttpCode","CLIENTS_ONLY_MESSAGES","CwError","request","response","source","ResponseView","resp","bodyJsonObject","body","header","headerName","i18nMessagesMap","entity","tempFiles","errorsMessages","errorMessages","errors","messages","toString","status","existError","errorCode","CoreWebService","router","httpErrosSubjects","method","getRequestOpts","catchError","_original","emitHttpError","statusText","requestView","handleRequestViewErrors","err","throwError","handleResponseHttpErrors","subscribeToHttpError","httpErrorCode","asObservable","navigate","next","getHttpHeaders","params","getHttpParams","getFixedUrl","httpHeaders","getDefaultRequestHeaders","delete","startsWith","match","httpParams","DotPushPublishDialogService","showDialog$","open","DotRouterService","goToMain","goToLogin","parameters","goToURL","isPublicUrl","isFromCoreUrl","isRootUrl","gotoPortlet","portletId","goToForgotPassword","goToNotLicensed","DotcmsConfigService","coreWebService","configParamsSubject","BehaviorSubject","configUrl","loadConfig","getConfig","res","configParams","colors","emailRegex","license","logos","menu","paginatorLinks","paginatorRows","releaseInfo","buildDate","version","websocket","websocketReconnectTime","disabledWebsockets","getTimeZones","timezones","a","b","getSystemTimeZone","Protocol","_open","_close","_message","_error","message$","open$","close$","error$","reconnect","close","connect","complete","WEB_SOCKET_PROTOCOL_CODE","WebSocketProtocol","super","dataStream","test","errorThrown","socket","WebSocket","onopen","ev","onmessage","JSON","parse","onclose","NORMAL_CLOSE_CODE","onerror","readyState","LongPollingProtocol","isClosed","isAlreadyOpen","connectLongPooling","getLastCallback","lastCallback","creationDate","lastCallBack","triggerOpen","Array","DotEventsSocketURL","useSSL","getWebSocketURL","getWebSocketProtocol","getLongPoolingURL","getHttpProtocol","ConnectionStatus","DotEventsSocket","dotEventsSocketURL","dotcmsConfigService","NONE","init","tap","CONNECTING","connectProtocol","protocolImpl","CLOSED","isConnected","CONNECTED","webSocketConfigParams","isWebSocketsBrowserSupport","getLongPollingProtocol","shouldTryWithLongPooling","getAfterErrorStatus","_event","RECONNECTING","isWebSocketProtocol","DotcmsEventsService","dotEventsSocket","subjects","messagesSub","unsubscribe","start","switchMap","subscribeTo","clientEventType","subscribeToEvents","clientEventTypes","subject","eventType","LoginService","dotcmsEventsService","_auth$","_logout$","country","_loginAsUsersList$","urls","changePassword","getAuth","loginAs","logout","logoutAs","recoverPassword","serverInfo","userAuth","current","logOutUser","getCurrentUser","loginAsUsersList$","auth$","logout$","auth","_auth","isLogin$","loadAuth","setAuth","password","stringify","getLoginFormInfo","i18nKeys","setLanguage","messagesKey","userData","userId","loginAsUser","isLoginAs","loginUser","login","rememberMe","backEndLogin","watchUser","func","undefined","languageDesc","Date","getTime","RoutingService","loginService","_menusChange$","_portletUrlSource$","_currentPortlet$","urlMenus","portlets","loadMenus","bind","currentPortletId","_currentPortletId","currentMenu","menus","menusChange$","portletUrl$","firstPortlet","porlets","addPortletURL","getPortletURL","goToPortlet","isPortlet","getPortletId","has","setCurrentPortlet","currentPortlet$","setMenus","i","k","menuItems","subMenuItem","angular","menuLink","changeRefreshPortlet","urlSplit","SiteService","events","_switchSite$","_refreshSites$","currentSiteUrl","sitesUrl","switchSiteUrl","eventResponse","siteEventsHandler","setCurrentSite","loadCurrentSite","identifier","selectedSite","switchToDefaultSite","currentSite","switchSite","site","refreshSites$","switchSite$","getSiteById","sites","getCurrentSite","requestCurrentSite","AppConfig","iconPath","dotCMSURLKey","LocalStoreService","storeValue","localStorage","setItem","getValue","getItem","clearValue","removeItem","clear","DotLocalStoreModule","NgModule","NotificationService","displayErrorMessage","displayMessage","displaySuccessMessage","displayInfoMessage","_title","myNotification","Notification","DotNotificationModule","CoreWebServiceMock","_http","optionsArgs","DragHandlerComponent","ImageBlockComponent","_elementRef","updateImageAttributes","off","textAlign","LoaderComponent","fallbackErrorMessages","uploadFile","file","uploadFileByURL","fetch","Origin","hostname","remoteUrl","json","errorHandler","uploadBinaryFile","path","maxSize","formData","FormData","isArray","append","dotRequest","opts","progressCallBack","rej","xhr","XMLHttpRequest","setRequestHeader","onload","upload","onprogress","percentComplete","loaded","total","send","catch","DotImageService","publishContent","setTempResource","files","push","baseType","asset","hostFolder","indexPolicy","from","BubbleMenuComponent","toggleChangeTo","preventDeSelection","BubbleMenuButtonComponent","active","findParentNode","selectionStart","NodesTypesToFind","depth","openFormLinkOnclik","view","pos","state","doc","range","to","textOffset","childCount","nodeSize","textNodeRange","setTextSelection","openLinkForm","openOnClick","BubbleLinkFormView","scrollElementMap","$destroy","focusHandler","selection","LINK_FORM_PLUGIN_KEY","getState","commands","closeLinkForm","remove","visibility","setComponentEvents","addEventListener","hanlderScroll","prevState","prev","createTooltip","show","hide","detectLinkFormChanges","editorElement","editorIsAttached","tippy","duration","getReferenceClientRect","setTippyPosition","content","interactive","maxWidth","trigger","placement","hideOnClick","popperOptions","modifiers","fallbackPlacements","showSuggestions","setInputValues","focusInput","Math","min","ranges","$from","max","$to","nodeClientRect","editorClientRect","domRect","isOverflow","nodeAt","isNodeImage","setLinkValues","isDotImageNode","setImageLink","setLink","blank","removeLink","unsetImageLink","unsetLink","values","getLinkProps","initialValues","setFormValue","takeUntil","isSuggestionOpen","popperInstance","setNodeProps","isActive","getAttributes","getLinkSelect","textBetween","isValidURL","bubbleLinkFormPlugin","lastNode","apply","oldState","getMeta","handleDOMEvents","mousedown","clientX","left","clientY","posAtCoords","getPosAtDocCoords","unsetHighlight","handleClickOn","handleDoubleClickOn","BubbleLinkFormExtension","viewContainerRef","addOptions","addCommands","setHighlight","tr","setMeta","addProseMirrorPlugins","createComponent","BubbleMenuLinkFormComponent","hideBubbleMenuOn","dotContent","shouldShowBubbleMenu","isEmptyTextBlock","hasFocus","empty","nodeText","isListNode","bubbleMenuItems","markAction","divider","bubbleMenuImageItems","popperModifiers","altAxis","tether","fb","minChars","noResultsTitle","newLink","currentLink","form","group","valueChanges","debounceTime","suggestionsComponent","submitForm","setLoading","setValue","emitEvent","input","onKeyDownEvent","resetForm","FormBuilder","ContentletStatePipe","transform","live","working","deleted","hasLiveVersion","Pipe","SuggestionLoadingListComponent","fill","FormActionsComponent","copy","clipboard","writeText","alert","NgxTiptapModule","imports","FormsModule","ReactiveFormsModule","declarations","FloatingActionsView","invalidNodes","mousedownHandler","insertContent","capture","unmount","render","isRootDepth","$anchor","isNodeEmpty","textContent","nodeType","setProps","rect","onStart","clientRect","onExit","removeEventListener","FloatingActionsPluginKey","FloatingActionsPlugin","transactionMeta","handleKeyDown","onKeyDown","headerIcons","domSanitizer","sanitizeUrl","bypassSecurityTrustUrl","level","size","SuggestionPopperModifiers","whatToDo","addContentletBlock","heading","addHeading","orderedList","deleteRange","toggleOrderedList","bulletList","toggleBulletList","blockquote","setBlockquote","codeBlock","setCodeBlock","horizontalLine","setHorizontalRule","ActionsMenu","myTippy","suggestionKey","destroy$","setUpSuggestionComponent","allowedBlocks","storage","dotConfig","getSuggestionComponent","suggestionQuery","queryRange","getTippyInstance","appendTo","showOnCreate","onHide","dispatch","suggestion","char","allowSpaces","startOfLine","toggleHeading","schema","nodes","replaceSelectionWith","button","ImageBlock","inline","addAttributes","default","parseHTML","getAttribute","renderHTML","tag","HTMLAttributes","addNodeView","PlaceholderPlugin","mapping","action","add","deco","find","spec","ImageUpload","dotImageService","areImageFiles","dataTransfer","clipboardData","isImageBlockAllowed","uploadImages","position","placeHolderName","setPlaceHolder","loadingBlock","dotAssets","insertContentAt","removePlaceHolder","paste","getPositionFromCursor","drop","DragHandler","nodeToBeDragged","dragHandler","dragStart","blockPosAtCoords","coords","getDirectChild","nodeDOM","inside","desc","docView","nearestDesc","posBefore","setSelection","clearData","setDragImage","dragging","move","parentNode","classList","editorView","bindEventsToDragHandler","setAttribute","removeNode","removeChild","mousemove","nodeHasContent","positon","hasChildNodes","childNodes","nodeName","canDragNode","getPositon","container","DotBubbleMenuPlugin","changeTo","changeToComponent","DotBubbleMenuPluginView","shouldShowProp","updateActiveItems","activeMarks","enabledMarks","marks","setActiveMarks","aligment","mark","alignment","changeToElement","exeCommand","setChangeToOptions","showMenu","blurHandler","tippyChangeTo","popper","isSame","eq","composing","createChangeToTooltip","selectionRange","selectionNodesCount","nodesBetween","isBlock","img","getElementsByTagName","getNodePosition","updateComponent","setMenuItems","dragstartHandler","setSelectedNodeItem","isDotImage","selectionNode","toggleBold","toggleItalic","toggleStrike","toggleUnderline","toggleTextAlign","sinkListItem","liftListItem","deleteByRange","deleteByNode","unsetAllMarks","clearNodes","unsetTextAlign","setTextAlign","changeToOptions","changeTopCommands","heading1","setHeading","heading2","heading3","paragraph","setParagraph","toggleBlockquote","toggleCodeBlock","option","activeNode","findIndex","onShow","isVisible","deleteSelectedCustomNodeType","deleteSelectionNode","blur","selectionParentNode","nodeSelectionNodeType","closestOrderedOrBulletNode","ORDERED_LIST","BULLET_LIST","LIST_ITEM","defaultTippyOptions","DotBubbleMenuExtension","bubbleMenuComponent","bubbleMenuElement","DotBlockEditorComponent","customStyles","_allowedBlocks","blocks","Boolean","extensions","setEditorExtensions","defaultExtensions","addStorage","placeholder","toTitleCase","txt","customExtensions","setStarterKitOptions","setCustomExtensions","headingOptions","levels","object","Injector","ViewContainerRef","contentletsMock","inode","image","modDate","archived","locked","titleImage","folder","hasTitleImage","__icon__","contentTypeIcon","primary","moduleMetadata","useValue","cd769844de530f7b5d3434b1b5cfdd62","mimeType","delay","defaultLanguage","entryComponents","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_defineProperty","defineProperty","configurable","writable","Reflect","customElements","HTMLElement","construct","prototype","setPrototypeOf","defineCustomElements","win","patchEsm","promiseResolve","bootstrapLazy","addArgs","addArgTypes","decorator","addDecorator","loader","addLoader","addParameters","_objectSpread","arguments","getOwnPropertyDescriptors","defineProperties","enhancer","addArgTypesEnhancer","addArgsEnhancer","setGlobalRender","v","log","scopeId","contentRef","hostTagName","useNativeShadowDom","checkSlotFallbackVisibility","checkSlotRelocate","queuePending","head","plt","$flags$","$resourcesUrl$","jmp","h","raf","ael","eventName","listener","rel","ce","CustomEvent","supportsConstructableStylesheets","CSSStyleSheet","replaceSync","addHostEventListeners","elm","hostRef","listeners","attachParentListeners","flags","getHostListenerTarget","handler","hostListenerProxy","hostListenerOpts","$rmListeners$","methodName","$lazyInstance$","$queuedListeners$","consoleError","HYDRATED_CSS","rootAppliedStyles","WeakMap","registerStyle","cssText","allowCS","styles","attachStyles","cmpMeta","$cmpMeta$","$hostElement$","endAttachStyles","$tagName$","addStyle","styleContainerNode","mode","hostElm","getScopeId","styleElm","appliedStyles","Set","insertBefore","adoptedStyleSheets","shadowRoot","getRootNode","cmp","EMPTY_OBJ","isComplexType","vnodeData","slotName","simple","lastSimple","vNodeChildren","walk","c","String","$text$","newVNode","children","classData","className","join","vnode","$attrs$","$children$","$key$","$name$","$tag$","$elm$","Host","setAccessor","memberName","oldValue","newValue","isSvg","isProp","isMemberInElement","ln","oldClasses","parseClassList","newClasses","_toConsumableArray","prop","removeProperty","isComplex","tagName","n","removeAttribute","parseClassListRegex","updateElement","oldVnode","newVnode","isSvgMode","host","oldVnodeAttrs","newVnodeAttrs","createElm","oldParentVNode","newParentVNode","childIndex","parentElm","childNode","oldVNode","createTextNode","isDef","putBackInOriginalLocation","recursive","oldSlotChildNodes","parentReferenceNode","referenceNode","addVnodes","before","parentVNode","vnodes","startIdx","endIdx","containerElm","removeVnodes","updateChildren","oldCh","newCh","elmToMove","oldStartIdx","newStartIdx","idxInOld","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","isSameVnode","patch","nextSibling","vnode1","vnode2","defaultHolder","oldChildren","newChildren","updateFallbackSlotVisibility","ilen","j","slotNameAttr","hidden","relocateNodes","relocateSlotContent","hostContentNodes","relocateNodeData","isNodeLocatedInSlot","r","$nodeToRelocate$","$slotRefNode$","relocateNode","some","nodeToRelocate","renderVdom","renderFnResults","$vnode$","rootVnode","isHost","$attrsToReflect$","propName","attribute","relocateData","orgLocationNode","parentNodeRef","insertBeforeNode","refNode","previousSibling","getElement","ref","getHostRef","createEvent","detail","bubbles","composed","cancelable","dispatchEvent","attachToAncestor","ancestorComponent","$onRenderResolve$","scheduleUpdate","isInitialLoad","$ancestorComponent$","writeTask","dispatchHooks","promise","endSchedule","safeCall","endUpdate","rc","endRender","callRender","cb","childrenPromises","postUpdate","postUpdateComponent","endPostUpdate","addHydratedFlag","$onReadyResolve$","appDidLoad","$onInstanceResolve$","nextTick","who","documentElement","namespace","arg","thenFn","newVal","oldVal","$instanceValues$","parsePropertyValue","propValue","propType","parseFloat","$members$","areBothNaN","isNaN","$watchers$","watchMethods","watchMethodName","proxyComponent","Cstr","watchers","members","memberFlags","args","$onInstancePromise$","attrNameToPropName","attributeChangedCallback","attrName","_oldValue","_this","hasOwnProperty","observedAttributes","m","initializeComponent","hmrVersionId","_context2","loadModule","endLoad","isProxied","endNewInstance","fireConnectedCallback","endRegisterStyles","schedule","connectedCallback","endConnected","$listeners$","setContentReference","contentRefElm","createComment","disconnectedCallback","rmListener","lazyBundles","appLoadFallback","endBootstrap","cmpTags","exclude","metaCharset","visibilityStyle","deferredConnectedCallbacks","isBootstrapping","URL","resourcesUrl","baseURI","lazyBundle","compactMeta","HostElement","_inherits","self","_classCallCheck","_this2","registerHost","attachShadow","_createClass","clearTimeout","_this3","_this4","componentOnReady","$onReadyPromise$","$lazyBundleId$","define","hostRefs","registerInstance","lazyInstance","cmpModules","exportName","bundleId","importedModule","queueDomReads","queueDomWrites","queueTask","queue","write","flush","consume","performance","now","require","configure"],"sourceRoot":"webpack:///"}